var wt=Object.defineProperty,kt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var W=(t,e,a)=>e in t?wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,v=(t,e)=>{for(var a in e||(e={}))J.call(e,a)&&W(t,a,e[a]);if(C)for(var a of C(e))H.call(e,a)&&W(t,a,e[a]);return t},h=(t,e)=>kt(t,yt(e));var b=(t,e)=>{var a={};for(var i in t)J.call(t,i)&&e.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&C)for(var i of C(t))e.indexOf(i)<0&&H.call(t,i)&&(a[i]=t[i]);return a};var u=(t,e,a)=>(W(t,typeof e!="symbol"?e+"":e,a),a);import{e as N,u as O,r as n,C as j,R as jt,c as At,q as Et,a as nt,i as zt,F,I as M,B as g,m as k,b as Ft,f as z,n as ot,d as y,S as B,L as x,g as pt,p as ct,h as St,w as st,j as _t,T as L,k as Lt,l as Rt,o as Nt,s as Ct,t as S,M as G,v as qt,x as It,O as Wt,y as $t,z as $,A as Ut}from"./vendor.34f8d6b6.js";const Mt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const p of o)if(p.type==="childList")for(const c of p.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const p={};return o.integrity&&(p.integrity=o.integrity),o.referrerpolicy&&(p.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?p.credentials="include":o.crossorigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function i(o){if(o.ep)return;o.ep=!0;const p=a(o);fetch(o.href,p)}};Mt();var Tt=`# joplin-batch-web\r
\r
## Overview\r
\r
Handles some batch operations that are not supported by Joplin itself, and presents them as a visual interface.\r
\r
- [x] Check for unreferenced attachment resources\r
      Some unused attachment resources are not cleaned up in time\r
- [x] Check for referenced attachment resources that do not exist\r
      Some attachments that are being used may not exist for various reasons\r
- [x] Convert external links to internal note references\r
      Would like to be able to convert previous blog links to internal \`:/id\` links to ensure they never expire\r
- [x] Check for notes that don't have a parent directory (usually an error)\r
\r
### Getting Started\r
\r
1. open joplin desktop version\r
2. Enable the web clipper\r
3. Fill out the configuration in the [Settings](https://joplin-utils.rxliuli.com/web/joplin-batch-web/#/settings) page\r
4. Navigate to the relevant function page\r
\r
![guide](https://github.com/rxliuli/joplin-utils/raw/master/apps/joplin-batch-web/docs/images/guide.gif)\r
\r
> If you want to participate in the development or run locally, you can refer to [Participate in the project](./docs/dev.md)\r
\r
## FAQ\r
\r
### Why not use the cli form\r
\r
The cli form is not very suitable for this scenario, e.g. when you need to preview unusual attachments or notes, which is more troublesome at the command line.\r
\r
### Will it record my note data\r
\r
The website works locally, there is no back-end server, if you are still worried, you can check the source code [joplin-batch-web](https://github.com/rxliuli/joplin-utils/tree/master/apps/joplin-batch-web)\r
`,Pt=`# joplin-batch-web\r
\r
\u5904\u7406\u4E00\u4E9B Joplin \u672C\u8EAB\u4E0D\u652F\u6301\u7684\u6279\u91CF\u64CD\u4F5C\uFF0C\u4EE5\u53EF\u89C6\u5316\u754C\u9762\u7684\u5F62\u5F0F\u5C55\u73B0\u51FA\u6765\u3002\r
\r
- [x] \u68C0\u67E5\u662F\u5426\u5B58\u5728\u6CA1\u6709\u5F15\u7528\u7684\u9644\u4EF6\u8D44\u6E90\r
      \u4E00\u4E9B\u6CA1\u6709\u4F7F\u7528\u7684\u9644\u4EF6\u8D44\u6E90\u6CA1\u6709\u88AB\u53CA\u65F6\u6E05\u7406\r
- [x] \u68C0\u67E5\u5F15\u7528\u7684\u9644\u4EF6\u8D44\u6E90\u4E0D\u5B58\u5728\u7684\u60C5\u51B5\r
      \u4E00\u4E9B\u6B63\u5728\u4F7F\u7528\u7684\u9644\u4EF6\u53EF\u80FD\u7531\u4E8E\u5404\u79CD\u539F\u56E0\u4E0D\u5B58\u5728\u4E86\r
- [x] \u8F6C\u6362\u5916\u90E8\u94FE\u63A5\u4E3A\u5185\u90E8\u7B14\u8BB0\u5F15\u7528\r
      \u5E0C\u671B\u80FD\u591F\u5C06\u4E4B\u524D\u7684 blog \u94FE\u63A5\u8F6C\u6362\u4E3A\u5185\u90E8\u7684 \`:/id\` \u94FE\u63A5\u4EE5\u4FDD\u8BC1\u6C38\u4E0D\u8FC7\u671F\r
- [x] \u68C0\u67E5\u662F\u5426\u5B58\u5728\u6CA1\u6709\u7236\u7EA7\u76EE\u5F55\u7684\u7B14\u8BB0\uFF08\u4E00\u822C\u662F\u9519\u8BEF\uFF09\r
\r
### \u5F00\u59CB\r
\r
1. \u6253\u5F00 joplin \u684C\u9762\u7248\r
2. \u542F\u7528\u7F51\u9875\u526A\u8F91\u5668\r
3. \u5728 [\u8BBE\u7F6E](https://joplin-utils.rxliuli.com/web/joplin-batch-web/#/settings) \u9875\u9762\u586B\u5199\u914D\u7F6E\r
4. \u5BFC\u822A\u5230\u76F8\u5173\u529F\u80FD\u9875\u9762\r
\r
![guide](https://github.com/rxliuli/joplin-utils/raw/master/apps/joplin-batch-web/docs/images/guide.gif)\r
\r
> \u5982\u679C\u60A8\u5E0C\u671B\u53C2\u4E0E\u5F00\u53D1\u6216\u5728\u672C\u5730\u8FD0\u884C\uFF0C\u53EF\u4EE5\u53C2\u8003 [\u53C2\u4E0E\u9879\u76EE](./docs/zh/dev.md)\r
\r
## FAQ\r
\r
### \u4E3A\u4EC0\u4E48\u4E0D\u4F7F\u7528 cli \u7684\u5F62\u5F0F\r
\r
cli \u7684\u5F62\u5F0F\u4E0D\u592A\u9002\u5408\u8FD9\u79CD\u573A\u666F\uFF0C\u4F8B\u5982\u9700\u8981\u9884\u89C8\u5F02\u5E38\u7684\u9644\u4EF6\u6216\u7B14\u8BB0\uFF0C\u5728\u547D\u4EE4\u884C\u4E0B\u6BD4\u8F83\u9EBB\u70E6\u3002\r
\r
### \u5B83\u4F1A\u8BB0\u5F55\u6211\u7684\u7B14\u8BB0\u6570\u636E\u4E48\r
\r
\u7F51\u7AD9\u662F\u5168\u672C\u5730\u5DE5\u4F5C\u7684\uFF0C\u6CA1\u6709\u540E\u7AEF\u670D\u52A1\u5668\uFF0C\u5982\u679C\u4F60\u4ECD\u7136\u62C5\u5FE7\uFF0C\u53EF\u4EE5\u68C0\u67E5\u6E90\u4EE3\u7801 [joplin-batch-web](https://github.com/rxliuli/joplin-utils/tree/master/apps/joplin-batch-web)\r
`;const Ot="_home_nvat1_1";var Bt={home:Ot};function lt(){return navigator.language.startsWith("zh")?N.ZhCN:N.En}const Dt=()=>{const[t]=O("language",lt());return n.exports.createElement(j,null,n.exports.createElement(jt,{className:Bt.home},t===N.En?Tt:Pt))},Vt="modulepreload",K={},Jt="./",Ht=function(e,a){return!a||a.length===0?e():Promise.all(a.map(i=>{if(i=`${Jt}${i}`,i in K)return;K[i]=!0;const o=i.endsWith(".css"),p=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${p}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Vt,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((s,r)=>{c.addEventListener("load",s),c.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};var Gt=Object.defineProperty,Kt=(t,e,a)=>e in t?Gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,Z=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,a)=>(typeof require!="undefined"?require:e)[a]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')}),rt=(t,e,a)=>(Kt(t,typeof e!="symbol"?e+"":e,a),a),w=class{static async pageToAllList(t,e){const a=[];for(let i=1,o=!0;o;i++){const p=await t(h(v({},e),{page:i,limit:this.MaxLimit}));o=p.has_more,a.push(...p.items)}return a}};rt(w,"MaxLimit",100);var dt=class{constructor(t){this.ajax=t}async list(t){return this.ajax.get("/notes",t)}async get(t,e){return this.ajax.get(`/notes/${t}`,{fields:e})}async create(t){return this.ajax.post("/notes",t)}async update(t){const i=t,{id:e}=i,a=b(i,["id"]);return await this.ajax.put(`/notes/${e}`,a)}async remove(t){return this.ajax.delete(`/notes/${t}`)}tagsById(t){return w.pageToAllList(i=>{var o=i,{id:e}=o,a=b(o,["id"]);return this.ajax.get(`/notes/${e}/tags`,v({},a))},{id:t})}async resourcesById(t,e=["id","title"]){return w.pageToAllList(o=>{var p=o,{id:a}=p,i=b(p,["id"]);return this.ajax.get(`/notes/${a}/resources`,v({fields:e},i))},{id:t})}},Zt=class{constructor(t){this.ajax=t}async list(t){return await this.ajax.get("/tags",t)}async get(t){return await this.ajax.get(`/tags/${t}`)}async create(t){return await this.ajax.post("/tags",t)}async update(t){const i=t,{id:e}=i,a=b(i,["id"]);return await this.ajax.post(`/tags/${e}`,a)}async remove(t){return await this.ajax.delete(`/tags/${t}`)}async notesByTagId(a){var i=a,{id:t}=i,e=b(i,["id"]);return await this.ajax.get(`/tags/${t}/notes`,e)}async addTagByNoteId(t,e){return await this.ajax.post(`/tags/${t}/notes/`,{id:e})}async removeTagByNoteId(t,e){return await this.ajax.delete(`/tags/${t}/notes/${e}`)}},f;(function(t){t[t.Note=1]="Note",t[t.Folder=2]="Folder",t[t.Setting=3]="Setting",t[t.Resource=4]="Resource",t[t.Tag=5]="Tag",t[t.NoteTag=6]="NoteTag",t[t.Search=7]="Search",t[t.Alarm=8]="Alarm",t[t.MasterKey=9]="MasterKey",t[t.ItemChange=10]="ItemChange",t[t.NoteResource=11]="NoteResource",t[t.ResourceLocalState=12]="ResourceLocalState",t[t.Revision=13]="Revision",t[t.Migration=14]="Migration",t[t.SmartFilter=15]="SmartFilter"})(f||(f={}));var T=class{constructor(t){this.ajax=t}async search(t){T.TypeEnumMap["8"]="";const i=t,{type:e}=i,a=b(i,["type"]);return this.ajax.get("/search",h(v({},a),{type:T.TypeEnumMap[e]}))}},mt=T;rt(mt,"TypeEnumMap",{[f.Note]:"note",[f.Folder]:"folder",[f.Setting]:"setting",[f.Resource]:"resource",[f.Tag]:"tag",[f.NoteTag]:"note_tag",[f.Search]:"search",[f.Alarm]:"alarm",[f.MasterKey]:"master_key",[f.ItemChange]:"item_change",[f.NoteResource]:"note_resource",[f.ResourceLocalState]:"resource_local_state",[f.Revision]:"revision",[f.Migration]:"migration",[f.SmartFilter]:"smart_filter"});var Qt=class{constructor(t){this.ajax=t}async ping(){return await this.ajax.get("/ping",{},{responseType:"text"})==="JoplinClipperServer"}},ut=class{constructor(t){this.ajax=t}async list(t){return this.ajax.get("/folders",t)}async listAll(){return this.ajax.get("/folders",{as_tree:1})}async get(t){return this.ajax.get(`/folders/${t}`)}async create(t){return this.ajax.post("/folders",t)}async update(t){const i=t,{id:e}=i,a=b(i,["id"]);return this.ajax.put(`/folders/${e}`,a)}async remove(t){return this.ajax.delete(`/folders/${t}`)}async notesByFolderId(t,e){return await w.pageToAllList(o=>{var p=o,{id:a}=p,i=b(p,["id"]);return this.ajax.get(`/folders/${a}/notes`,i)},{id:t,fields:e})}},Xt=class{constructor(t){this.ajax=t}async list(t){return await this.ajax.get("/resources",t)}async get(t,e){return await this.ajax.get(`/resources/${t}`,{fields:e})}async create(t){const i=t,{data:e}=i,a=b(i,["data"]);return await this.ajax.postFormData("/resources","post",{props:JSON.stringify(a),data:t.data})}async update(t){const o=t,{id:e,data:a}=o,i=b(o,["id","data"]);return await this.ajax.postFormData(`/resources/${e}`,"put",{props:JSON.stringify(i),data:a})}async remove(t){return await this.ajax.delete(`/resources/${t}`)}async fileByResourceId(t){const e=await this.ajax.get(`/resources/${t}/file`,{},{responseType:"arraybuffer"});return Buffer.from(e,"binary")}},R;(function(t){t.OpenAndWatch="openAndWatch",t.StopWatching="stopWatching",t.NoteIsWatched="noteIsWatched"})(R||(R={}));var Yt=class{constructor(t){this.ajax=t}openAndWatch(t){return this.baseAction(R.OpenAndWatch,t)}stopWatching(t){return this.baseAction(R.StopWatching,t)}async noteIsWatched(t){return this.isWatch(t)}async isWatch(t){return this.baseAction(R.NoteIsWatched,t)}async baseAction(t,e){return this.ajax.post("/services/externalEditWatcher",{action:t,noteId:e})}},E;(function(t){t.OpenAndWatch="openAndWatch",t.Watch="watch",t.StopWatching="stopWatching",t.NoteIsWatched="isWatched"})(E||(E={}));var te=class{constructor(t){this.ajax=t}openAndWatch(t){return this.baseAction(E.OpenAndWatch,t)}watch(t){return this.baseAction(E.Watch,t)}stopWatching(t){return this.baseAction(E.StopWatching,t)}async noteIsWatched(t){return this.baseAction(E.NoteIsWatched,t)}async baseAction(t,e){return this.ajax.post("/services/resourceEditWatcher",{action:t,resourceId:e})}},ee=class{constructor(t){u(this,"noteApi");this.noteApi=new dt(t)}rename(t,e){return this.noteApi.update({id:t,title:e})}move(t,e){return this.noteApi.update({id:t,parent_id:e})}async toggleTodo(t,e){const a=await this.noteApi.get(t,["id","is_todo","todo_completed"]);!a.is_todo||await this.noteApi.update({id:a.id,todo_completed:e||(a.todo_completed===0?1:0)})}},ae=class{constructor(t){u(this,"folderApi");this.folderApi=new ut(t)}rename(t,e){return this.folderApi.update({id:t,title:e})}async path(t){if(!t)return[];const e=await this.folderApi.get(t);return e.parent_id?(await this.path(e.parent_id)).concat([e]):[e]}async move(t,e){if(t===e)return;if((await this.path(e)).some(i=>t===i.id))throw new Error("Cannot move directory to subdirectory");await this.folderApi.update({id:t,parent_id:e})}},ie=class{constructor(){u(this,"baseUrl","http://localhost:41184");u(this,"token","")}},U=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof global!="undefined"&&global||{},ne=Object.freeze({method:"get",data:void 0,headers:{},responseType:"json"}),oe=class{constructor(t){this.config=t}async request(t){typeof fetch=="undefined"&&Reflect.set(U,"fetch",Z("node-fetch")),typeof FormData=="undefined"&&Reflect.set(U,"FormData",Z("form-data"));const e=v(v({},ne),t),a=await fetch(e.url,{method:e.method,headers:v({responseType:e.responseType},e.headers),body:e.data instanceof FormData?e.data:JSON.stringify(e.data)});if(!a.ok)throw new Error((await a.json()).error);switch(e.responseType){case"json":return await a.json();case"arraybuffer":return await a.arrayBuffer();case"blob":return await a.blob();case"text":return await a.text();default:throw new Error(`Unsupported responseType: ${e.responseType}`)}}baseUrl(t,e){const a=Et.stringify(h(v({},e),{token:this.config.token}),{arrayFormat:"comma"});return`${this.config.baseUrl.endsWith("/")?this.config.baseUrl.slice(0,this.config.baseUrl.length-1):this.config.baseUrl}${t}?${a}`}get(t,e,a){return this.request(h(v({url:this.baseUrl(t,e)},a),{method:"get"}))}post(t,e,a){return this.request(h(v({url:this.baseUrl(t),data:e},a),{method:"post"}))}put(t,e,a){return this.request(h(v({url:this.baseUrl(t),data:e},a),{method:"put"}))}delete(t,e,a){return this.request(h(v({url:this.baseUrl(t),data:e},a),{method:"delete",responseType:"text"}))}async postFormData(t,e,a){typeof FormData=="undefined"&&Reflect.set(U,"FormData",(await Ht(()=>import("./browser.90f36da1.js").then(function(o){return o.b}),[])).default);const i=new FormData;return Object.entries(a).forEach(([o,p])=>{o&&p&&i.append(o,p)}),await this.request({url:this.baseUrl(t),method:e,data:i})}},pe=class{constructor(t){this.ajax=t}async list(t){return await this.ajax.get("/events",t)}async get(t,e){return await this.ajax.get(`/events/${t}`,{fields:e})}},xt=class{constructor(){u(this,"config",new ie);u(this,"ajax",new oe(this.config));u(this,"folderApi",new ut(this.ajax));u(this,"folderExtApi",new ae(this.ajax));u(this,"joplinApi",new Qt(this.ajax));u(this,"noteActionApi",new Yt(this.ajax));u(this,"noteApi",new dt(this.ajax));u(this,"noteExtApi",new ee(this.ajax));u(this,"resourceActionApi",new te(this.ajax));u(this,"resourceApi",new Xt(this.ajax));u(this,"searchApi",new mt(this.ajax));u(this,"tagApi",new Zt(this.ajax));u(this,"eventApi",new pe(this.ajax))}set baseUrl(t){this.config.baseUrl=t}get baseUrl(){return this.config.baseUrl}set token(t){this.config.token=t}get token(){return this.config.token}},Q=new xt;Object.entries(Q).forEach(([t,e])=>{Reflect.set(Q,t,At.bindMethodThis(e))});const d=new xt,vt=nt(localStorage);var tt,et;d.token=(et=(tt=vt.settings)==null?void 0:tt.token)!=null?et:"";var at,it;d.baseUrl=(it=(at=vt.settings)==null?void 0:at.baseUrl)!=null?it:"http://localhost:41184";const l=new zt,ce=()=>{var o;const[t]=F.useForm();async function e(){if(!await t.validateFields())return;const p=t.getFieldsValue();console.log("onFinish: ",p);try{d.token=p.token,d.baseUrl=p.baseUrl,await d.noteApi.list({limit:1}),i(p),k.success(l.t("settings.msg.success"))}catch(c){console.error(c),k.error(l.t("settings.msg.error"))}}const[a,i]=O("settings");return n.exports.createElement(j,null,n.exports.createElement("h2",null,l.t("settings.title")),n.exports.createElement(F,{form:t,onFinish:e,initialValues:{token:a==null?void 0:a.token,baseUrl:(o=a==null?void 0:a.baseUrl)!=null?o:"http://localhost:41184"}},n.exports.createElement(F.Item,{name:"baseUrl",label:l.t("settings.form.baseUrl"),rules:[{required:!0}]},n.exports.createElement(M,{type:"url"})),n.exports.createElement(F.Item,{name:"token",label:l.t("settings.form.token"),rules:[{required:!0}]},n.exports.createElement(M.Password,null)),n.exports.createElement(F.Item,null,n.exports.createElement(g,{type:"primary",htmlType:"submit"},l.t("settings.action.submit")))))};class ft{static warpOnEvent(e){const a={},i=Ft(0).then(()=>new Promise((o,p)=>{try{o(e(a))}catch(c){p(c)}}));return Reflect.set(i,"on",(o,p)=>(a[o]=p,i)),i}}class se{constructor(e){this.config=e}getUnusedResource(){return ft.warpOnEvent(async e=>{const a=await w.pageToAllList(this.config.resourceApi.list.bind(this.config.resourceApi),{fields:["id","title","mime"]});let i=0;return await z.filter(a,ot(async o=>{const p=!await this.checkUsed(o.id);return e.process({title:o.title,all:a.length,rate:i++}),p},10))})}async checkUsed(e){return(await this.config.searchApi.search({query:`"](:/${e})"`})).items.length>0}}const le=new se(d);function re(t){const e=t();return a=>`${e==null?void 0:e.baseUrl}/resources/${a}/file?token=${e==null?void 0:e.token}`}const P=re(()=>nt(localStorage).settings),de=()=>{const[t,e]=n.exports.useState([]),[a,i]=n.exports.useState(""),[o,p]=y(async()=>{try{const m=await le.getUnusedResource().on("process",I=>{i(l.t("unusedResource.msg.process",I))});console.log("list: ",m),e(m)}catch{k.error(l.t("unusedResource.msg.error"))}});async function c(m){e(ct(I=>I.filter(bt=>bt.id!==m))),await d.resourceApi.remove(m)}async function s(m){await St(P(m))}const[r,A]=y(async()=>{await z.forEach(t,async m=>{await d.resourceApi.remove(m.id)}),e([])},[t]);return n.exports.createElement(j,{title:l.t("unusedResource.title"),extra:n.exports.createElement(B,null,n.exports.createElement(g,{onClick:p},l.t("common.action.check")),n.exports.createElement(g,{disabled:t.length===0,danger:!0,loading:r.loading,onClick:A},l.t("unusedResource.action.removeAll")))},n.exports.createElement(x,{dataSource:t,locale:{emptyText:l.t("unusedResource.listEmptyText")},renderItem:m=>n.exports.createElement(x.Item,{key:m.id,actions:[n.exports.createElement(g,{onClick:()=>c(m.id)},l.t("common.action.remove")),n.exports.createElement(g,{onClick:()=>s(m.id)},l.t("common.action.download"))],extra:m.mime.startsWith("image/")&&n.exports.createElement(pt,{src:P(m.id),width:300})},n.exports.createElement(x.Item.Meta,{title:m.title})),loading:{spinning:o.loading,tip:a}}))};function me(){return new Worker("./assets/parseInternalLink.755cbb78.js",{type:"module"})}class ue{constructor(e){u(this,"parseInternalLinkWorker",st(new me));this.config=e}check(){return ft.warpOnEvent(async e=>{e.load("\u5F00\u59CB\u52A0\u8F7D\u6240\u6709\u9644\u4EF6\u8D44\u6E90");const a=new Set((await this.getAllResourceIdList()).map(c=>c.id));e.load("\u5F00\u59CB\u52A0\u8F7D\u6240\u6709\u7B14\u8BB0");const i=await w.pageToAllList(this.config.noteApi.list.bind(this.config.noteApi),{fields:["id","title","body","user_updated_time"]}),o=i.reduce((c,s)=>c.add(s.id),new Set);e.load("\u5F00\u59CB\u89E3\u6790\u6240\u6709\u7B14\u8BB0");let p=0;return(await z.map(i,async c=>{const s=h(v({},c),{resources:await this.parseInternalLinkWorker(c.body)});return p++,e.parse({rate:p,all:i.length,title:c.title||"\u672A\u77E5\u6587\u4EF6\u540D"}),s})).filter(c=>(c.resources=c.resources.filter(s=>!a.has(s.id)&&!o.has(s.id)),c.resources.length!==0)).map(r=>{var A=r,{body:c}=A,s=b(A,["body"]);return s})})}async getAllResourceIdList(){return await w.pageToAllList(this.config.resourceApi.list.bind(this.config.resourceApi),{fields:["id","title","mime"]})}}const xe="_subList_1op68_1";var ve={subList:xe};const fe=new ue(d),ge=()=>{const[t,e]=n.exports.useState([]),[a,i]=n.exports.useState(""),[o,p]=y(async()=>{const s=await fe.check().on("load",r=>i(r)).on("parse",r=>{i(`[${r.rate}/${r.all}] ${r.title}`)});console.log("list: ",s),e(s)});async function c(s){await d.noteActionApi.openAndWatch(s)}return n.exports.createElement(j,{title:l.t("notFoundResource.title"),extra:n.exports.createElement(g,{onClick:p},l.t("common.action.check"))},n.exports.createElement(x,{dataSource:t,locale:{emptyText:l.t("notFoundResource.listEmptyText")},renderItem:s=>n.exports.createElement(x.Item,{key:s.id,actions:[n.exports.createElement(g,{onClick:()=>c(s.id)},l.t("common.action.open"))]},n.exports.createElement(x.Item.Meta,{title:s.title,description:n.exports.createElement(x,{className:ve.subList,dataSource:s.resources,renderItem:r=>n.exports.createElement(x.Item,{key:r.id},n.exports.createElement(x.Item.Meta,{title:r.title||l.t("notFoundResource.unknownFileName",r)}))})})),loading:{spinning:o.loading,tip:a}}))};function he(){return new Worker("./assets/MarkdownLinkUtil.409fecb5.js",{type:"module"})}class D{constructor(){u(this,"markdownLinkUtilWorker",st(new he))}async search(e){const a=await w.pageToAllList(d.searchApi.search.bind(d.searchApi),{query:`body:"${e}"`,fields:["id","title","body","user_updated_time"],order_by:"user_updated_time",order_dir:"DESC"});return await z.map(a,async i=>{const o=await this.markdownLinkUtilWorker.parseLink(i.body);return Reflect.deleteProperty(i,"body"),h(v({},i),{urls:await D.mapContentLinks(o,e)})})}static mapContentLinks(e,a){return z.map(e.filter(i=>i.url.startsWith(a)),async i=>{if(!i.title)return i;const o=(await d.searchApi.search({query:`title:"${i.title}"`,limit:3,fields:["id","title"]})).items;return h(v({},i),{matchNotes:o})})}async convert(e,a){const i=await d.noteApi.get(e,["id","body"]),o=await this.markdownLinkUtilWorker.convertLink(i.body,a);await d.noteApi.update({id:i.id,body:o,user_updated_time:Date.now()})}}const be="_sub1_sym9i_9",we="_sub2_sym9i_15";var gt={sub1:be,sub2:we};class ke{static addMeta(e,a){const i=_t.stringify(a);return`---
`+i+`---

`+e}static trimTitle(e){return(e.startsWith("#")?e.substr(1).trimLeft():e).replace(new RegExp(`[\r
]`),"")}}const X=new D,ye=t=>{const[e,a]=y(t.onConvertNote);return n.exports.createElement(x,{dataSource:t.url.matchNotes,className:gt.sub2,loading:e.loading,renderItem:i=>n.exports.createElement(x.Item,{key:i.id},n.exports.createElement(B,null,n.exports.createElement(L.Text,null,i.title),n.exports.createElement(g,{onClick:()=>a(i)},l.t("convertExternalLink.action.convert"))))})},Y=t=>t.urls.length!==0,je=()=>{const[t,e]=n.exports.useState([]),[a,i]=y(async function(s){if(s===""){e([]);return}const r=await X.search(s);console.log("onSearch: ",r),e(r.filter(Y))});async function o(c){console.log("onConvertNote: ",c),await X.convert(c.noteId,{[c.url]:{title:ke.trimTitle(c.linkNoteTitle),url:`:/${c.linkNoteId}`}}),e(ct(s=>{console.log("remove: ",c.noteIndex,c.urlIndex),s[c.noteIndex].urls.splice(c.urlIndex,1),s.filter(r=>r.urls.length!==0)})),e(s=>s.filter(Y)),k.success(l.t("convertExternalLink.msg.success"))}async function p(c){await d.noteActionApi.openAndWatch(c)}return n.exports.createElement(j,{title:l.t("convertExternalLink.title")},n.exports.createElement(M.Search,{onSearch:i,allowClear:!0,loading:a.loading}),n.exports.createElement(x,{dataSource:t,itemLayout:"vertical",loading:a.loading,renderItem:(c,s)=>n.exports.createElement(x.Item,{key:c.id,extra:[n.exports.createElement(g,{onClick:()=>p(c.id)},l.t("common.action.open"))]},n.exports.createElement(L.Title,{level:4},c.title),n.exports.createElement(x,{dataSource:c.urls,className:gt.sub1,itemLayout:"vertical",renderItem:(r,A)=>n.exports.createElement(x.Item,{key:A},n.exports.createElement(L.Title,{level:5},r.title),n.exports.createElement(L.Link,null,r.url),r.matchNotes&&r.matchNotes.length!==0&&n.exports.createElement(ye,{url:r,onConvertNote:m=>o({noteId:c.id,url:r.url,linkNoteId:m.id,linkNoteTitle:m.title,noteIndex:s,urlIndex:A})}))}))}))};class Ae{async check(){const e=new Set(Lt(await d.folderApi.listAll(),{id:"id",path:"path",children:"children"}).map(i=>i.id));return(await w.pageToAllList(d.noteApi.list.bind(d.noteApi),{fields:["id","title","parent_id"],order_by:"user_updated_time",order_dir:"DESC"})).filter(i=>!e.has(i.parent_id))}}const Ee=new Ae,ze=()=>{const[t,e]=n.exports.useState([]),[a,i]=y(async()=>{const p=await Ee.check();console.log("list: ",p),e(p)});async function o(p){await d.noteApi.remove(p),e(c=>c.filter(s=>s.id!==p))}return n.exports.createElement(j,{title:l.t("checkParentNotebook.title"),extra:n.exports.createElement(g,{loading:a.loading,onClick:i},l.t("common.action.check"))},n.exports.createElement(x,{dataSource:t,locale:{emptyText:l.t("checkParentNotebook.listEmptyText")},renderItem:p=>n.exports.createElement(x.Item,{id:p.id,extra:n.exports.createElement(g,{onClick:()=>o(p.id)},l.t("common.action.remove"))},n.exports.createElement(L.Text,null,p.title))}))},q=[{t:"application/andrew-inset",e:["ez"]},{t:"application/applixware",e:["aw"]},{t:"application/atom+xml",e:["atom"]},{t:"application/atomcat+xml",e:["atomcat"]},{t:"application/atomsvc+xml",e:["atomsvc"]},{t:"application/ccxml+xml",e:["ccxml"]},{t:"application/cdmi-capability",e:["cdmia"]},{t:"application/cdmi-container",e:["cdmic"]},{t:"application/cdmi-domain",e:["cdmid"]},{t:"application/cdmi-object",e:["cdmio"]},{t:"application/cdmi-queue",e:["cdmiq"]},{t:"application/cu-seeme",e:["cu"]},{t:"application/davmount+xml",e:["davmount"]},{t:"application/docbook+xml",e:["dbk"]},{t:"application/dssc+der",e:["dssc"]},{t:"application/dssc+xml",e:["xdssc"]},{t:"application/ecmascript",e:["ecma"]},{t:"application/emma+xml",e:["emma"]},{t:"application/epub+zip",e:["epub"]},{t:"application/exi",e:["exi"]},{t:"application/font-tdpfr",e:["pfr"]},{t:"application/font-woff",e:["woff"]},{t:"application/gml+xml",e:["gml"]},{t:"application/gpx+xml",e:["gpx"]},{t:"application/gxf",e:["gxf"]},{t:"application/hyperstudio",e:["stk"]},{t:"application/inkml+xml",e:["ink","inkml"]},{t:"application/ipfix",e:["ipfix"]},{t:"application/java-archive",e:["jar"]},{t:"application/java-serialized-object",e:["ser"]},{t:"application/java-vm",e:["class"]},{t:"application/javascript",e:["js"]},{t:"application/json",e:["json"]},{t:"application/jsonml+json",e:["jsonml"]},{t:"application/lost+xml",e:["lostxml"]},{t:"application/mac-binhex40",e:["hqx"]},{t:"application/mac-compactpro",e:["cpt"]},{t:"application/mads+xml",e:["mads"]},{t:"application/marc",e:["mrc"]},{t:"application/marcxml+xml",e:["mrcx"]},{t:"application/mathematica",e:["ma","nb","mb"]},{t:"application/mathml+xml",e:["mathml"]},{t:"application/mbox",e:["mbox"]},{t:"application/mediaservercontrol+xml",e:["mscml"]},{t:"application/metalink+xml",e:["metalink"]},{t:"application/metalink4+xml",e:["meta4"]},{t:"application/mets+xml",e:["mets"]},{t:"application/mods+xml",e:["mods"]},{t:"application/mp21",e:["m21","mp21"]},{t:"application/mp4",e:["mp4s"]},{t:"application/msword",e:["doc","dot"]},{t:"application/mxf",e:["mxf"]},{t:"application/octet-stream",e:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy"]},{t:"application/oda",e:["oda"]},{t:"application/oebps-package+xml",e:["opf"]},{t:"application/ogg",e:["ogx"]},{t:"application/omdoc+xml",e:["omdoc"]},{t:"application/onenote",e:["onetoc","onetoc2","onetmp","onepkg"]},{t:"application/oxps",e:["oxps"]},{t:"application/patch-ops-error+xml",e:["xer"]},{t:"application/pdf",e:["pdf"]},{t:"application/pgp-encrypted",e:["pgp"]},{t:"application/pgp-signature",e:["asc","sig"]},{t:"application/pics-rules",e:["prf"]},{t:"application/pkcs10",e:["p10"]},{t:"application/pkcs7-mime",e:["p7m","p7c"]},{t:"application/pkcs7-signature",e:["p7s"]},{t:"application/pkcs8",e:["p8"]},{t:"application/pkix-attr-cert",e:["ac"]},{t:"application/pkix-cert",e:["cer"]},{t:"application/pkix-crl",e:["crl"]},{t:"application/pkix-pkipath",e:["pkipath"]},{t:"application/pkixcmp",e:["pki"]},{t:"application/pls+xml",e:["pls"]},{t:"application/postscript",e:["ai","eps","ps"]},{t:"application/prs.cww",e:["cww"]},{t:"application/pskc+xml",e:["pskcxml"]},{t:"application/rdf+xml",e:["rdf"]},{t:"application/reginfo+xml",e:["rif"]},{t:"application/relax-ng-compact-syntax",e:["rnc"]},{t:"application/resource-lists+xml",e:["rl"]},{t:"application/resource-lists-diff+xml",e:["rld"]},{t:"application/rls-services+xml",e:["rs"]},{t:"application/rpki-ghostbusters",e:["gbr"]},{t:"application/rpki-manifest",e:["mft"]},{t:"application/rpki-roa",e:["roa"]},{t:"application/rsd+xml",e:["rsd"]},{t:"application/rss+xml",e:["rss"]},{t:"application/rtf",e:["rtf"]},{t:"application/sbml+xml",e:["sbml"]},{t:"application/scvp-cv-request",e:["scq"]},{t:"application/scvp-cv-response",e:["scs"]},{t:"application/scvp-vp-request",e:["spq"]},{t:"application/scvp-vp-response",e:["spp"]},{t:"application/sdp",e:["sdp"]},{t:"application/set-payment-initiation",e:["setpay"]},{t:"application/set-registration-initiation",e:["setreg"]},{t:"application/shf+xml",e:["shf"]},{t:"application/smil+xml",e:["smi","smil"]},{t:"application/sparql-query",e:["rq"]},{t:"application/sparql-results+xml",e:["srx"]},{t:"application/srgs",e:["gram"]},{t:"application/srgs+xml",e:["grxml"]},{t:"application/sru+xml",e:["sru"]},{t:"application/ssdl+xml",e:["ssdl"]},{t:"application/ssml+xml",e:["ssml"]},{t:"application/tei+xml",e:["tei","teicorpus"]},{t:"application/thraud+xml",e:["tfi"]},{t:"application/timestamped-data",e:["tsd"]},{t:"application/vnd.3gpp.pic-bw-large",e:["plb"]},{t:"application/vnd.3gpp.pic-bw-small",e:["psb"]},{t:"application/vnd.3gpp.pic-bw-var",e:["pvb"]},{t:"application/vnd.3gpp2.tcap",e:["tcap"]},{t:"application/vnd.3m.post-it-notes",e:["pwn"]},{t:"application/vnd.accpac.simply.aso",e:["aso"]},{t:"application/vnd.accpac.simply.imp",e:["imp"]},{t:"application/vnd.acucobol",e:["acu"]},{t:"application/vnd.acucorp",e:["atc","acutc"]},{t:"application/vnd.adobe.air-application-installer-package+zip",e:["air"]},{t:"application/vnd.adobe.formscentral.fcdt",e:["fcdt"]},{t:"application/vnd.adobe.fxp",e:["fxp","fxpl"]},{t:"application/vnd.adobe.xdp+xml",e:["xdp"]},{t:"application/vnd.adobe.xfdf",e:["xfdf"]},{t:"application/vnd.ahead.space",e:["ahead"]},{t:"application/vnd.airzip.filesecure.azf",e:["azf"]},{t:"application/vnd.airzip.filesecure.azs",e:["azs"]},{t:"application/vnd.amazon.ebook",e:["azw"]},{t:"application/vnd.americandynamics.acc",e:["acc"]},{t:"application/vnd.amiga.ami",e:["ami"]},{t:"application/vnd.android.package-archive",e:["apk"]},{t:"application/vnd.anser-web-certificate-issue-initiation",e:["cii"]},{t:"application/vnd.anser-web-funds-transfer-initiation",e:["fti"]},{t:"application/vnd.antix.game-component",e:["atx"]},{t:"application/vnd.apple.installer+xml",e:["mpkg"]},{t:"application/vnd.apple.mpegurl",e:["m3u8"]},{t:"application/vnd.aristanetworks.swi",e:["swi"]},{t:"application/vnd.astraea-software.iota",e:["iota"]},{t:"application/vnd.audiograph",e:["aep"]},{t:"application/vnd.blueice.multipass",e:["mpm"]},{t:"application/vnd.bmi",e:["bmi"]},{t:"application/vnd.businessobjects",e:["rep"]},{t:"application/vnd.chemdraw+xml",e:["cdxml"]},{t:"application/vnd.chipnuts.karaoke-mmd",e:["mmd"]},{t:"application/vnd.cinderella",e:["cdy"]},{t:"application/vnd.claymore",e:["cla"]},{t:"application/vnd.cloanto.rp9",e:["rp9"]},{t:"application/vnd.clonk.c4group",e:["c4g","c4d","c4f","c4p","c4u"]},{t:"application/vnd.cluetrust.cartomobile-config",e:["c11amc"]},{t:"application/vnd.cluetrust.cartomobile-config-pkg",e:["c11amz"]},{t:"application/vnd.commonspace",e:["csp"]},{t:"application/vnd.contact.cmsg",e:["cdbcmsg"]},{t:"application/vnd.cosmocaller",e:["cmc"]},{t:"application/vnd.crick.clicker",e:["clkx"]},{t:"application/vnd.crick.clicker.keyboard",e:["clkk"]},{t:"application/vnd.crick.clicker.palette",e:["clkp"]},{t:"application/vnd.crick.clicker.template",e:["clkt"]},{t:"application/vnd.crick.clicker.wordbank",e:["clkw"]},{t:"application/vnd.criticaltools.wbs+xml",e:["wbs"]},{t:"application/vnd.ctc-posml",e:["pml"]},{t:"application/vnd.cups-ppd",e:["ppd"]},{t:"application/vnd.curl.car",e:["car"]},{t:"application/vnd.curl.pcurl",e:["pcurl"]},{t:"application/vnd.dart",e:["dart"]},{t:"application/vnd.data-vision.rdz",e:["rdz"]},{t:"application/vnd.dece.data",e:["uvf","uvvf","uvd","uvvd"]},{t:"application/vnd.dece.ttml+xml",e:["uvt","uvvt"]},{t:"application/vnd.dece.unspecified",e:["uvx","uvvx"]},{t:"application/vnd.dece.zip",e:["uvz","uvvz"]},{t:"application/vnd.denovo.fcselayout-link",e:["fe_launch"]},{t:"application/vnd.dna",e:["dna"]},{t:"application/vnd.dolby.mlp",e:["mlp"]},{t:"application/vnd.dpgraph",e:["dpg"]},{t:"application/vnd.dreamfactory",e:["dfac"]},{t:"application/vnd.ds-keypoint",e:["kpxx"]},{t:"application/vnd.dvb.ait",e:["ait"]},{t:"application/vnd.dvb.service",e:["svc"]},{t:"application/vnd.dynageo",e:["geo"]},{t:"application/vnd.ecowin.chart",e:["mag"]},{t:"application/vnd.enliven",e:["nml"]},{t:"application/vnd.epson.esf",e:["esf"]},{t:"application/vnd.epson.msf",e:["msf"]},{t:"application/vnd.epson.quickanime",e:["qam"]},{t:"application/vnd.epson.salt",e:["slt"]},{t:"application/vnd.epson.ssf",e:["ssf"]},{t:"application/vnd.eszigno3+xml",e:["es3","et3"]},{t:"application/vnd.ezpix-album",e:["ez2"]},{t:"application/vnd.ezpix-package",e:["ez3"]},{t:"application/vnd.fdf",e:["fdf"]},{t:"application/vnd.fdsn.mseed",e:["mseed"]},{t:"application/vnd.fdsn.seed",e:["seed","dataless"]},{t:"application/vnd.flographit",e:["gph"]},{t:"application/vnd.fluxtime.clip",e:["ftc"]},{t:"application/vnd.framemaker",e:["fm","frame","maker","book"]},{t:"application/vnd.frogans.fnc",e:["fnc"]},{t:"application/vnd.frogans.ltf",e:["ltf"]},{t:"application/vnd.fsc.weblaunch",e:["fsc"]},{t:"application/vnd.fujitsu.oasys",e:["oas"]},{t:"application/vnd.fujitsu.oasys2",e:["oa2"]},{t:"application/vnd.fujitsu.oasys3",e:["oa3"]},{t:"application/vnd.fujitsu.oasysgp",e:["fg5"]},{t:"application/vnd.fujitsu.oasysprs",e:["bh2"]},{t:"application/vnd.fujixerox.ddd",e:["ddd"]},{t:"application/vnd.fujixerox.docuworks",e:["xdw"]},{t:"application/vnd.fujixerox.docuworks.binder",e:["xbd"]},{t:"application/vnd.fuzzysheet",e:["fzs"]},{t:"application/vnd.genomatix.tuxedo",e:["txd"]},{t:"application/vnd.geogebra.file",e:["ggb"]},{t:"application/vnd.geogebra.tool",e:["ggt"]},{t:"application/vnd.geometry-explorer",e:["gex","gre"]},{t:"application/vnd.geonext",e:["gxt"]},{t:"application/vnd.geoplan",e:["g2w"]},{t:"application/vnd.geospace",e:["g3w"]},{t:"application/vnd.gmx",e:["gmx"]},{t:"application/vnd.google-earth.kml+xml",e:["kml"]},{t:"application/vnd.google-earth.kmz",e:["kmz"]},{t:"application/vnd.grafeq",e:["gqf","gqs"]},{t:"application/vnd.groove-account",e:["gac"]},{t:"application/vnd.groove-help",e:["ghf"]},{t:"application/vnd.groove-identity-message",e:["gim"]},{t:"application/vnd.groove-injector",e:["grv"]},{t:"application/vnd.groove-tool-message",e:["gtm"]},{t:"application/vnd.groove-tool-template",e:["tpl"]},{t:"application/vnd.groove-vcard",e:["vcg"]},{t:"application/vnd.hal+xml",e:["hal"]},{t:"application/vnd.handheld-entertainment+xml",e:["zmm"]},{t:"application/vnd.hbci",e:["hbci"]},{t:"application/vnd.hhe.lesson-player",e:["les"]},{t:"application/vnd.hp-hpgl",e:["hpgl"]},{t:"application/vnd.hp-hpid",e:["hpid"]},{t:"application/vnd.hp-hps",e:["hps"]},{t:"application/vnd.hp-jlyt",e:["jlt"]},{t:"application/vnd.hp-pcl",e:["pcl"]},{t:"application/vnd.hp-pclxl",e:["pclxl"]},{t:"application/vnd.hydrostatix.sof-data",e:["sfd-hdstx"]},{t:"application/vnd.ibm.minipay",e:["mpy"]},{t:"application/vnd.ibm.modcap",e:["afp","listafp","list3820"]},{t:"application/vnd.ibm.rights-management",e:["irm"]},{t:"application/vnd.ibm.secure-container",e:["sc"]},{t:"application/vnd.iccprofile",e:["icc","icm"]},{t:"application/vnd.igloader",e:["igl"]},{t:"application/vnd.immervision-ivp",e:["ivp"]},{t:"application/vnd.immervision-ivu",e:["ivu"]},{t:"application/vnd.insors.igm",e:["igm"]},{t:"application/vnd.intercon.formnet",e:["xpw","xpx"]},{t:"application/vnd.intergeo",e:["i2g"]},{t:"application/vnd.intu.qbo",e:["qbo"]},{t:"application/vnd.intu.qfx",e:["qfx"]},{t:"application/vnd.ipunplugged.rcprofile",e:["rcprofile"]},{t:"application/vnd.irepository.package+xml",e:["irp"]},{t:"application/vnd.is-xpr",e:["xpr"]},{t:"application/vnd.isac.fcs",e:["fcs"]},{t:"application/vnd.jam",e:["jam"]},{t:"application/vnd.jcp.javame.midlet-rms",e:["rms"]},{t:"application/vnd.jisp",e:["jisp"]},{t:"application/vnd.joost.joda-archive",e:["joda"]},{t:"application/vnd.kahootz",e:["ktz","ktr"]},{t:"application/vnd.kde.karbon",e:["karbon"]},{t:"application/vnd.kde.kchart",e:["chrt"]},{t:"application/vnd.kde.kformula",e:["kfo"]},{t:"application/vnd.kde.kivio",e:["flw"]},{t:"application/vnd.kde.kontour",e:["kon"]},{t:"application/vnd.kde.kpresenter",e:["kpr","kpt"]},{t:"application/vnd.kde.kspread",e:["ksp"]},{t:"application/vnd.kde.kword",e:["kwd","kwt"]},{t:"application/vnd.kenameaapp",e:["htke"]},{t:"application/vnd.kidspiration",e:["kia"]},{t:"application/vnd.kinar",e:["kne","knp"]},{t:"application/vnd.koan",e:["skp","skd","skt","skm"]},{t:"application/vnd.kodak-descriptor",e:["sse"]},{t:"application/vnd.las.las+xml",e:["lasxml"]},{t:"application/vnd.llamagraphics.life-balance.desktop",e:["lbd"]},{t:"application/vnd.llamagraphics.life-balance.exchange+xml",e:["lbe"]},{t:"application/vnd.lotus-1-2-3",e:["123"]},{t:"application/vnd.lotus-approach",e:["apr"]},{t:"application/vnd.lotus-freelance",e:["pre"]},{t:"application/vnd.lotus-notes",e:["nsf"]},{t:"application/vnd.lotus-organizer",e:["org"]},{t:"application/vnd.lotus-screencam",e:["scm"]},{t:"application/vnd.lotus-wordpro",e:["lwp"]},{t:"application/vnd.macports.portpkg",e:["portpkg"]},{t:"application/vnd.mcd",e:["mcd"]},{t:"application/vnd.medcalcdata",e:["mc1"]},{t:"application/vnd.mediastation.cdkey",e:["cdkey"]},{t:"application/vnd.mfer",e:["mwf"]},{t:"application/vnd.mfmp",e:["mfm"]},{t:"application/vnd.micrografx.flo",e:["flo"]},{t:"application/vnd.micrografx.igx",e:["igx"]},{t:"application/vnd.mif",e:["mif"]},{t:"application/vnd.mobius.daf",e:["daf"]},{t:"application/vnd.mobius.dis",e:["dis"]},{t:"application/vnd.mobius.mbk",e:["mbk"]},{t:"application/vnd.mobius.mqy",e:["mqy"]},{t:"application/vnd.mobius.msl",e:["msl"]},{t:"application/vnd.mobius.plc",e:["plc"]},{t:"application/vnd.mobius.txf",e:["txf"]},{t:"application/vnd.mophun.application",e:["mpn"]},{t:"application/vnd.mophun.certificate",e:["mpc"]},{t:"application/vnd.mozilla.xul+xml",e:["xul"]},{t:"application/vnd.ms-artgalry",e:["cil"]},{t:"application/vnd.ms-cab-compressed",e:["cab"]},{t:"application/vnd.ms-excel",e:["xls","xlm","xla","xlc","xlt","xlw"]},{t:"application/vnd.ms-excel.addin.macroenabled.12",e:["xlam"]},{t:"application/vnd.ms-excel.sheet.binary.macroenabled.12",e:["xlsb"]},{t:"application/vnd.ms-excel.sheet.macroenabled.12",e:["xlsm"]},{t:"application/vnd.ms-excel.template.macroenabled.12",e:["xltm"]},{t:"application/vnd.ms-fontobject",e:["eot"]},{t:"application/vnd.ms-htmlhelp",e:["chm"]},{t:"application/vnd.ms-ims",e:["ims"]},{t:"application/vnd.ms-lrm",e:["lrm"]},{t:"application/vnd.ms-officetheme",e:["thmx"]},{t:"application/vnd.ms-pki.seccat",e:["cat"]},{t:"application/vnd.ms-pki.stl",e:["stl"]},{t:"application/vnd.ms-powerpoint",e:["ppt","pps","pot"]},{t:"application/vnd.ms-powerpoint.addin.macroenabled.12",e:["ppam"]},{t:"application/vnd.ms-powerpoint.presentation.macroenabled.12",e:["pptm"]},{t:"application/vnd.ms-powerpoint.slide.macroenabled.12",e:["sldm"]},{t:"application/vnd.ms-powerpoint.slideshow.macroenabled.12",e:["ppsm"]},{t:"application/vnd.ms-powerpoint.template.macroenabled.12",e:["potm"]},{t:"application/vnd.ms-project",e:["mpp","mpt"]},{t:"application/vnd.ms-word.document.macroenabled.12",e:["docm"]},{t:"application/vnd.ms-word.template.macroenabled.12",e:["dotm"]},{t:"application/vnd.ms-works",e:["wps","wks","wcm","wdb"]},{t:"application/vnd.ms-wpl",e:["wpl"]},{t:"application/vnd.ms-xpsdocument",e:["xps"]},{t:"application/vnd.mseq",e:["mseq"]},{t:"application/vnd.musician",e:["mus"]},{t:"application/vnd.muvee.style",e:["msty"]},{t:"application/vnd.mynfc",e:["taglet"]},{t:"application/vnd.neurolanguage.nlu",e:["nlu"]},{t:"application/vnd.nitf",e:["ntf","nitf"]},{t:"application/vnd.noblenet-directory",e:["nnd"]},{t:"application/vnd.noblenet-sealer",e:["nns"]},{t:"application/vnd.noblenet-web",e:["nnw"]},{t:"application/vnd.nokia.n-gage.data",e:["ngdat"]},{t:"application/vnd.nokia.n-gage.symbian.install",e:["n-gage"]},{t:"application/vnd.nokia.radio-preset",e:["rpst"]},{t:"application/vnd.nokia.radio-presets",e:["rpss"]},{t:"application/vnd.novadigm.edm",e:["edm"]},{t:"application/vnd.novadigm.edx",e:["edx"]},{t:"application/vnd.novadigm.ext",e:["ext"]},{t:"application/vnd.oasis.opendocument.chart",e:["odc"]},{t:"application/vnd.oasis.opendocument.chart-template",e:["otc"]},{t:"application/vnd.oasis.opendocument.database",e:["odb"]},{t:"application/vnd.oasis.opendocument.formula",e:["odf"]},{t:"application/vnd.oasis.opendocument.formula-template",e:["odft"]},{t:"application/vnd.oasis.opendocument.graphics",e:["odg"]},{t:"application/vnd.oasis.opendocument.graphics-template",e:["otg"]},{t:"application/vnd.oasis.opendocument.image",e:["odi"]},{t:"application/vnd.oasis.opendocument.image-template",e:["oti"]},{t:"application/vnd.oasis.opendocument.presentation",e:["odp"]},{t:"application/vnd.oasis.opendocument.presentation-template",e:["otp"]},{t:"application/vnd.oasis.opendocument.spreadsheet",e:["ods"]},{t:"application/vnd.oasis.opendocument.spreadsheet-template",e:["ots"]},{t:"application/vnd.oasis.opendocument.text",e:["odt"]},{t:"application/vnd.oasis.opendocument.text-master",e:["odm"]},{t:"application/vnd.oasis.opendocument.text-template",e:["ott"]},{t:"application/vnd.oasis.opendocument.text-web",e:["oth"]},{t:"application/vnd.olpc-sugar",e:["xo"]},{t:"application/vnd.oma.dd2+xml",e:["dd2"]},{t:"application/vnd.openofficeorg.extension",e:["oxt"]},{t:"application/vnd.openxmlformats-officedocument.presentationml.presentation",e:["pptx"]},{t:"application/vnd.openxmlformats-officedocument.presentationml.slide",e:["sldx"]},{t:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",e:["ppsx"]},{t:"application/vnd.openxmlformats-officedocument.presentationml.template",e:["potx"]},{t:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",e:["xlsx"]},{t:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",e:["xltx"]},{t:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",e:["docx"]},{t:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",e:["dotx"]},{t:"application/vnd.osgeo.mapguide.package",e:["mgp"]},{t:"application/vnd.osgi.dp",e:["dp"]},{t:"application/vnd.osgi.subsystem",e:["esa"]},{t:"application/vnd.palm",e:["pdb","pqa","oprc"]},{t:"application/vnd.pawaafile",e:["paw"]},{t:"application/vnd.pg.format",e:["str"]},{t:"application/vnd.pg.osasli",e:["ei6"]},{t:"application/vnd.picsel",e:["efif"]},{t:"application/vnd.pmi.widget",e:["wg"]},{t:"application/vnd.pocketlearn",e:["plf"]},{t:"application/vnd.powerbuilder6",e:["pbd"]},{t:"application/vnd.previewsystems.box",e:["box"]},{t:"application/vnd.proteus.magazine",e:["mgz"]},{t:"application/vnd.publishare-delta-tree",e:["qps"]},{t:"application/vnd.pvi.ptid1",e:["ptid"]},{t:"application/vnd.quark.quarkxpress",e:["qxd","qxt","qwd","qwt","qxl","qxb"]},{t:"application/vnd.realvnc.bed",e:["bed"]},{t:"application/vnd.recordare.musicxml",e:["mxl"]},{t:"application/vnd.recordare.musicxml+xml",e:["musicxml"]},{t:"application/vnd.rig.cryptonote",e:["cryptonote"]},{t:"application/vnd.rim.cod",e:["cod"]},{t:"application/vnd.rn-realmedia",e:["rm"]},{t:"application/vnd.rn-realmedia-vbr",e:["rmvb"]},{t:"application/vnd.route66.link66+xml",e:["link66"]},{t:"application/vnd.sailingtracker.track",e:["st"]},{t:"application/vnd.seemail",e:["see"]},{t:"application/vnd.sema",e:["sema"]},{t:"application/vnd.semd",e:["semd"]},{t:"application/vnd.semf",e:["semf"]},{t:"application/vnd.shana.informed.formdata",e:["ifm"]},{t:"application/vnd.shana.informed.formtemplate",e:["itp"]},{t:"application/vnd.shana.informed.interchange",e:["iif"]},{t:"application/vnd.shana.informed.package",e:["ipk"]},{t:"application/vnd.simtech-mindmapper",e:["twd","twds"]},{t:"application/vnd.smaf",e:["mmf"]},{t:"application/vnd.smart.teacher",e:["teacher"]},{t:"application/vnd.solent.sdkm+xml",e:["sdkm","sdkd"]},{t:"application/vnd.spotfire.dxp",e:["dxp"]},{t:"application/vnd.spotfire.sfs",e:["sfs"]},{t:"application/vnd.stardivision.calc",e:["sdc"]},{t:"application/vnd.stardivision.draw",e:["sda"]},{t:"application/vnd.stardivision.impress",e:["sdd"]},{t:"application/vnd.stardivision.math",e:["smf"]},{t:"application/vnd.stardivision.writer",e:["sdw","vor"]},{t:"application/vnd.stardivision.writer-global",e:["sgl"]},{t:"application/vnd.stepmania.package",e:["smzip"]},{t:"application/vnd.stepmania.stepchart",e:["sm"]},{t:"application/vnd.sun.xml.calc",e:["sxc"]},{t:"application/vnd.sun.xml.calc.template",e:["stc"]},{t:"application/vnd.sun.xml.draw",e:["sxd"]},{t:"application/vnd.sun.xml.draw.template",e:["std"]},{t:"application/vnd.sun.xml.impress",e:["sxi"]},{t:"application/vnd.sun.xml.impress.template",e:["sti"]},{t:"application/vnd.sun.xml.math",e:["sxm"]},{t:"application/vnd.sun.xml.writer",e:["sxw"]},{t:"application/vnd.sun.xml.writer.global",e:["sxg"]},{t:"application/vnd.sun.xml.writer.template",e:["stw"]},{t:"application/vnd.sus-calendar",e:["sus","susp"]},{t:"application/vnd.svd",e:["svd"]},{t:"application/vnd.symbian.install",e:["sis","sisx"]},{t:"application/vnd.syncml+xml",e:["xsm"]},{t:"application/vnd.syncml.dm+wbxml",e:["bdm"]},{t:"application/vnd.syncml.dm+xml",e:["xdm"]},{t:"application/vnd.tao.intent-module-archive",e:["tao"]},{t:"application/vnd.tcpdump.pcap",e:["pcap","cap","dmp"]},{t:"application/vnd.tmobile-livetv",e:["tmo"]},{t:"application/vnd.trid.tpt",e:["tpt"]},{t:"application/vnd.triscape.mxs",e:["mxs"]},{t:"application/vnd.trueapp",e:["tra"]},{t:"application/vnd.ufdl",e:["ufd","ufdl"]},{t:"application/vnd.uiq.theme",e:["utz"]},{t:"application/vnd.umajin",e:["umj"]},{t:"application/vnd.unity",e:["unityweb"]},{t:"application/vnd.uoml+xml",e:["uoml"]},{t:"application/vnd.vcx",e:["vcx"]},{t:"application/vnd.visio",e:["vsd","vst","vss","vsw"]},{t:"application/vnd.visionary",e:["vis"]},{t:"application/vnd.vsf",e:["vsf"]},{t:"application/vnd.wap.wbxml",e:["wbxml"]},{t:"application/vnd.wap.wmlc",e:["wmlc"]},{t:"application/vnd.wap.wmlscriptc",e:["wmlsc"]},{t:"application/vnd.webturbo",e:["wtb"]},{t:"application/vnd.wolfram.player",e:["nbp"]},{t:"application/vnd.wordperfect",e:["wpd"]},{t:"application/vnd.wqd",e:["wqd"]},{t:"application/vnd.wt.stf",e:["stf"]},{t:"application/vnd.xara",e:["xar"]},{t:"application/vnd.xfdl",e:["xfdl"]},{t:"application/vnd.yamaha.hv-dic",e:["hvd"]},{t:"application/vnd.yamaha.hv-script",e:["hvs"]},{t:"application/vnd.yamaha.hv-voice",e:["hvp"]},{t:"application/vnd.yamaha.openscoreformat",e:["osf"]},{t:"application/vnd.yamaha.openscoreformat.osfpvg+xml",e:["osfpvg"]},{t:"application/vnd.yamaha.smaf-audio",e:["saf"]},{t:"application/vnd.yamaha.smaf-phrase",e:["spf"]},{t:"application/vnd.yellowriver-custom-menu",e:["cmp"]},{t:"application/vnd.zul",e:["zir","zirz"]},{t:"application/vnd.zzazz.deck+xml",e:["zaz"]},{t:"application/voicexml+xml",e:["vxml"]},{t:"application/widget",e:["wgt"]},{t:"application/winhlp",e:["hlp"]},{t:"application/wsdl+xml",e:["wsdl"]},{t:"application/wspolicy+xml",e:["wspolicy"]},{t:"application/x-7z-compressed",e:["7z"]},{t:"application/x-abiword",e:["abw"]},{t:"application/x-ace-compressed",e:["ace"]},{t:"application/x-apple-diskimage",e:["dmg"]},{t:"application/x-authorware-bin",e:["aab","x32","u32","vox"]},{t:"application/x-authorware-map",e:["aam"]},{t:"application/x-authorware-seg",e:["aas"]},{t:"application/x-bcpio",e:["bcpio"]},{t:"application/x-bittorrent",e:["torrent"]},{t:"application/x-blorb",e:["blb","blorb"]},{t:"application/x-bzip",e:["bz"]},{t:"application/x-bzip2",e:["bz2","boz"]},{t:"application/x-cbr",e:["cbr","cba","cbt","cbz","cb7"]},{t:"application/x-cdlink",e:["vcd"]},{t:"application/x-cfs-compressed",e:["cfs"]},{t:"application/x-chat",e:["chat"]},{t:"application/x-chess-pgn",e:["pgn"]},{t:"application/x-conference",e:["nsc"]},{t:"application/x-cpio",e:["cpio"]},{t:"application/x-csh",e:["csh"]},{t:"application/x-debian-package",e:["deb","udeb"]},{t:"application/x-dgc-compressed",e:["dgc"]},{t:"application/x-director",e:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},{t:"application/x-doom",e:["wad"]},{t:"application/x-dtbncx+xml",e:["ncx"]},{t:"application/x-dtbook+xml",e:["dtb"]},{t:"application/x-dtbresource+xml",e:["res"]},{t:"application/x-dvi",e:["dvi"]},{t:"application/x-envoy",e:["evy"]},{t:"application/x-eva",e:["eva"]},{t:"application/x-font-bdf",e:["bdf"]},{t:"application/x-font-ghostscript",e:["gsf"]},{t:"application/x-font-linux-psf",e:["psf"]},{t:"application/x-font-otf",e:["otf"]},{t:"application/x-font-pcf",e:["pcf"]},{t:"application/x-font-snf",e:["snf"]},{t:"application/x-font-ttf",e:["ttf","ttc"]},{t:"application/x-font-type1",e:["pfa","pfb","pfm","afm"]},{t:"application/x-freearc",e:["arc"]},{t:"application/x-futuresplash",e:["spl"]},{t:"application/x-gca-compressed",e:["gca"]},{t:"application/x-glulx",e:["ulx"]},{t:"application/x-gnumeric",e:["gnumeric"]},{t:"application/x-gramps-xml",e:["gramps"]},{t:"application/x-gtar",e:["gtar"]},{t:"application/x-hdf",e:["hdf"]},{t:"application/x-install-instructions",e:["install"]},{t:"application/x-iso9660-image",e:["iso"]},{t:"application/x-java-jnlp-file",e:["jnlp"]},{t:"application/x-latex",e:["latex"]},{t:"application/x-lzh-compressed",e:["lzh","lha"]},{t:"application/x-mie",e:["mie"]},{t:"application/x-mobipocket-ebook",e:["prc","mobi"]},{t:"application/x-ms-application",e:["application"]},{t:"application/x-ms-shortcut",e:["lnk"]},{t:"application/x-ms-wmd",e:["wmd"]},{t:"application/x-ms-wmz",e:["wmz"]},{t:"application/x-ms-xbap",e:["xbap"]},{t:"application/x-msaccess",e:["mdb"]},{t:"application/x-msbinder",e:["obd"]},{t:"application/x-mscardfile",e:["crd"]},{t:"application/x-msclip",e:["clp"]},{t:"application/x-msdownload",e:["exe","dll","com","bat","msi"]},{t:"application/x-msmediaview",e:["mvb","m13","m14"]},{t:"application/x-msmetafile",e:["wmf","wmz","emf","emz"]},{t:"application/x-msmoney",e:["mny"]},{t:"application/x-mspublisher",e:["pub"]},{t:"application/x-msschedule",e:["scd"]},{t:"application/x-msterminal",e:["trm"]},{t:"application/x-mswrite",e:["wri"]},{t:"application/x-netcdf",e:["nc","cdf"]},{t:"application/x-nzb",e:["nzb"]},{t:"application/x-pkcs12",e:["p12","pfx"]},{t:"application/x-pkcs7-certificates",e:["p7b","spc"]},{t:"application/x-pkcs7-certreqresp",e:["p7r"]},{t:"application/x-rar-compressed",e:["rar"]},{t:"application/x-research-info-systems",e:["ris"]},{t:"application/x-sh",e:["sh"]},{t:"application/x-shar",e:["shar"]},{t:"application/x-shockwave-flash",e:["swf"]},{t:"application/x-silverlight-app",e:["xap"]},{t:"application/x-sql",e:["sql"]},{t:"application/x-stuffit",e:["sit"]},{t:"application/x-stuffitx",e:["sitx"]},{t:"application/x-subrip",e:["srt"]},{t:"application/x-sv4cpio",e:["sv4cpio"]},{t:"application/x-sv4crc",e:["sv4crc"]},{t:"application/x-t3vm-image",e:["t3"]},{t:"application/x-tads",e:["gam"]},{t:"application/x-tar",e:["tar"]},{t:"application/x-tcl",e:["tcl"]},{t:"application/x-tex",e:["tex"]},{t:"application/x-tex-tfm",e:["tfm"]},{t:"application/x-texinfo",e:["texinfo","texi"]},{t:"application/x-tgif",e:["obj"]},{t:"application/x-ustar",e:["ustar"]},{t:"application/x-wais-source",e:["src"]},{t:"application/x-x509-ca-cert",e:["der","crt"]},{t:"application/x-xfig",e:["fig"]},{t:"application/x-xliff+xml",e:["xlf"]},{t:"application/x-xpinstall",e:["xpi"]},{t:"application/x-xz",e:["xz"]},{t:"application/x-zmachine",e:["z1","z2","z3","z4","z5","z6","z7","z8"]},{t:"application/xaml+xml",e:["xaml"]},{t:"application/xcap-diff+xml",e:["xdf"]},{t:"application/xenc+xml",e:["xenc"]},{t:"application/xhtml+xml",e:["xhtml","xht"]},{t:"application/xml",e:["xml","xsl"]},{t:"application/xml-dtd",e:["dtd"]},{t:"application/xop+xml",e:["xop"]},{t:"application/xproc+xml",e:["xpl"]},{t:"application/xslt+xml",e:["xslt"]},{t:"application/xspf+xml",e:["xspf"]},{t:"application/xv+xml",e:["mxml","xhvml","xvml","xvm"]},{t:"application/yang",e:["yang"]},{t:"application/yin+xml",e:["yin"]},{t:"application/zip",e:["zip"]},{t:"audio/adpcm",e:["adp"]},{t:"audio/basic",e:["au","snd"]},{t:"audio/midi",e:["mid","midi","kar","rmi"]},{t:"audio/mp4",e:["m4a","mp4a"]},{t:"audio/mpeg",e:["mpga","mp2","mp2a","mp3","m2a","m3a"]},{t:"audio/ogg",e:["oga","ogg","spx"]},{t:"audio/s3m",e:["s3m"]},{t:"audio/silk",e:["sil"]},{t:"audio/vnd.dece.audio",e:["uva","uvva"]},{t:"audio/vnd.digital-winds",e:["eol"]},{t:"audio/vnd.dra",e:["dra"]},{t:"audio/vnd.dts",e:["dts"]},{t:"audio/vnd.dts.hd",e:["dtshd"]},{t:"audio/vnd.lucent.voice",e:["lvp"]},{t:"audio/vnd.ms-playready.media.pya",e:["pya"]},{t:"audio/vnd.nuera.ecelp4800",e:["ecelp4800"]},{t:"audio/vnd.nuera.ecelp7470",e:["ecelp7470"]},{t:"audio/vnd.nuera.ecelp9600",e:["ecelp9600"]},{t:"audio/vnd.rip",e:["rip"]},{t:"audio/webm",e:["weba"]},{t:"audio/x-aac",e:["aac"]},{t:"audio/x-aiff",e:["aif","aiff","aifc"]},{t:"audio/x-caf",e:["caf"]},{t:"audio/x-flac",e:["flac"]},{t:"audio/x-matroska",e:["mka"]},{t:"audio/x-mpegurl",e:["m3u"]},{t:"audio/x-ms-wax",e:["wax"]},{t:"audio/x-ms-wma",e:["wma"]},{t:"audio/x-pn-realaudio",e:["ram","ra"]},{t:"audio/x-pn-realaudio-plugin",e:["rmp"]},{t:"audio/x-wav",e:["wav"]},{t:"audio/wav",e:["wav"]},{t:"audio/wave",e:["wav"]},{t:"audio/xm",e:["xm"]},{t:"chemical/x-cdx",e:["cdx"]},{t:"chemical/x-cif",e:["cif"]},{t:"chemical/x-cmdf",e:["cmdf"]},{t:"chemical/x-cml",e:["cml"]},{t:"chemical/x-csml",e:["csml"]},{t:"chemical/x-xyz",e:["xyz"]},{t:"image/bmp",e:["bmp"]},{t:"image/cgm",e:["cgm"]},{t:"image/g3fax",e:["g3"]},{t:"image/gif",e:["gif"]},{t:"image/ief",e:["ief"]},{t:"image/jpeg",e:["jpeg","jpg","jpe"]},{t:"image/jpg",e:["jpeg","jpg","jpe"]},{t:"image/ktx",e:["ktx"]},{t:"image/png",e:["png"]},{t:"image/prs.btif",e:["btif"]},{t:"image/sgi",e:["sgi"]},{t:"image/svg+xml",e:["svg","svgz"]},{t:"image/tiff",e:["tiff","tif"]},{t:"image/vnd.adobe.photoshop",e:["psd"]},{t:"image/vnd.dece.graphic",e:["uvi","uvvi","uvg","uvvg"]},{t:"image/vnd.djvu",e:["djvu","djv"]},{t:"image/vnd.dvb.subtitle",e:["sub"]},{t:"image/vnd.dwg",e:["dwg"]},{t:"image/vnd.dxf",e:["dxf"]},{t:"image/vnd.fastbidsheet",e:["fbs"]},{t:"image/vnd.fpx",e:["fpx"]},{t:"image/vnd.fst",e:["fst"]},{t:"image/vnd.fujixerox.edmics-mmr",e:["mmr"]},{t:"image/vnd.fujixerox.edmics-rlc",e:["rlc"]},{t:"image/vnd.ms-modi",e:["mdi"]},{t:"image/vnd.ms-photo",e:["wdp"]},{t:"image/vnd.net-fpx",e:["npx"]},{t:"image/vnd.wap.wbmp",e:["wbmp"]},{t:"image/vnd.xiff",e:["xif"]},{t:"image/webp",e:["webp"]},{t:"image/x-3ds",e:["3ds"]},{t:"image/x-cmu-raster",e:["ras"]},{t:"image/x-cmx",e:["cmx"]},{t:"image/x-freehand",e:["fh","fhc","fh4","fh5","fh7"]},{t:"image/x-icon",e:["ico"]},{t:"image/x-mrsid-image",e:["sid"]},{t:"image/x-pcx",e:["pcx"]},{t:"image/x-pict",e:["pic","pct"]},{t:"image/x-portable-anymap",e:["pnm"]},{t:"image/x-portable-bitmap",e:["pbm"]},{t:"image/x-portable-graymap",e:["pgm"]},{t:"image/x-portable-pixmap",e:["ppm"]},{t:"image/x-rgb",e:["rgb"]},{t:"image/x-tga",e:["tga"]},{t:"image/x-xbitmap",e:["xbm"]},{t:"image/x-xpixmap",e:["xpm"]},{t:"image/x-xwindowdump",e:["xwd"]},{t:"message/rfc822",e:["eml","mime"]},{t:"model/iges",e:["igs","iges"]},{t:"model/mesh",e:["msh","mesh","silo"]},{t:"model/vnd.collada+xml",e:["dae"]},{t:"model/vnd.dwf",e:["dwf"]},{t:"model/vnd.gdl",e:["gdl"]},{t:"model/vnd.gtw",e:["gtw"]},{t:"model/vnd.mts",e:["mts"]},{t:"model/vnd.vtu",e:["vtu"]},{t:"model/vrml",e:["wrl","vrml"]},{t:"model/x3d+binary",e:["x3db","x3dbz"]},{t:"model/x3d+vrml",e:["x3dv","x3dvz"]},{t:"model/x3d+xml",e:["x3d","x3dz"]},{t:"text/cache-manifest",e:["appcache"]},{t:"text/calendar",e:["ics","ifb"]},{t:"text/css",e:["css"]},{t:"text/csv",e:["csv"]},{t:"text/html",e:["html","htm"]},{t:"text/n3",e:["n3"]},{t:"text/plain",e:["txt","text","conf","def","list","log","in"]},{t:"text/prs.lines.tag",e:["dsc"]},{t:"text/richtext",e:["rtx"]},{t:"text/sgml",e:["sgml","sgm"]},{t:"text/tab-separated-values",e:["tsv"]},{t:"text/troff",e:["t","tr","roff","man","me","ms"]},{t:"text/turtle",e:["ttl"]},{t:"text/uri-list",e:["uri","uris","urls"]},{t:"text/vcard",e:["vcard"]},{t:"text/vnd.curl",e:["curl"]},{t:"text/vnd.curl.dcurl",e:["dcurl"]},{t:"text/vnd.curl.mcurl",e:["mcurl"]},{t:"text/vnd.curl.scurl",e:["scurl"]},{t:"text/vnd.dvb.subtitle",e:["sub"]},{t:"text/vnd.fly",e:["fly"]},{t:"text/vnd.fmi.flexstor",e:["flx"]},{t:"text/vnd.graphviz",e:["gv"]},{t:"text/vnd.in3d.3dml",e:["3dml"]},{t:"text/vnd.in3d.spot",e:["spot"]},{t:"text/vnd.sun.j2me.app-descriptor",e:["jad"]},{t:"text/vnd.wap.wml",e:["wml"]},{t:"text/vnd.wap.wmlscript",e:["wmls"]},{t:"text/x-asm",e:["s","asm"]},{t:"text/x-c",e:["c","cc","cxx","cpp","h","hh","dic"]},{t:"text/x-fortran",e:["f","for","f77","f90"]},{t:"text/x-java-source",e:["java"]},{t:"text/x-nfo",e:["nfo"]},{t:"text/x-opml",e:["opml"]},{t:"text/x-pascal",e:["p","pas"]},{t:"text/x-setext",e:["etx"]},{t:"text/x-sfv",e:["sfv"]},{t:"text/x-uuencode",e:["uu"]},{t:"text/x-vcalendar",e:["vcs"]},{t:"text/x-vcard",e:["vcf"]},{t:"video/3gpp",e:["3gp"]},{t:"video/3gpp2",e:["3g2"]},{t:"video/h261",e:["h261"]},{t:"video/h263",e:["h263"]},{t:"video/h264",e:["h264"]},{t:"video/jpeg",e:["jpgv"]},{t:"video/jpm",e:["jpm","jpgm"]},{t:"video/mj2",e:["mj2","mjp2"]},{t:"video/mp4",e:["mp4","mp4v","mpg4"]},{t:"video/mpeg",e:["mpeg","mpg","mpe","m1v","m2v"]},{t:"video/ogg",e:["ogv"]},{t:"video/quicktime",e:["qt","mov"]},{t:"video/vnd.dece.hd",e:["uvh","uvvh"]},{t:"video/vnd.dece.mobile",e:["uvm","uvvm"]},{t:"video/vnd.dece.pd",e:["uvp","uvvp"]},{t:"video/vnd.dece.sd",e:["uvs","uvvs"]},{t:"video/vnd.dece.video",e:["uvv","uvvv"]},{t:"video/vnd.dvb.file",e:["dvb"]},{t:"video/vnd.fvt",e:["fvt"]},{t:"video/vnd.mpegurl",e:["mxu","m4u"]},{t:"video/vnd.ms-playready.media.pyv",e:["pyv"]},{t:"video/vnd.uvvu.mp4",e:["uvu","uvvu"]},{t:"video/vnd.vivo",e:["viv"]},{t:"video/webm",e:["webm"]},{t:"video/x-f4v",e:["f4v"]},{t:"video/x-fli",e:["fli"]},{t:"video/x-flv",e:["flv"]},{t:"video/x-m4v",e:["m4v"]},{t:"video/x-matroska",e:["mkv","mk3d","mks"]},{t:"video/x-mng",e:["mng"]},{t:"video/x-ms-asf",e:["asf","asx"]},{t:"video/x-ms-vob",e:["vob"]},{t:"video/x-ms-wm",e:["wm"]},{t:"video/x-ms-wmv",e:["wmv"]},{t:"video/x-ms-wmx",e:["wmx"]},{t:"video/x-ms-wvx",e:["wvx"]},{t:"video/x-msvideo",e:["avi"]},{t:"video/x-sgi-movie",e:["movie"]},{t:"video/x-smv",e:["smv"]},{t:"x-conference/x-cooltalk",e:["ice"]},{t:"text/markdown",e:["md","markdown"]}];class V{static fromFileExtension(e){e=e.toLowerCase();for(let a=0;a<q.length;a++){const i=q[a];if(i.e.indexOf(e)>=0)return i.t}return null}static fromFilename(e){if(!e)return null;const a=e.trim().split(".");return a.length<=1?null:V.fromFileExtension(a[a.length-1])}static toFileExtension(e){e=e.toLowerCase();for(let a=0;a<q.length;a++){const i=q[a];if(e==i.t){for(let o=0;o<i.e.length;o++)if(i.e[o].length==3)return i.e[o];return i.e[0]}}return null}static fromDataUrl(e){const a="text/plain";let o=e.substr(0,e.indexOf(",")).split(";")[0];const p=o.split(":");return p.length<=1?a:(o=p[1],o.indexOf("/")>=0?o:a)}}const Fe=()=>{const[t,e]=n.exports.useState([]),[a,i]=y(async()=>{e((await w.pageToAllList(d.resourceApi.list.bind(d.resourceApi),{fields:["id","title","file_extension","mime"]})).filter(p=>!p.file_extension).map(p=>h(v({},p),{file_extension:V.toFileExtension(p.mime)})))});async function o(){const p=k.loading(l.t("fixFileExtension.action.progress"));try{await z.forEach(t,ot(async c=>{await d.resourceApi.update({id:c.id,file_extension:c.file_extension})},10)),e([]),k.success(l.t("fixFileExtension.action.complete"))}finally{p()}}return n.exports.createElement(j,{title:l.t("fixFileExtension.title"),extra:n.exports.createElement(B,null,n.exports.createElement(g,{onClick:i},l.t("common.action.check")),n.exports.createElement(g,{disabled:t.length===0,onClick:o},l.t("fixFileExtension.action.fix")))},n.exports.createElement(x,{dataSource:t!=null?t:[],renderItem:p=>n.exports.createElement(x.Item,{key:p.id,extra:p.mime.startsWith("image/")&&n.exports.createElement(pt,{src:P(p.id),width:300})},n.exports.createElement(x.Item.Meta,{title:p.title,description:`${l.t("fixFileExtension.tip")}${p.file_extension}`})),loading:{spinning:a.loading}}))},Se=()=>{async function t(){const e=await d.noteApi.list({limit:1});if(e.items.length===0){k.error("\u6CA1\u6709\u627E\u5230\u4EFB\u4F55\u7B14\u8BB0");return}const a=e.items[0];d.noteActionApi.openAndWatch(a.id),k.success("\u6253\u5F00\u7B14\u8BB0 "+a.title)}return n.exports.createElement(j,{title:l.t("checkActionApi.title"),extra:n.exports.createElement(g,{onClick:t},l.t("common.action.open"))},l.t("checkActionApi.desc"))},_e=Rt(),ht=[{path:"/",component:Dt,title:"home.title"},{path:"/settings",component:ce,title:"settings.title"},{path:"/unusedResource",component:de,title:"unusedResource.title"},{path:"/notFoundResource",component:ge,title:"notFoundResource.title"},{path:"/convertExternalLink",component:je,title:"convertExternalLink.title"},{path:"/checkParentNotebook",component:ze,title:"checkParentNotebook.title"},{path:"/fixFileExtension",component:Fe,title:"fixFileExtension.title"},{path:"/checkActionApi",component:Se,title:"checkActionApi.title"}],Le="_app_18eob_1",Re="_logo_18eob_9",Ne="_sider_18eob_21",Ce="_main_18eob_23",qe="_header_18eob_41";var _={app:Le,logo:Re,sider:Ne,main:Ce,header:qe},Ie={"common.action.check":"Check","common.action.open":"Open","common.action.remove":"Remove","common.action.download":"Download","home.title":"Home","settings.title":"Security Settings","settings.form.token":"Authorization token","settings.form.baseUrl":"The base path of the joplin web service","settings.action.submit":"Submit","settings.msg.success":"Setup was successful","settings.msg.error":"Unable to access joplin web clipper api","unusedResource.title":"Check for unused resources","unusedResource.listEmptyText":"No unused attachment resources were found","unusedResource.action.removeAll":"Delete all","unusedResource.msg.process":"[{{rate}}/{{all}}] is checking for resources {{title}}","unusedResource.msg.error":"Please check joplin token/port configuration","notFoundResource.title":"Check notes for references to a failed resource","notFoundResource.listEmptyText":"No reference to a failed resource was found","notFoundResource.unknownFileName":"Unknown file name {{id}}","convertExternalLink.title":"Convert External Link to Internal Reference Notes","convertExternalLink.action.convert":"Convert","convertExternalLink.msg.success":"Conversion complete","checkParentNotebook.title":"Check notes without parent directory","checkParentNotebook.listEmptyText":"No abnormal notes found in the parent directory","fixFileExtension.title":"Fix missing resource file extension field","fixFileExtension.action.progress":"Fixing in progress...","fixFileExtension.action.complete":"Fixing completed","fixFileExtension.action.fix":"Fixing","fixFileExtension.tip":"Guess the extension: ","checkActionApi.title":"Check to open notes via API","checkActionApi.desc":"Will randomly open a note in the editor"},We={"common.action.check":"\u68C0\u67E5","common.action.open":"\u6253\u5F00","common.action.remove":"\u5220\u9664","common.action.download":"\u4E0B\u8F7D","home.title":"\u9996\u9875","settings.title":"\u5B89\u5168\u8BBE\u7F6E","settings.form.token":"\u6388\u6743\u4EE4\u724C","settings.form.baseUrl":"joplin web \u670D\u52A1\u7684\u57FA\u672C\u8DEF\u5F84","settings.action.submit":"\u63D0\u4EA4","settings.msg.success":"\u8BBE\u7F6E\u6210\u529F","settings.msg.error":"\u65E0\u6CD5\u8BBF\u95EE joplin web clipper api","unusedResource.title":"\u68C0\u67E5\u672A\u4F7F\u7528\u7684\u8D44\u6E90","unusedResource.listEmptyText":"\u6CA1\u6709\u627E\u5230\u4EFB\u4F55\u672A\u4F7F\u7528\u7684\u9644\u4EF6\u8D44\u6E90","unusedResource.action.removeAll":"\u5220\u9664\u5168\u90E8","unusedResource.msg.process":"[{{rate}}/{{all}}] \u6B63\u5728\u68C0\u67E5\u8D44\u6E90 {{title}}","unusedResource.msg.error":"\u8BF7\u68C0\u67E5 joplin token/port \u914D\u7F6E","notFoundResource.title":"\u68C0\u67E5\u7B14\u8BB0\u4E2D\u5F15\u7528\u5931\u6548\u7684\u8D44\u6E90","notFoundResource.listEmptyText":"\u6CA1\u6709\u627E\u5230\u4EFB\u4F55\u5F15\u7528\u5931\u6548\u7684\u8D44\u6E90","notFoundResource.unknownFileName":"\u672A\u77E5\u6587\u4EF6\u540D {{id}}","convertExternalLink.title":"\u8F6C\u6362\u5916\u90E8\u94FE\u63A5\u4E3A\u5185\u90E8\u5F15\u7528\u7B14\u8BB0","convertExternalLink.action.convert":"\u8F6C\u6362","convertExternalLink.msg.success":"\u8F6C\u6362\u5B8C\u6210","checkParentNotebook.title":"\u68C0\u67E5\u6CA1\u6709\u7236\u7EA7\u76EE\u5F55\u7684\u7B14\u8BB0","checkParentNotebook.listEmptyText":"\u6CA1\u6709\u68C0\u67E5\u5230\u7236\u76EE\u5F55\u5F02\u5E38\u7684\u7B14\u8BB0","fixFileExtension.title":"\u4FEE\u590D\u8D44\u6E90\u6587\u4EF6\u6269\u5C55\u540D\u5B57\u6BB5\u7F3A\u5931","fixFileExtension.action.progress":"\u6B63\u5728\u4FEE\u590D\u4E2D...","fixFileExtension.action.complete":"\u4FEE\u590D\u5B8C\u6210","fixFileExtension.action.fix":"\u4FEE\u590D","fixFileExtension.tip":"\u731C\u6D4B\u6269\u5C55\u540D: ","checkActionApi.title":"\u68C0\u67E5\u901A\u8FC7 API \u6253\u5F00\u7B14\u8BB0","checkActionApi.desc":"\u5C06\u968F\u673A\u5728\u7F16\u8F91\u5668\u4E2D\u6253\u5F00\u4E00\u4E2A\u7B14\u8BB0"};const $e=()=>{const[t,e]=O("language",lt()),[{value:a},i]=y(async s=>(console.log("language: ",s),await l.init({en:Ie,zhCN:We},s),ht.map(r=>h(v({},r),{title:l.t(r.title)}))),[]);Nt(()=>i(t));const[o,{inc:p}]=Ct(0);async function c(s){e(s),await i(s),p()}return n.exports.createElement(S,{className:_.app},n.exports.createElement(S.Sider,{className:_.sider,width:"max-content"},n.exports.createElement("h2",{className:_.logo},"Joplin Batch"),n.exports.createElement(G,null,a&&a.map(s=>n.exports.createElement(G.Item,{key:s.path},n.exports.createElement(qt,{to:s.path},s.title))))),n.exports.createElement(S,null,n.exports.createElement(S.Header,{className:_.header},n.exports.createElement(It,{options:[{label:"English",value:N.En},{label:"\u4E2D\u6587",value:N.ZhCN}],value:t,onChange:c})),n.exports.createElement(S.Content,{className:_.main},a&&n.exports.createElement(Wt,{key:o}))))};$t.render($.createElement($.StrictMode,null,$.createElement(Ut,{history:_e,routes:[{path:"/",component:$e,children:ht}]})),document.getElementById("root"));
