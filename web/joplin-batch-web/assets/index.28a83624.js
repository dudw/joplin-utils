var Lt=Object.defineProperty,zt=Object.defineProperties;var Nt=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var T=(t,e,i)=>e in t?Lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,_=(t,e)=>{for(var i in e||(e={}))K.call(e,i)&&T(t,i,e[i]);if(q)for(var i of q(e))Z.call(e,i)&&T(t,i,e[i]);return t},A=(t,e)=>zt(t,Nt(e));var Q=(t,e)=>{var i={};for(var a in t)K.call(t,a)&&e.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&q)for(var a of q(t))e.indexOf(a)<0&&Z.call(t,a)&&(i[a]=t[a]);return i};var U=(t,e,i)=>(T(t,typeof e!="symbol"?e+"":e,i),i);import{i as Ft,r as n,e as k,u as X,a as Y,m as Ct,C as E,c as It,b as Pt,q as Wt,d as tt,F as N,f as qt,I as D,B as h,g as R,h as $t,j as S,n as et,k as j,S as B,L as x,l as it,p as at,o as Ot,w as nt,s as Mt,T as F,t as Tt,v as Ut,x as Dt,y as C,M as ot,z as Bt,A as Jt,D as Ht,E as Gt,G as Vt,R as b,H as Kt,J as Zt}from"./vendor.67ca9256.js";const Qt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}};Qt();const Xt="_app_18eob_1",Yt="_logo_18eob_9",te="_sider_18eob_21",ee="_main_18eob_23",ie="_header_18eob_41";var I={app:Xt,logo:Yt,sider:te,main:ee,header:ie};const d=new Ft;var ae=`# joplin-batch-web\r
\r
## Overview\r
\r
Handles some batch operations that are not supported by Joplin itself, and presents them as a visual interface.\r
\r
- [x] Check for unreferenced attachment resources\r
      Some unused attachment resources are not cleaned up in time\r
- [x] Check for referenced attachment resources that do not exist\r
      Some attachments that are being used may not exist for various reasons\r
- [x] Convert external links to internal note references\r
      Would like to be able to convert previous blog links to internal \`:/id\` links to ensure they never expire\r
- [x] Check for notes that don't have a parent directory (usually an error)\r
\r
### Getting Started\r
\r
1. open joplin desktop version\r
2. Enable the web clipper\r
3. Fill out the configuration in the [Settings](https://joplin-utils.rxliuli.com/joplin-batch-web/#/settings) page\r
4. Navigate to the relevant function page\r
\r
![guide](https://github.com/rxliuli/joplin-utils/raw/master/apps/joplin-batch-web/docs/images/guide.gif)\r
\r
> If you want to participate in the development or run locally, you can refer to [Participate in the project](./docs/dev.md)\r
\r
## FAQ\r
\r
### Why not use the cli form\r
\r
The cli form is not very suitable for this scenario, e.g. when you need to preview unusual attachments or notes, which is more troublesome at the command line.\r
\r
### Will it record my note data\r
\r
The website works locally, there is no back-end server, if you are still worried, you can check the source code [joplin-batch-web](https://github.com/rxliuli/joplin-utils/tree/master/apps/joplin-batch-web)\r
`,ne=`# joplin-batch-web\r
\r
\u5904\u7406\u4E00\u4E9B Joplin \u672C\u8EAB\u4E0D\u652F\u6301\u7684\u6279\u91CF\u64CD\u4F5C\uFF0C\u4EE5\u53EF\u89C6\u5316\u754C\u9762\u7684\u5F62\u5F0F\u5C55\u73B0\u51FA\u6765\u3002\r
\r
- [x] \u68C0\u67E5\u662F\u5426\u5B58\u5728\u6CA1\u6709\u5F15\u7528\u7684\u9644\u4EF6\u8D44\u6E90\r
      \u4E00\u4E9B\u6CA1\u6709\u4F7F\u7528\u7684\u9644\u4EF6\u8D44\u6E90\u6CA1\u6709\u88AB\u53CA\u65F6\u6E05\u7406\r
- [x] \u68C0\u67E5\u5F15\u7528\u7684\u9644\u4EF6\u8D44\u6E90\u4E0D\u5B58\u5728\u7684\u60C5\u51B5\r
      \u4E00\u4E9B\u6B63\u5728\u4F7F\u7528\u7684\u9644\u4EF6\u53EF\u80FD\u7531\u4E8E\u5404\u79CD\u539F\u56E0\u4E0D\u5B58\u5728\u4E86\r
- [x] \u8F6C\u6362\u5916\u90E8\u94FE\u63A5\u4E3A\u5185\u90E8\u7B14\u8BB0\u5F15\u7528\r
      \u5E0C\u671B\u80FD\u591F\u5C06\u4E4B\u524D\u7684 blog \u94FE\u63A5\u8F6C\u6362\u4E3A\u5185\u90E8\u7684 \`:/id\` \u94FE\u63A5\u4EE5\u4FDD\u8BC1\u6C38\u4E0D\u8FC7\u671F\r
- [x] \u68C0\u67E5\u662F\u5426\u5B58\u5728\u6CA1\u6709\u7236\u7EA7\u76EE\u5F55\u7684\u7B14\u8BB0\uFF08\u4E00\u822C\u662F\u9519\u8BEF\uFF09\r
\r
### \u5F00\u59CB\r
\r
1. \u6253\u5F00 joplin \u684C\u9762\u7248\r
2. \u542F\u7528\u7F51\u9875\u526A\u8F91\u5668\r
3. \u5728 [\u8BBE\u7F6E](https://joplin-utils.rxliuli.com/joplin-batch-web/#/settings) \u9875\u9762\u586B\u5199\u914D\u7F6E\r
4. \u5BFC\u822A\u5230\u76F8\u5173\u529F\u80FD\u9875\u9762\r
\r
![guide](https://github.com/rxliuli/joplin-utils/raw/master/apps/joplin-batch-web/docs/images/guide.gif)\r
\r
> \u5982\u679C\u60A8\u5E0C\u671B\u53C2\u4E0E\u5F00\u53D1\u6216\u5728\u672C\u5730\u8FD0\u884C\uFF0C\u53EF\u4EE5\u53C2\u8003 [\u53C2\u4E0E\u9879\u76EE](./docs/zh/dev.md)\r
\r
## FAQ\r
\r
### \u4E3A\u4EC0\u4E48\u4E0D\u4F7F\u7528 cli \u7684\u5F62\u5F0F\r
\r
cli \u7684\u5F62\u5F0F\u4E0D\u592A\u9002\u5408\u8FD9\u79CD\u573A\u666F\uFF0C\u4F8B\u5982\u9700\u8981\u9884\u89C8\u5F02\u5E38\u7684\u9644\u4EF6\u6216\u7B14\u8BB0\uFF0C\u5728\u547D\u4EE4\u884C\u4E0B\u6BD4\u8F83\u9EBB\u70E6\u3002\r
\r
### \u5B83\u4F1A\u8BB0\u5F55\u6211\u7684\u7B14\u8BB0\u6570\u636E\u4E48\r
\r
\u7F51\u7AD9\u662F\u5168\u672C\u5730\u5DE5\u4F5C\u7684\uFF0C\u6CA1\u6709\u540E\u7AEF\u670D\u52A1\u5668\uFF0C\u5982\u679C\u4F60\u4ECD\u7136\u62C5\u5FE7\uFF0C\u53EF\u4EE5\u68C0\u67E5\u6E90\u4EE3\u7801 [joplin-batch-web](https://github.com/rxliuli/joplin-utils/tree/master/apps/joplin-batch-web)\r
`;const oe="_home_nvat1_1";var pe={home:oe};function P(t){return{[k.En]:"/en-US/",[k.ZhCN]:"/zh-CN/","/zh-CN/":k.ZhCN,"/en-US/":k.En}[t]}function pt(){const t=X(),e=Y();return n.exports.useMemo(()=>{const a=/(\/.+?\/)/.exec(t.pathname);return a?P(a[0]):(e.push(P(k.En)),k.En)},[e,t.pathname])}const se=new Ct,le=()=>{const t=pt();return n.exports.createElement(E,null,n.exports.createElement("div",{className:pe.home,dangerouslySetInnerHTML:{__html:se.render(t===k.En?ae:ne)}}))},ce="modulepreload",st={},re="./",lt=function(e,i){return!i||i.length===0?e():Promise.all(i.map(a=>{if(a=`${re}${a}`,a in st)return;st[a]=!0;const o=a.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${s}`))return;const p=document.createElement("link");if(p.rel=o?"stylesheet":ce,o||(p.as="script",p.crossOrigin=""),p.href=a,document.head.appendChild(p),o)return new Promise((l,r)=>{p.addEventListener("load",l),p.addEventListener("error",r)})})).then(()=>e())};var de=Object.defineProperty,me=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,dt=(t,e,i)=>e in t?de(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,g=(t,e)=>{for(var i in e||(e={}))ct.call(e,i)&&dt(t,i,e[i]);if($)for(var i of $(e))rt.call(e,i)&&dt(t,i,e[i]);return t},L=(t,e)=>me(t,ue(e)),y=(t,e)=>{var i={};for(var a in t)ct.call(t,a)&&e.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&$)for(var a of $(t))e.indexOf(a)<0&&rt.call(t,a)&&(i[a]=t[a]);return i},c=(t,e,i)=>new Promise((a,o)=>{var s=r=>{try{l(i.next(r))}catch(m){o(m)}},p=r=>{try{l(i.throw(r))}catch(m){o(m)}},l=r=>r.done?a(r.value):Promise.resolve(r.value).then(s,p);l((i=i.apply(t,e)).next())}),w=class{static pageToAllList(t,e){return c(this,null,function*(){const i=[];for(let a=1,o=!0;o;a++){const s=yield t(L(g({},e),{page:a,limit:this.MaxLimit}));o=s.has_more,i.push(...s.items)}return i})}};w.MaxLimit=100;var mt=class{constructor(t){this.ajax=t}list(t){return c(this,null,function*(){return this.ajax.get("/notes",t)})}get(t,e){return c(this,null,function*(){return this.ajax.get(`/notes/${t}`,{fields:e})})}create(t){return c(this,null,function*(){return this.ajax.post("/notes",t)})}update(t){return c(this,null,function*(){const e=t,{id:i}=e,a=y(e,["id"]);return yield this.ajax.put(`/notes/${i}`,a)})}remove(t){return c(this,null,function*(){return this.ajax.delete(`/notes/${t}`)})}tagsById(t){return w.pageToAllList(e=>{var i=e,{id:a}=i,o=y(i,["id"]);return this.ajax.get(`/notes/${a}/tags`,g({},o))},{id:t})}resourcesById(t){return c(this,arguments,function*(e,i=["id","title"]){return w.pageToAllList(a=>{var o=a,{id:s}=o,p=y(o,["id"]);return this.ajax.get(`/notes/${s}/resources`,g({fields:i},p))},{id:e})})}},ve=class{constructor(t){this.ajax=t}list(t){return c(this,null,function*(){return yield this.ajax.get("/tags",t)})}get(t){return c(this,null,function*(){return yield this.ajax.get(`/tags/${t}`)})}create(t){return c(this,null,function*(){return yield this.ajax.post("/tags",t)})}update(t){return c(this,null,function*(){const e=t,{id:i}=e,a=y(e,["id"]);return yield this.ajax.post(`/tags/${i}`,a)})}remove(t){return c(this,null,function*(){return yield this.ajax.delete(`/tags/${t}`)})}notesByTagId(t){return c(this,null,function*(){var e=t,{id:i}=e,a=y(e,["id"]);return yield this.ajax.get(`/tags/${i}/notes`,a)})}addTagByNoteId(t,e){return c(this,null,function*(){return yield this.ajax.post(`/tags/${t}/notes/`,{id:e})})}removeTagByNoteId(t,e){return c(this,null,function*(){return yield this.ajax.delete(`/tags/${t}/notes/${e}`)})}},f;(function(t){t[t.Note=1]="Note",t[t.Folder=2]="Folder",t[t.Setting=3]="Setting",t[t.Resource=4]="Resource",t[t.Tag=5]="Tag",t[t.NoteTag=6]="NoteTag",t[t.Search=7]="Search",t[t.Alarm=8]="Alarm",t[t.MasterKey=9]="MasterKey",t[t.ItemChange=10]="ItemChange",t[t.NoteResource=11]="NoteResource",t[t.ResourceLocalState=12]="ResourceLocalState",t[t.Revision=13]="Revision",t[t.Migration=14]="Migration",t[t.SmartFilter=15]="SmartFilter"})(f||(f={}));var J=class{constructor(t){this.ajax=t}search(t){return c(this,null,function*(){J.TypeEnumMap["8"]="";const e=t,{type:i}=e,a=y(e,["type"]);return this.ajax.get("/search",L(g({},a),{type:J.TypeEnumMap[i]}))})}},ut=J;ut.TypeEnumMap={[f.Note]:"note",[f.Folder]:"folder",[f.Setting]:"setting",[f.Resource]:"resource",[f.Tag]:"tag",[f.NoteTag]:"note_tag",[f.Search]:"search",[f.Alarm]:"alarm",[f.MasterKey]:"master_key",[f.ItemChange]:"item_change",[f.NoteResource]:"note_resource",[f.ResourceLocalState]:"resource_local_state",[f.Revision]:"revision",[f.Migration]:"migration",[f.SmartFilter]:"smart_filter"};var vt=class{constructor(t){this.ajax=t}pingPort(t){return c(this,null,function*(){return(yield this.ajax.request({url:`http://localhost:${t}/ping`,method:"get",responseType:"text"}))==="JoplinClipperServer"})}static range(t,e){const i=[];for(let a=t;a<e;a++)i.push(a);return i}scan(){return c(this,null,function*(){const t=yield Promise.all(vt.range(41184,41194+1).filter(e=>c(this,null,function*(){try{return yield this.pingPort(e)}catch{return!1}})));if(t.length===0)throw new Error("Joplin's port is not scanned");return t[0]})}ping(){return c(this,null,function*(){return this.pingPort(this.ajax.config.port)})}},xt=class{constructor(t){this.ajax=t}list(t){return c(this,null,function*(){return this.ajax.get("/folders",t)})}listAll(){return c(this,null,function*(){return this.ajax.get("/folders",{as_tree:1})})}get(t){return c(this,null,function*(){return this.ajax.get(`/folders/${t}`)})}create(t){return c(this,null,function*(){return this.ajax.post("/folders",t)})}update(t){return c(this,null,function*(){const e=t,{id:i}=e,a=y(e,["id"]);return this.ajax.put(`/folders/${i}`,a)})}remove(t){return c(this,null,function*(){return this.ajax.delete(`/folders/${t}`)})}notesByFolderId(t,e){return c(this,null,function*(){return yield w.pageToAllList(i=>{var a=i,{id:o}=a,s=y(a,["id"]);return this.ajax.get(`/folders/${o}/notes`,s)},{id:t,fields:e})})}},xe=class{constructor(t){this.ajax=t}list(t){return c(this,null,function*(){return yield this.ajax.get("/resources",t)})}get(t,e){return c(this,null,function*(){return yield this.ajax.get(`/resources/${t}`,{fields:e})})}create(t){return c(this,null,function*(){return yield this.ajax.postFormData("/resources",{props:JSON.stringify({title:t.title}),data:t.data})})}update(t){return c(this,null,function*(){const e=t,{id:i}=e,a=y(e,["id"]);return yield this.ajax.put(`/resources/${i}`,a)})}remove(t){return c(this,null,function*(){return yield this.ajax.delete(`/resources/${t}`)})}fileByResourceId(t){return c(this,null,function*(){const e=yield this.ajax.get(`/resources/${t}/file`,{},{responseType:"arraybuffer"});return Buffer.from(e,"binary")})}},W;(function(t){t.OpenAndWatch="openAndWatch",t.StopWatching="stopWatching",t.NoteIsWatched="noteIsWatched"})(W||(W={}));var fe=class{constructor(t){this.ajax=t}openAndWatch(t){return this.baseAction(W.OpenAndWatch,t)}stopWatching(t){return this.baseAction(W.StopWatching,t)}noteIsWatched(t){return c(this,null,function*(){return this.isWatch(t)})}isWatch(t){return c(this,null,function*(){return this.baseAction(W.NoteIsWatched,t)})}baseAction(t,e){return c(this,null,function*(){return this.ajax.post("/services/externalEditWatcher",{action:t,noteId:e})})}},z;(function(t){t.OpenAndWatch="openAndWatch",t.Watch="watch",t.StopWatching="stopWatching",t.NoteIsWatched="isWatched"})(z||(z={}));var he=class{constructor(t){this.ajax=t}openAndWatch(t){return this.baseAction(z.OpenAndWatch,t)}watch(t){return this.baseAction(z.Watch,t)}stopWatching(t){return this.baseAction(z.StopWatching,t)}noteIsWatched(t){return c(this,null,function*(){return this.baseAction(z.NoteIsWatched,t)})}baseAction(t,e){return c(this,null,function*(){return this.ajax.post("/services/resourceEditWatcher",{action:t,resourceId:e})})}},ge=class{constructor(t){this.ajax=t,this.noteApi=new mt(this.ajax)}rename(t,e){return this.noteApi.update({id:t,title:e})}move(t,e){return this.noteApi.update({id:t,parent_id:e})}toggleTodo(t,e){return c(this,null,function*(){const i=yield this.noteApi.get(t,["id","is_todo","todo_completed"]);!i.is_todo||(yield this.noteApi.update({id:i.id,todo_completed:e||(i.todo_completed===0?1:0)}))})}},be=class{constructor(t){this.ajax=t,this.folderApi=new xt(this.ajax)}rename(t,e){return this.folderApi.update({id:t,title:e})}path(t){return c(this,null,function*(){if(!t)return[];const e=yield this.folderApi.get(t);return e.parent_id?(yield this.path(e.parent_id)).concat([e]):[e]})}move(t,e){return c(this,null,function*(){if(t===e)return;if((yield this.path(e)).some(a=>t===a.id))throw new Error("Cannot move directory to subdirectory");yield this.folderApi.update({id:t,parent_id:e})})}},we=class{constructor(){this.port=41184,this.token=""}},ft=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof global!="undefined"&&global||{},ke={method:"get",data:void 0,headers:{},responseType:"json"},ye=class{constructor(t){this.config=t}request(t){return c(this,null,function*(){return(yield Pt.request(g(g({},ke),t))).data})}baseUrl(t,e){const i=Wt.stringify(g(g({},e),this.config),{arrayFormat:"comma"});return`http://localhost:${this.config.port}${t}?${i}`}get(t,e,i){return this.request(L(g({url:this.baseUrl(t,e)},i),{method:"get"}))}post(t,e,i){return this.request(L(g({url:this.baseUrl(t),data:e},i),{method:"post"}))}put(t,e,i){return this.request(L(g({url:this.baseUrl(t),data:e},i),{method:"put"}))}delete(t,e,i){return this.request(L(g({url:this.baseUrl(t),data:e},i),{method:"delete"}))}postFormData(t,e){return c(this,null,function*(){typeof fetch=="undefined"&&Reflect.set(ft,"fetch",(yield lt(()=>import("./index.881a56dd.js"),["assets/index.881a56dd.js","assets/vendor.67ca9256.js","assets/vendor.4d84dd7b.css"])).default),typeof FormData=="undefined"&&Reflect.set(ft,"FormData",(yield lt(()=>import("./browser.aaf5c39c.js").then(function(o){return o.b}),[])).default);const i=new FormData;return Object.entries(e).forEach(([o,s])=>i.append(o,s)),yield(yield fetch(this.baseUrl(t),{method:"post",body:i})).json()})}},ht=class{constructor(){this.config=new we,this.ajax=new ye(this.config),this.folderApi=new xt(this.ajax),this.folderExtApi=new be(this.ajax),this.joplinApi=new vt(this.ajax),this.noteActionApi=new fe(this.ajax),this.noteApi=new mt(this.ajax),this.noteExtApi=new ge(this.ajax),this.resourceActionApi=new he(this.ajax),this.resourceApi=new xe(this.ajax),this.searchApi=new ut(this.ajax),this.tagApi=new ve(this.ajax)}set token(t){this.config.token=t}set port(t){this.config.port=t}},gt=new ht;Object.entries(gt).forEach(([t,e])=>{Reflect.set(gt,t,It.bindMethodThis(e))});const v=new ht,bt=tt(localStorage);var Et,_t;v.token=(_t=(Et=bt.settings)==null?void 0:Et.token)!=null?_t:"";var At,Rt;v.port=(Rt=(At=bt.settings)==null?void 0:At.port)!=null?Rt:41184;const je=()=>{var o;const[t]=N.useForm();async function e(){if(!await t.validateFields())return;const s=t.getFieldsValue();console.log("onFinish: ",s);try{v.token=s.token,v.port=s.port,await v.noteApi.list({limit:1}),a(s),R.success(d.t("settings.msg.success"))}catch(p){console.error(p),R.error(d.t("settings.msg.error"))}}const[i,a]=qt("settings");return n.exports.createElement(E,null,n.exports.createElement("h2",null,d.t("settings.title")),n.exports.createElement(N,{form:t,onFinish:e,initialValues:{token:i==null?void 0:i.token,port:(o=i==null?void 0:i.port)!=null?o:41184}},n.exports.createElement(N.Item,{name:"token",label:d.t("settings.form.token"),rules:[{required:!0}]},n.exports.createElement(D,{type:"password"})),n.exports.createElement(N.Item,{name:"port",label:d.t("settings.form.port"),rules:[{required:!0}]},n.exports.createElement(D,{type:"number"})),n.exports.createElement(N.Item,null,n.exports.createElement(h,{type:"primary",htmlType:"submit"},d.t("settings.action.submit")))))};class wt{static warpOnEvent(e){const i={},a=$t(0).then(()=>new Promise((o,s)=>{try{o(e(i))}catch(p){s(p)}}));return Reflect.set(a,"on",(o,s)=>(i[o]=s,a)),a}}class Ee{constructor(e){this.config=e}getUnusedResource(){return wt.warpOnEvent(async e=>{const i=await w.pageToAllList(this.config.resourceApi.list.bind(this.config.resourceApi),{fields:["id","title","mime"]});let a=0;return await S.filter(i,et(async o=>{const s=!await this.checkUsed(o.id);return e.process({title:o.title,all:i.length,rate:a++}),s},10))})}async checkUsed(e){return(await this.config.searchApi.search({query:`"](:/${e})"`})).items.length>0}}const _e=new Ee(v);function Ae(t){const e=t();return i=>`http://localhost:${e==null?void 0:e.port}/resources/${i}/file?token=${e==null?void 0:e.token}`}const H=Ae(()=>tt(localStorage).settings),Re=()=>{const[t,e]=n.exports.useState([]),[i,a]=n.exports.useState(""),[o,s]=j(async()=>{try{const u=await _e.getUnusedResource().on("process",M=>{a(d.t("unusedResource.msg.process",M))});console.log("list: ",u),e(u)}catch{R.error(d.t("unusedResource.msg.error"))}});async function p(u){e(at(M=>M.filter(St=>St.id!==u))),await v.resourceApi.remove(u)}async function l(u){await Ot(H(u))}const[r,m]=j(async()=>{await S.forEach(t,async u=>{await v.resourceApi.remove(u.id)}),e([])},[t]);return n.exports.createElement(E,{title:d.t("unusedResource.title"),extra:n.exports.createElement(B,null,n.exports.createElement(h,{onClick:s},d.t("common.action.check")),n.exports.createElement(h,{disabled:t.length===0,danger:!0,loading:r.loading,onClick:m},d.t("unusedResource.action.removeAll")))},n.exports.createElement(x,{dataSource:t,locale:{emptyText:d.t("unusedResource.listEmptyText")},renderItem:u=>n.exports.createElement(x.Item,{key:u.id,actions:[n.exports.createElement(h,{onClick:()=>p(u.id)},d.t("common.action.remove")),n.exports.createElement(h,{onClick:()=>l(u.id)},d.t("common.action.download"))],extra:u.mime.startsWith("image/")&&n.exports.createElement(it,{src:H(u.id),width:300})},n.exports.createElement(x.Item.Meta,{title:u.title})),loading:{spinning:o.loading,tip:i}}))};function Se(){return new Worker("./assets/parseInternalLink.e7a8cff8.js",{type:"module"})}class Le{constructor(e){U(this,"parseInternalLinkWorker",nt(new Se));this.config=e}check(){return wt.warpOnEvent(async e=>{e.load("\u5F00\u59CB\u52A0\u8F7D\u6240\u6709\u9644\u4EF6\u8D44\u6E90");const i=new Set((await this.getAllResourceIdList()).map(p=>p.id));e.load("\u5F00\u59CB\u52A0\u8F7D\u6240\u6709\u7B14\u8BB0");const a=await w.pageToAllList(this.config.noteApi.list.bind(this.config.noteApi),{fields:["id","title","body","user_updated_time"]}),o=a.reduce((p,l)=>p.add(l.id),new Set);e.load("\u5F00\u59CB\u89E3\u6790\u6240\u6709\u7B14\u8BB0");let s=0;return(await S.map(a,async p=>{const l=A(_({},p),{resources:await this.parseInternalLinkWorker(p.body)});return s++,e.parse({rate:s,all:a.length,title:p.title||"\u672A\u77E5\u6587\u4EF6\u540D"}),l})).filter(p=>(p.resources=p.resources.filter(l=>!i.has(l.id)&&!o.has(l.id)),p.resources.length!==0)).map(r=>{var m=r,{body:p}=m,l=Q(m,["body"]);return l})})}async getAllResourceIdList(){return await w.pageToAllList(this.config.resourceApi.list.bind(this.config.resourceApi),{fields:["id","title","mime"]})}}const ze="_subList_1op68_1";var Ne={subList:ze};const Fe=new Le(v),Ce=()=>{const[t,e]=n.exports.useState([]),[i,a]=n.exports.useState(""),[o,s]=j(async()=>{const l=await Fe.check().on("load",r=>a(r)).on("parse",r=>{a(`[${r.rate}/${r.all}] ${r.title}`)});console.log("list: ",l),e(l)});async function p(l){await v.noteActionApi.openAndWatch(l)}return n.exports.createElement(E,{title:d.t("notFoundResource.title"),extra:n.exports.createElement(h,{onClick:s},d.t("common.action.check"))},n.exports.createElement(x,{dataSource:t,locale:{emptyText:d.t("notFoundResource.listEmptyText")},renderItem:l=>n.exports.createElement(x.Item,{key:l.id,actions:[n.exports.createElement(h,{onClick:()=>p(l.id)},d.t("common.action.open"))]},n.exports.createElement(x.Item.Meta,{title:l.title,description:n.exports.createElement(x,{className:Ne.subList,dataSource:l.resources,renderItem:r=>n.exports.createElement(x.Item,{key:r.id},n.exports.createElement(x.Item.Meta,{title:r.title||d.t("notFoundResource.unknownFileName",r)}))})})),loading:{spinning:o.loading,tip:i}}))};function Ie(){return new Worker("./assets/MarkdownLinkUtil.63c340c2.js",{type:"module"})}class G{constructor(){U(this,"markdownLinkUtilWorker",nt(new Ie))}async search(e){const i=await w.pageToAllList(v.searchApi.search.bind(v.searchApi),{query:`body:"${e}"`,fields:["id","title","body","user_updated_time"],order_by:"user_updated_time",order_dir:"DESC"});return await S.map(i,async a=>{const o=await this.markdownLinkUtilWorker.parseLink(a.body);return Reflect.deleteProperty(a,"body"),A(_({},a),{urls:await G.mapContentLinks(o,e)})})}static mapContentLinks(e,i){return S.map(e.filter(a=>a.url.startsWith(i)),async a=>{if(!a.title)return a;const o=(await v.searchApi.search({query:`title:"${a.title}"`,limit:3,fields:["id","title"]})).items;return A(_({},a),{matchNotes:o})})}async convert(e,i){const a=await v.noteApi.get(e,["id","body"]),o=await this.markdownLinkUtilWorker.convertLink(a.body,i);await v.noteApi.update({id:a.id,body:o,user_updated_time:Date.now()})}}const Pe="_sub1_sym9i_9",We="_sub2_sym9i_15";var kt={sub1:Pe,sub2:We};class qe{static addMeta(e,i){const a=Mt.stringify(i);return`---
`+a+`---

`+e}static trimTitle(e){return(e.startsWith("#")?e.substr(1).trimLeft():e).replace(new RegExp(`[\r
]`),"")}}const yt=new G,$e=t=>{const[e,i]=j(t.onConvertNote);return n.exports.createElement(x,{dataSource:t.url.matchNotes,className:kt.sub2,loading:e.loading,renderItem:a=>n.exports.createElement(x.Item,{key:a.id},n.exports.createElement(B,null,n.exports.createElement(F.Text,null,a.title),n.exports.createElement(h,{onClick:()=>i(a)},d.t("convertExternalLink.action.convert"))))})},jt=t=>t.urls.length!==0,Oe=()=>{const[t,e]=n.exports.useState([]),[i,a]=j(async function(l){if(l===""){e([]);return}const r=await yt.search(l);console.log("onSearch: ",r),e(r.filter(jt))});async function o(p){console.log("onConvertNote: ",p),await yt.convert(p.noteId,{[p.url]:{title:qe.trimTitle(p.linkNoteTitle),url:`:/${p.linkNoteId}`}}),e(at(l=>{console.log("remove: ",p.noteIndex,p.urlIndex),l[p.noteIndex].urls.splice(p.urlIndex,1),l.filter(r=>r.urls.length!==0)})),e(l=>l.filter(jt)),R.success(d.t("convertExternalLink.msg.success"))}async function s(p){await v.noteActionApi.openAndWatch(p)}return n.exports.createElement(E,{title:d.t("convertExternalLink.title")},n.exports.createElement(D.Search,{onSearch:a,allowClear:!0,loading:i.loading}),n.exports.createElement(x,{dataSource:t,itemLayout:"vertical",loading:i.loading,renderItem:(p,l)=>n.exports.createElement(x.Item,{key:p.id,extra:[n.exports.createElement(h,{onClick:()=>s(p.id)},d.t("common.action.open"))]},n.exports.createElement(F.Title,{level:4},p.title),n.exports.createElement(x,{dataSource:p.urls,className:kt.sub1,itemLayout:"vertical",renderItem:(r,m)=>n.exports.createElement(x.Item,{key:m},n.exports.createElement(F.Title,{level:5},r.title),n.exports.createElement(F.Link,null,r.url),r.matchNotes&&r.matchNotes.length!==0&&n.exports.createElement($e,{url:r,onConvertNote:u=>o({noteId:p.id,url:r.url,linkNoteId:u.id,linkNoteTitle:u.title,noteIndex:l,urlIndex:m})}))}))}))};class Me{async check(){const e=new Set(Tt(await v.folderApi.listAll(),{id:"id",path:"path",children:"children"}).map(a=>a.id));return(await w.pageToAllList(v.noteApi.list.bind(v.noteApi),{fields:["id","title","parent_id"],order_by:"user_updated_time",order_dir:"DESC"})).filter(a=>!e.has(a.parent_id))}}const Te=new Me,Ue=()=>{const[t,e]=n.exports.useState([]),[i,a]=j(async()=>{const s=await Te.check();console.log("list: ",s),e(s)});async function o(s){await v.noteApi.remove(s),e(p=>p.filter(l=>l.id!==s))}return n.exports.createElement(E,{title:d.t("checkParentNotebook.title"),extra:n.exports.createElement(h,{loading:i.loading,onClick:a},d.t("common.action.check"))},n.exports.createElement(x,{dataSource:t,locale:{emptyText:d.t("checkParentNotebook.listEmptyText")},renderItem:s=>n.exports.createElement(x.Item,{id:s.id,extra:n.exports.createElement(h,{onClick:()=>o(s.id)},d.t("common.action.remove"))},n.exports.createElement(F.Text,null,s.title))}))},O=[{t:"application/andrew-inset",e:["ez"]},{t:"application/applixware",e:["aw"]},{t:"application/atom+xml",e:["atom"]},{t:"application/atomcat+xml",e:["atomcat"]},{t:"application/atomsvc+xml",e:["atomsvc"]},{t:"application/ccxml+xml",e:["ccxml"]},{t:"application/cdmi-capability",e:["cdmia"]},{t:"application/cdmi-container",e:["cdmic"]},{t:"application/cdmi-domain",e:["cdmid"]},{t:"application/cdmi-object",e:["cdmio"]},{t:"application/cdmi-queue",e:["cdmiq"]},{t:"application/cu-seeme",e:["cu"]},{t:"application/davmount+xml",e:["davmount"]},{t:"application/docbook+xml",e:["dbk"]},{t:"application/dssc+der",e:["dssc"]},{t:"application/dssc+xml",e:["xdssc"]},{t:"application/ecmascript",e:["ecma"]},{t:"application/emma+xml",e:["emma"]},{t:"application/epub+zip",e:["epub"]},{t:"application/exi",e:["exi"]},{t:"application/font-tdpfr",e:["pfr"]},{t:"application/font-woff",e:["woff"]},{t:"application/gml+xml",e:["gml"]},{t:"application/gpx+xml",e:["gpx"]},{t:"application/gxf",e:["gxf"]},{t:"application/hyperstudio",e:["stk"]},{t:"application/inkml+xml",e:["ink","inkml"]},{t:"application/ipfix",e:["ipfix"]},{t:"application/java-archive",e:["jar"]},{t:"application/java-serialized-object",e:["ser"]},{t:"application/java-vm",e:["class"]},{t:"application/javascript",e:["js"]},{t:"application/json",e:["json"]},{t:"application/jsonml+json",e:["jsonml"]},{t:"application/lost+xml",e:["lostxml"]},{t:"application/mac-binhex40",e:["hqx"]},{t:"application/mac-compactpro",e:["cpt"]},{t:"application/mads+xml",e:["mads"]},{t:"application/marc",e:["mrc"]},{t:"application/marcxml+xml",e:["mrcx"]},{t:"application/mathematica",e:["ma","nb","mb"]},{t:"application/mathml+xml",e:["mathml"]},{t:"application/mbox",e:["mbox"]},{t:"application/mediaservercontrol+xml",e:["mscml"]},{t:"application/metalink+xml",e:["metalink"]},{t:"application/metalink4+xml",e:["meta4"]},{t:"application/mets+xml",e:["mets"]},{t:"application/mods+xml",e:["mods"]},{t:"application/mp21",e:["m21","mp21"]},{t:"application/mp4",e:["mp4s"]},{t:"application/msword",e:["doc","dot"]},{t:"application/mxf",e:["mxf"]},{t:"application/octet-stream",e:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy"]},{t:"application/oda",e:["oda"]},{t:"application/oebps-package+xml",e:["opf"]},{t:"application/ogg",e:["ogx"]},{t:"application/omdoc+xml",e:["omdoc"]},{t:"application/onenote",e:["onetoc","onetoc2","onetmp","onepkg"]},{t:"application/oxps",e:["oxps"]},{t:"application/patch-ops-error+xml",e:["xer"]},{t:"application/pdf",e:["pdf"]},{t:"application/pgp-encrypted",e:["pgp"]},{t:"application/pgp-signature",e:["asc","sig"]},{t:"application/pics-rules",e:["prf"]},{t:"application/pkcs10",e:["p10"]},{t:"application/pkcs7-mime",e:["p7m","p7c"]},{t:"application/pkcs7-signature",e:["p7s"]},{t:"application/pkcs8",e:["p8"]},{t:"application/pkix-attr-cert",e:["ac"]},{t:"application/pkix-cert",e:["cer"]},{t:"application/pkix-crl",e:["crl"]},{t:"application/pkix-pkipath",e:["pkipath"]},{t:"application/pkixcmp",e:["pki"]},{t:"application/pls+xml",e:["pls"]},{t:"application/postscript",e:["ai","eps","ps"]},{t:"application/prs.cww",e:["cww"]},{t:"application/pskc+xml",e:["pskcxml"]},{t:"application/rdf+xml",e:["rdf"]},{t:"application/reginfo+xml",e:["rif"]},{t:"application/relax-ng-compact-syntax",e:["rnc"]},{t:"application/resource-lists+xml",e:["rl"]},{t:"application/resource-lists-diff+xml",e:["rld"]},{t:"application/rls-services+xml",e:["rs"]},{t:"application/rpki-ghostbusters",e:["gbr"]},{t:"application/rpki-manifest",e:["mft"]},{t:"application/rpki-roa",e:["roa"]},{t:"application/rsd+xml",e:["rsd"]},{t:"application/rss+xml",e:["rss"]},{t:"application/rtf",e:["rtf"]},{t:"application/sbml+xml",e:["sbml"]},{t:"application/scvp-cv-request",e:["scq"]},{t:"application/scvp-cv-response",e:["scs"]},{t:"application/scvp-vp-request",e:["spq"]},{t:"application/scvp-vp-response",e:["spp"]},{t:"application/sdp",e:["sdp"]},{t:"application/set-payment-initiation",e:["setpay"]},{t:"application/set-registration-initiation",e:["setreg"]},{t:"application/shf+xml",e:["shf"]},{t:"application/smil+xml",e:["smi","smil"]},{t:"application/sparql-query",e:["rq"]},{t:"application/sparql-results+xml",e:["srx"]},{t:"application/srgs",e:["gram"]},{t:"application/srgs+xml",e:["grxml"]},{t:"application/sru+xml",e:["sru"]},{t:"application/ssdl+xml",e:["ssdl"]},{t:"application/ssml+xml",e:["ssml"]},{t:"application/tei+xml",e:["tei","teicorpus"]},{t:"application/thraud+xml",e:["tfi"]},{t:"application/timestamped-data",e:["tsd"]},{t:"application/vnd.3gpp.pic-bw-large",e:["plb"]},{t:"application/vnd.3gpp.pic-bw-small",e:["psb"]},{t:"application/vnd.3gpp.pic-bw-var",e:["pvb"]},{t:"application/vnd.3gpp2.tcap",e:["tcap"]},{t:"application/vnd.3m.post-it-notes",e:["pwn"]},{t:"application/vnd.accpac.simply.aso",e:["aso"]},{t:"application/vnd.accpac.simply.imp",e:["imp"]},{t:"application/vnd.acucobol",e:["acu"]},{t:"application/vnd.acucorp",e:["atc","acutc"]},{t:"application/vnd.adobe.air-application-installer-package+zip",e:["air"]},{t:"application/vnd.adobe.formscentral.fcdt",e:["fcdt"]},{t:"application/vnd.adobe.fxp",e:["fxp","fxpl"]},{t:"application/vnd.adobe.xdp+xml",e:["xdp"]},{t:"application/vnd.adobe.xfdf",e:["xfdf"]},{t:"application/vnd.ahead.space",e:["ahead"]},{t:"application/vnd.airzip.filesecure.azf",e:["azf"]},{t:"application/vnd.airzip.filesecure.azs",e:["azs"]},{t:"application/vnd.amazon.ebook",e:["azw"]},{t:"application/vnd.americandynamics.acc",e:["acc"]},{t:"application/vnd.amiga.ami",e:["ami"]},{t:"application/vnd.android.package-archive",e:["apk"]},{t:"application/vnd.anser-web-certificate-issue-initiation",e:["cii"]},{t:"application/vnd.anser-web-funds-transfer-initiation",e:["fti"]},{t:"application/vnd.antix.game-component",e:["atx"]},{t:"application/vnd.apple.installer+xml",e:["mpkg"]},{t:"application/vnd.apple.mpegurl",e:["m3u8"]},{t:"application/vnd.aristanetworks.swi",e:["swi"]},{t:"application/vnd.astraea-software.iota",e:["iota"]},{t:"application/vnd.audiograph",e:["aep"]},{t:"application/vnd.blueice.multipass",e:["mpm"]},{t:"application/vnd.bmi",e:["bmi"]},{t:"application/vnd.businessobjects",e:["rep"]},{t:"application/vnd.chemdraw+xml",e:["cdxml"]},{t:"application/vnd.chipnuts.karaoke-mmd",e:["mmd"]},{t:"application/vnd.cinderella",e:["cdy"]},{t:"application/vnd.claymore",e:["cla"]},{t:"application/vnd.cloanto.rp9",e:["rp9"]},{t:"application/vnd.clonk.c4group",e:["c4g","c4d","c4f","c4p","c4u"]},{t:"application/vnd.cluetrust.cartomobile-config",e:["c11amc"]},{t:"application/vnd.cluetrust.cartomobile-config-pkg",e:["c11amz"]},{t:"application/vnd.commonspace",e:["csp"]},{t:"application/vnd.contact.cmsg",e:["cdbcmsg"]},{t:"application/vnd.cosmocaller",e:["cmc"]},{t:"application/vnd.crick.clicker",e:["clkx"]},{t:"application/vnd.crick.clicker.keyboard",e:["clkk"]},{t:"application/vnd.crick.clicker.palette",e:["clkp"]},{t:"application/vnd.crick.clicker.template",e:["clkt"]},{t:"application/vnd.crick.clicker.wordbank",e:["clkw"]},{t:"application/vnd.criticaltools.wbs+xml",e:["wbs"]},{t:"application/vnd.ctc-posml",e:["pml"]},{t:"application/vnd.cups-ppd",e:["ppd"]},{t:"application/vnd.curl.car",e:["car"]},{t:"application/vnd.curl.pcurl",e:["pcurl"]},{t:"application/vnd.dart",e:["dart"]},{t:"application/vnd.data-vision.rdz",e:["rdz"]},{t:"application/vnd.dece.data",e:["uvf","uvvf","uvd","uvvd"]},{t:"application/vnd.dece.ttml+xml",e:["uvt","uvvt"]},{t:"application/vnd.dece.unspecified",e:["uvx","uvvx"]},{t:"application/vnd.dece.zip",e:["uvz","uvvz"]},{t:"application/vnd.denovo.fcselayout-link",e:["fe_launch"]},{t:"application/vnd.dna",e:["dna"]},{t:"application/vnd.dolby.mlp",e:["mlp"]},{t:"application/vnd.dpgraph",e:["dpg"]},{t:"application/vnd.dreamfactory",e:["dfac"]},{t:"application/vnd.ds-keypoint",e:["kpxx"]},{t:"application/vnd.dvb.ait",e:["ait"]},{t:"application/vnd.dvb.service",e:["svc"]},{t:"application/vnd.dynageo",e:["geo"]},{t:"application/vnd.ecowin.chart",e:["mag"]},{t:"application/vnd.enliven",e:["nml"]},{t:"application/vnd.epson.esf",e:["esf"]},{t:"application/vnd.epson.msf",e:["msf"]},{t:"application/vnd.epson.quickanime",e:["qam"]},{t:"application/vnd.epson.salt",e:["slt"]},{t:"application/vnd.epson.ssf",e:["ssf"]},{t:"application/vnd.eszigno3+xml",e:["es3","et3"]},{t:"application/vnd.ezpix-album",e:["ez2"]},{t:"application/vnd.ezpix-package",e:["ez3"]},{t:"application/vnd.fdf",e:["fdf"]},{t:"application/vnd.fdsn.mseed",e:["mseed"]},{t:"application/vnd.fdsn.seed",e:["seed","dataless"]},{t:"application/vnd.flographit",e:["gph"]},{t:"application/vnd.fluxtime.clip",e:["ftc"]},{t:"application/vnd.framemaker",e:["fm","frame","maker","book"]},{t:"application/vnd.frogans.fnc",e:["fnc"]},{t:"application/vnd.frogans.ltf",e:["ltf"]},{t:"application/vnd.fsc.weblaunch",e:["fsc"]},{t:"application/vnd.fujitsu.oasys",e:["oas"]},{t:"application/vnd.fujitsu.oasys2",e:["oa2"]},{t:"application/vnd.fujitsu.oasys3",e:["oa3"]},{t:"application/vnd.fujitsu.oasysgp",e:["fg5"]},{t:"application/vnd.fujitsu.oasysprs",e:["bh2"]},{t:"application/vnd.fujixerox.ddd",e:["ddd"]},{t:"application/vnd.fujixerox.docuworks",e:["xdw"]},{t:"application/vnd.fujixerox.docuworks.binder",e:["xbd"]},{t:"application/vnd.fuzzysheet",e:["fzs"]},{t:"application/vnd.genomatix.tuxedo",e:["txd"]},{t:"application/vnd.geogebra.file",e:["ggb"]},{t:"application/vnd.geogebra.tool",e:["ggt"]},{t:"application/vnd.geometry-explorer",e:["gex","gre"]},{t:"application/vnd.geonext",e:["gxt"]},{t:"application/vnd.geoplan",e:["g2w"]},{t:"application/vnd.geospace",e:["g3w"]},{t:"application/vnd.gmx",e:["gmx"]},{t:"application/vnd.google-earth.kml+xml",e:["kml"]},{t:"application/vnd.google-earth.kmz",e:["kmz"]},{t:"application/vnd.grafeq",e:["gqf","gqs"]},{t:"application/vnd.groove-account",e:["gac"]},{t:"application/vnd.groove-help",e:["ghf"]},{t:"application/vnd.groove-identity-message",e:["gim"]},{t:"application/vnd.groove-injector",e:["grv"]},{t:"application/vnd.groove-tool-message",e:["gtm"]},{t:"application/vnd.groove-tool-template",e:["tpl"]},{t:"application/vnd.groove-vcard",e:["vcg"]},{t:"application/vnd.hal+xml",e:["hal"]},{t:"application/vnd.handheld-entertainment+xml",e:["zmm"]},{t:"application/vnd.hbci",e:["hbci"]},{t:"application/vnd.hhe.lesson-player",e:["les"]},{t:"application/vnd.hp-hpgl",e:["hpgl"]},{t:"application/vnd.hp-hpid",e:["hpid"]},{t:"application/vnd.hp-hps",e:["hps"]},{t:"application/vnd.hp-jlyt",e:["jlt"]},{t:"application/vnd.hp-pcl",e:["pcl"]},{t:"application/vnd.hp-pclxl",e:["pclxl"]},{t:"application/vnd.hydrostatix.sof-data",e:["sfd-hdstx"]},{t:"application/vnd.ibm.minipay",e:["mpy"]},{t:"application/vnd.ibm.modcap",e:["afp","listafp","list3820"]},{t:"application/vnd.ibm.rights-management",e:["irm"]},{t:"application/vnd.ibm.secure-container",e:["sc"]},{t:"application/vnd.iccprofile",e:["icc","icm"]},{t:"application/vnd.igloader",e:["igl"]},{t:"application/vnd.immervision-ivp",e:["ivp"]},{t:"application/vnd.immervision-ivu",e:["ivu"]},{t:"application/vnd.insors.igm",e:["igm"]},{t:"application/vnd.intercon.formnet",e:["xpw","xpx"]},{t:"application/vnd.intergeo",e:["i2g"]},{t:"application/vnd.intu.qbo",e:["qbo"]},{t:"application/vnd.intu.qfx",e:["qfx"]},{t:"application/vnd.ipunplugged.rcprofile",e:["rcprofile"]},{t:"application/vnd.irepository.package+xml",e:["irp"]},{t:"application/vnd.is-xpr",e:["xpr"]},{t:"application/vnd.isac.fcs",e:["fcs"]},{t:"application/vnd.jam",e:["jam"]},{t:"application/vnd.jcp.javame.midlet-rms",e:["rms"]},{t:"application/vnd.jisp",e:["jisp"]},{t:"application/vnd.joost.joda-archive",e:["joda"]},{t:"application/vnd.kahootz",e:["ktz","ktr"]},{t:"application/vnd.kde.karbon",e:["karbon"]},{t:"application/vnd.kde.kchart",e:["chrt"]},{t:"application/vnd.kde.kformula",e:["kfo"]},{t:"application/vnd.kde.kivio",e:["flw"]},{t:"application/vnd.kde.kontour",e:["kon"]},{t:"application/vnd.kde.kpresenter",e:["kpr","kpt"]},{t:"application/vnd.kde.kspread",e:["ksp"]},{t:"application/vnd.kde.kword",e:["kwd","kwt"]},{t:"application/vnd.kenameaapp",e:["htke"]},{t:"application/vnd.kidspiration",e:["kia"]},{t:"application/vnd.kinar",e:["kne","knp"]},{t:"application/vnd.koan",e:["skp","skd","skt","skm"]},{t:"application/vnd.kodak-descriptor",e:["sse"]},{t:"application/vnd.las.las+xml",e:["lasxml"]},{t:"application/vnd.llamagraphics.life-balance.desktop",e:["lbd"]},{t:"application/vnd.llamagraphics.life-balance.exchange+xml",e:["lbe"]},{t:"application/vnd.lotus-1-2-3",e:["123"]},{t:"application/vnd.lotus-approach",e:["apr"]},{t:"application/vnd.lotus-freelance",e:["pre"]},{t:"application/vnd.lotus-notes",e:["nsf"]},{t:"application/vnd.lotus-organizer",e:["org"]},{t:"application/vnd.lotus-screencam",e:["scm"]},{t:"application/vnd.lotus-wordpro",e:["lwp"]},{t:"application/vnd.macports.portpkg",e:["portpkg"]},{t:"application/vnd.mcd",e:["mcd"]},{t:"application/vnd.medcalcdata",e:["mc1"]},{t:"application/vnd.mediastation.cdkey",e:["cdkey"]},{t:"application/vnd.mfer",e:["mwf"]},{t:"application/vnd.mfmp",e:["mfm"]},{t:"application/vnd.micrografx.flo",e:["flo"]},{t:"application/vnd.micrografx.igx",e:["igx"]},{t:"application/vnd.mif",e:["mif"]},{t:"application/vnd.mobius.daf",e:["daf"]},{t:"application/vnd.mobius.dis",e:["dis"]},{t:"application/vnd.mobius.mbk",e:["mbk"]},{t:"application/vnd.mobius.mqy",e:["mqy"]},{t:"application/vnd.mobius.msl",e:["msl"]},{t:"application/vnd.mobius.plc",e:["plc"]},{t:"application/vnd.mobius.txf",e:["txf"]},{t:"application/vnd.mophun.application",e:["mpn"]},{t:"application/vnd.mophun.certificate",e:["mpc"]},{t:"application/vnd.mozilla.xul+xml",e:["xul"]},{t:"application/vnd.ms-artgalry",e:["cil"]},{t:"application/vnd.ms-cab-compressed",e:["cab"]},{t:"application/vnd.ms-excel",e:["xls","xlm","xla","xlc","xlt","xlw"]},{t:"application/vnd.ms-excel.addin.macroenabled.12",e:["xlam"]},{t:"application/vnd.ms-excel.sheet.binary.macroenabled.12",e:["xlsb"]},{t:"application/vnd.ms-excel.sheet.macroenabled.12",e:["xlsm"]},{t:"application/vnd.ms-excel.template.macroenabled.12",e:["xltm"]},{t:"application/vnd.ms-fontobject",e:["eot"]},{t:"application/vnd.ms-htmlhelp",e:["chm"]},{t:"application/vnd.ms-ims",e:["ims"]},{t:"application/vnd.ms-lrm",e:["lrm"]},{t:"application/vnd.ms-officetheme",e:["thmx"]},{t:"application/vnd.ms-pki.seccat",e:["cat"]},{t:"application/vnd.ms-pki.stl",e:["stl"]},{t:"application/vnd.ms-powerpoint",e:["ppt","pps","pot"]},{t:"application/vnd.ms-powerpoint.addin.macroenabled.12",e:["ppam"]},{t:"application/vnd.ms-powerpoint.presentation.macroenabled.12",e:["pptm"]},{t:"application/vnd.ms-powerpoint.slide.macroenabled.12",e:["sldm"]},{t:"application/vnd.ms-powerpoint.slideshow.macroenabled.12",e:["ppsm"]},{t:"application/vnd.ms-powerpoint.template.macroenabled.12",e:["potm"]},{t:"application/vnd.ms-project",e:["mpp","mpt"]},{t:"application/vnd.ms-word.document.macroenabled.12",e:["docm"]},{t:"application/vnd.ms-word.template.macroenabled.12",e:["dotm"]},{t:"application/vnd.ms-works",e:["wps","wks","wcm","wdb"]},{t:"application/vnd.ms-wpl",e:["wpl"]},{t:"application/vnd.ms-xpsdocument",e:["xps"]},{t:"application/vnd.mseq",e:["mseq"]},{t:"application/vnd.musician",e:["mus"]},{t:"application/vnd.muvee.style",e:["msty"]},{t:"application/vnd.mynfc",e:["taglet"]},{t:"application/vnd.neurolanguage.nlu",e:["nlu"]},{t:"application/vnd.nitf",e:["ntf","nitf"]},{t:"application/vnd.noblenet-directory",e:["nnd"]},{t:"application/vnd.noblenet-sealer",e:["nns"]},{t:"application/vnd.noblenet-web",e:["nnw"]},{t:"application/vnd.nokia.n-gage.data",e:["ngdat"]},{t:"application/vnd.nokia.n-gage.symbian.install",e:["n-gage"]},{t:"application/vnd.nokia.radio-preset",e:["rpst"]},{t:"application/vnd.nokia.radio-presets",e:["rpss"]},{t:"application/vnd.novadigm.edm",e:["edm"]},{t:"application/vnd.novadigm.edx",e:["edx"]},{t:"application/vnd.novadigm.ext",e:["ext"]},{t:"application/vnd.oasis.opendocument.chart",e:["odc"]},{t:"application/vnd.oasis.opendocument.chart-template",e:["otc"]},{t:"application/vnd.oasis.opendocument.database",e:["odb"]},{t:"application/vnd.oasis.opendocument.formula",e:["odf"]},{t:"application/vnd.oasis.opendocument.formula-template",e:["odft"]},{t:"application/vnd.oasis.opendocument.graphics",e:["odg"]},{t:"application/vnd.oasis.opendocument.graphics-template",e:["otg"]},{t:"application/vnd.oasis.opendocument.image",e:["odi"]},{t:"application/vnd.oasis.opendocument.image-template",e:["oti"]},{t:"application/vnd.oasis.opendocument.presentation",e:["odp"]},{t:"application/vnd.oasis.opendocument.presentation-template",e:["otp"]},{t:"application/vnd.oasis.opendocument.spreadsheet",e:["ods"]},{t:"application/vnd.oasis.opendocument.spreadsheet-template",e:["ots"]},{t:"application/vnd.oasis.opendocument.text",e:["odt"]},{t:"application/vnd.oasis.opendocument.text-master",e:["odm"]},{t:"application/vnd.oasis.opendocument.text-template",e:["ott"]},{t:"application/vnd.oasis.opendocument.text-web",e:["oth"]},{t:"application/vnd.olpc-sugar",e:["xo"]},{t:"application/vnd.oma.dd2+xml",e:["dd2"]},{t:"application/vnd.openofficeorg.extension",e:["oxt"]},{t:"application/vnd.openxmlformats-officedocument.presentationml.presentation",e:["pptx"]},{t:"application/vnd.openxmlformats-officedocument.presentationml.slide",e:["sldx"]},{t:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",e:["ppsx"]},{t:"application/vnd.openxmlformats-officedocument.presentationml.template",e:["potx"]},{t:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",e:["xlsx"]},{t:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",e:["xltx"]},{t:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",e:["docx"]},{t:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",e:["dotx"]},{t:"application/vnd.osgeo.mapguide.package",e:["mgp"]},{t:"application/vnd.osgi.dp",e:["dp"]},{t:"application/vnd.osgi.subsystem",e:["esa"]},{t:"application/vnd.palm",e:["pdb","pqa","oprc"]},{t:"application/vnd.pawaafile",e:["paw"]},{t:"application/vnd.pg.format",e:["str"]},{t:"application/vnd.pg.osasli",e:["ei6"]},{t:"application/vnd.picsel",e:["efif"]},{t:"application/vnd.pmi.widget",e:["wg"]},{t:"application/vnd.pocketlearn",e:["plf"]},{t:"application/vnd.powerbuilder6",e:["pbd"]},{t:"application/vnd.previewsystems.box",e:["box"]},{t:"application/vnd.proteus.magazine",e:["mgz"]},{t:"application/vnd.publishare-delta-tree",e:["qps"]},{t:"application/vnd.pvi.ptid1",e:["ptid"]},{t:"application/vnd.quark.quarkxpress",e:["qxd","qxt","qwd","qwt","qxl","qxb"]},{t:"application/vnd.realvnc.bed",e:["bed"]},{t:"application/vnd.recordare.musicxml",e:["mxl"]},{t:"application/vnd.recordare.musicxml+xml",e:["musicxml"]},{t:"application/vnd.rig.cryptonote",e:["cryptonote"]},{t:"application/vnd.rim.cod",e:["cod"]},{t:"application/vnd.rn-realmedia",e:["rm"]},{t:"application/vnd.rn-realmedia-vbr",e:["rmvb"]},{t:"application/vnd.route66.link66+xml",e:["link66"]},{t:"application/vnd.sailingtracker.track",e:["st"]},{t:"application/vnd.seemail",e:["see"]},{t:"application/vnd.sema",e:["sema"]},{t:"application/vnd.semd",e:["semd"]},{t:"application/vnd.semf",e:["semf"]},{t:"application/vnd.shana.informed.formdata",e:["ifm"]},{t:"application/vnd.shana.informed.formtemplate",e:["itp"]},{t:"application/vnd.shana.informed.interchange",e:["iif"]},{t:"application/vnd.shana.informed.package",e:["ipk"]},{t:"application/vnd.simtech-mindmapper",e:["twd","twds"]},{t:"application/vnd.smaf",e:["mmf"]},{t:"application/vnd.smart.teacher",e:["teacher"]},{t:"application/vnd.solent.sdkm+xml",e:["sdkm","sdkd"]},{t:"application/vnd.spotfire.dxp",e:["dxp"]},{t:"application/vnd.spotfire.sfs",e:["sfs"]},{t:"application/vnd.stardivision.calc",e:["sdc"]},{t:"application/vnd.stardivision.draw",e:["sda"]},{t:"application/vnd.stardivision.impress",e:["sdd"]},{t:"application/vnd.stardivision.math",e:["smf"]},{t:"application/vnd.stardivision.writer",e:["sdw","vor"]},{t:"application/vnd.stardivision.writer-global",e:["sgl"]},{t:"application/vnd.stepmania.package",e:["smzip"]},{t:"application/vnd.stepmania.stepchart",e:["sm"]},{t:"application/vnd.sun.xml.calc",e:["sxc"]},{t:"application/vnd.sun.xml.calc.template",e:["stc"]},{t:"application/vnd.sun.xml.draw",e:["sxd"]},{t:"application/vnd.sun.xml.draw.template",e:["std"]},{t:"application/vnd.sun.xml.impress",e:["sxi"]},{t:"application/vnd.sun.xml.impress.template",e:["sti"]},{t:"application/vnd.sun.xml.math",e:["sxm"]},{t:"application/vnd.sun.xml.writer",e:["sxw"]},{t:"application/vnd.sun.xml.writer.global",e:["sxg"]},{t:"application/vnd.sun.xml.writer.template",e:["stw"]},{t:"application/vnd.sus-calendar",e:["sus","susp"]},{t:"application/vnd.svd",e:["svd"]},{t:"application/vnd.symbian.install",e:["sis","sisx"]},{t:"application/vnd.syncml+xml",e:["xsm"]},{t:"application/vnd.syncml.dm+wbxml",e:["bdm"]},{t:"application/vnd.syncml.dm+xml",e:["xdm"]},{t:"application/vnd.tao.intent-module-archive",e:["tao"]},{t:"application/vnd.tcpdump.pcap",e:["pcap","cap","dmp"]},{t:"application/vnd.tmobile-livetv",e:["tmo"]},{t:"application/vnd.trid.tpt",e:["tpt"]},{t:"application/vnd.triscape.mxs",e:["mxs"]},{t:"application/vnd.trueapp",e:["tra"]},{t:"application/vnd.ufdl",e:["ufd","ufdl"]},{t:"application/vnd.uiq.theme",e:["utz"]},{t:"application/vnd.umajin",e:["umj"]},{t:"application/vnd.unity",e:["unityweb"]},{t:"application/vnd.uoml+xml",e:["uoml"]},{t:"application/vnd.vcx",e:["vcx"]},{t:"application/vnd.visio",e:["vsd","vst","vss","vsw"]},{t:"application/vnd.visionary",e:["vis"]},{t:"application/vnd.vsf",e:["vsf"]},{t:"application/vnd.wap.wbxml",e:["wbxml"]},{t:"application/vnd.wap.wmlc",e:["wmlc"]},{t:"application/vnd.wap.wmlscriptc",e:["wmlsc"]},{t:"application/vnd.webturbo",e:["wtb"]},{t:"application/vnd.wolfram.player",e:["nbp"]},{t:"application/vnd.wordperfect",e:["wpd"]},{t:"application/vnd.wqd",e:["wqd"]},{t:"application/vnd.wt.stf",e:["stf"]},{t:"application/vnd.xara",e:["xar"]},{t:"application/vnd.xfdl",e:["xfdl"]},{t:"application/vnd.yamaha.hv-dic",e:["hvd"]},{t:"application/vnd.yamaha.hv-script",e:["hvs"]},{t:"application/vnd.yamaha.hv-voice",e:["hvp"]},{t:"application/vnd.yamaha.openscoreformat",e:["osf"]},{t:"application/vnd.yamaha.openscoreformat.osfpvg+xml",e:["osfpvg"]},{t:"application/vnd.yamaha.smaf-audio",e:["saf"]},{t:"application/vnd.yamaha.smaf-phrase",e:["spf"]},{t:"application/vnd.yellowriver-custom-menu",e:["cmp"]},{t:"application/vnd.zul",e:["zir","zirz"]},{t:"application/vnd.zzazz.deck+xml",e:["zaz"]},{t:"application/voicexml+xml",e:["vxml"]},{t:"application/widget",e:["wgt"]},{t:"application/winhlp",e:["hlp"]},{t:"application/wsdl+xml",e:["wsdl"]},{t:"application/wspolicy+xml",e:["wspolicy"]},{t:"application/x-7z-compressed",e:["7z"]},{t:"application/x-abiword",e:["abw"]},{t:"application/x-ace-compressed",e:["ace"]},{t:"application/x-apple-diskimage",e:["dmg"]},{t:"application/x-authorware-bin",e:["aab","x32","u32","vox"]},{t:"application/x-authorware-map",e:["aam"]},{t:"application/x-authorware-seg",e:["aas"]},{t:"application/x-bcpio",e:["bcpio"]},{t:"application/x-bittorrent",e:["torrent"]},{t:"application/x-blorb",e:["blb","blorb"]},{t:"application/x-bzip",e:["bz"]},{t:"application/x-bzip2",e:["bz2","boz"]},{t:"application/x-cbr",e:["cbr","cba","cbt","cbz","cb7"]},{t:"application/x-cdlink",e:["vcd"]},{t:"application/x-cfs-compressed",e:["cfs"]},{t:"application/x-chat",e:["chat"]},{t:"application/x-chess-pgn",e:["pgn"]},{t:"application/x-conference",e:["nsc"]},{t:"application/x-cpio",e:["cpio"]},{t:"application/x-csh",e:["csh"]},{t:"application/x-debian-package",e:["deb","udeb"]},{t:"application/x-dgc-compressed",e:["dgc"]},{t:"application/x-director",e:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},{t:"application/x-doom",e:["wad"]},{t:"application/x-dtbncx+xml",e:["ncx"]},{t:"application/x-dtbook+xml",e:["dtb"]},{t:"application/x-dtbresource+xml",e:["res"]},{t:"application/x-dvi",e:["dvi"]},{t:"application/x-envoy",e:["evy"]},{t:"application/x-eva",e:["eva"]},{t:"application/x-font-bdf",e:["bdf"]},{t:"application/x-font-ghostscript",e:["gsf"]},{t:"application/x-font-linux-psf",e:["psf"]},{t:"application/x-font-otf",e:["otf"]},{t:"application/x-font-pcf",e:["pcf"]},{t:"application/x-font-snf",e:["snf"]},{t:"application/x-font-ttf",e:["ttf","ttc"]},{t:"application/x-font-type1",e:["pfa","pfb","pfm","afm"]},{t:"application/x-freearc",e:["arc"]},{t:"application/x-futuresplash",e:["spl"]},{t:"application/x-gca-compressed",e:["gca"]},{t:"application/x-glulx",e:["ulx"]},{t:"application/x-gnumeric",e:["gnumeric"]},{t:"application/x-gramps-xml",e:["gramps"]},{t:"application/x-gtar",e:["gtar"]},{t:"application/x-hdf",e:["hdf"]},{t:"application/x-install-instructions",e:["install"]},{t:"application/x-iso9660-image",e:["iso"]},{t:"application/x-java-jnlp-file",e:["jnlp"]},{t:"application/x-latex",e:["latex"]},{t:"application/x-lzh-compressed",e:["lzh","lha"]},{t:"application/x-mie",e:["mie"]},{t:"application/x-mobipocket-ebook",e:["prc","mobi"]},{t:"application/x-ms-application",e:["application"]},{t:"application/x-ms-shortcut",e:["lnk"]},{t:"application/x-ms-wmd",e:["wmd"]},{t:"application/x-ms-wmz",e:["wmz"]},{t:"application/x-ms-xbap",e:["xbap"]},{t:"application/x-msaccess",e:["mdb"]},{t:"application/x-msbinder",e:["obd"]},{t:"application/x-mscardfile",e:["crd"]},{t:"application/x-msclip",e:["clp"]},{t:"application/x-msdownload",e:["exe","dll","com","bat","msi"]},{t:"application/x-msmediaview",e:["mvb","m13","m14"]},{t:"application/x-msmetafile",e:["wmf","wmz","emf","emz"]},{t:"application/x-msmoney",e:["mny"]},{t:"application/x-mspublisher",e:["pub"]},{t:"application/x-msschedule",e:["scd"]},{t:"application/x-msterminal",e:["trm"]},{t:"application/x-mswrite",e:["wri"]},{t:"application/x-netcdf",e:["nc","cdf"]},{t:"application/x-nzb",e:["nzb"]},{t:"application/x-pkcs12",e:["p12","pfx"]},{t:"application/x-pkcs7-certificates",e:["p7b","spc"]},{t:"application/x-pkcs7-certreqresp",e:["p7r"]},{t:"application/x-rar-compressed",e:["rar"]},{t:"application/x-research-info-systems",e:["ris"]},{t:"application/x-sh",e:["sh"]},{t:"application/x-shar",e:["shar"]},{t:"application/x-shockwave-flash",e:["swf"]},{t:"application/x-silverlight-app",e:["xap"]},{t:"application/x-sql",e:["sql"]},{t:"application/x-stuffit",e:["sit"]},{t:"application/x-stuffitx",e:["sitx"]},{t:"application/x-subrip",e:["srt"]},{t:"application/x-sv4cpio",e:["sv4cpio"]},{t:"application/x-sv4crc",e:["sv4crc"]},{t:"application/x-t3vm-image",e:["t3"]},{t:"application/x-tads",e:["gam"]},{t:"application/x-tar",e:["tar"]},{t:"application/x-tcl",e:["tcl"]},{t:"application/x-tex",e:["tex"]},{t:"application/x-tex-tfm",e:["tfm"]},{t:"application/x-texinfo",e:["texinfo","texi"]},{t:"application/x-tgif",e:["obj"]},{t:"application/x-ustar",e:["ustar"]},{t:"application/x-wais-source",e:["src"]},{t:"application/x-x509-ca-cert",e:["der","crt"]},{t:"application/x-xfig",e:["fig"]},{t:"application/x-xliff+xml",e:["xlf"]},{t:"application/x-xpinstall",e:["xpi"]},{t:"application/x-xz",e:["xz"]},{t:"application/x-zmachine",e:["z1","z2","z3","z4","z5","z6","z7","z8"]},{t:"application/xaml+xml",e:["xaml"]},{t:"application/xcap-diff+xml",e:["xdf"]},{t:"application/xenc+xml",e:["xenc"]},{t:"application/xhtml+xml",e:["xhtml","xht"]},{t:"application/xml",e:["xml","xsl"]},{t:"application/xml-dtd",e:["dtd"]},{t:"application/xop+xml",e:["xop"]},{t:"application/xproc+xml",e:["xpl"]},{t:"application/xslt+xml",e:["xslt"]},{t:"application/xspf+xml",e:["xspf"]},{t:"application/xv+xml",e:["mxml","xhvml","xvml","xvm"]},{t:"application/yang",e:["yang"]},{t:"application/yin+xml",e:["yin"]},{t:"application/zip",e:["zip"]},{t:"audio/adpcm",e:["adp"]},{t:"audio/basic",e:["au","snd"]},{t:"audio/midi",e:["mid","midi","kar","rmi"]},{t:"audio/mp4",e:["m4a","mp4a"]},{t:"audio/mpeg",e:["mpga","mp2","mp2a","mp3","m2a","m3a"]},{t:"audio/ogg",e:["oga","ogg","spx"]},{t:"audio/s3m",e:["s3m"]},{t:"audio/silk",e:["sil"]},{t:"audio/vnd.dece.audio",e:["uva","uvva"]},{t:"audio/vnd.digital-winds",e:["eol"]},{t:"audio/vnd.dra",e:["dra"]},{t:"audio/vnd.dts",e:["dts"]},{t:"audio/vnd.dts.hd",e:["dtshd"]},{t:"audio/vnd.lucent.voice",e:["lvp"]},{t:"audio/vnd.ms-playready.media.pya",e:["pya"]},{t:"audio/vnd.nuera.ecelp4800",e:["ecelp4800"]},{t:"audio/vnd.nuera.ecelp7470",e:["ecelp7470"]},{t:"audio/vnd.nuera.ecelp9600",e:["ecelp9600"]},{t:"audio/vnd.rip",e:["rip"]},{t:"audio/webm",e:["weba"]},{t:"audio/x-aac",e:["aac"]},{t:"audio/x-aiff",e:["aif","aiff","aifc"]},{t:"audio/x-caf",e:["caf"]},{t:"audio/x-flac",e:["flac"]},{t:"audio/x-matroska",e:["mka"]},{t:"audio/x-mpegurl",e:["m3u"]},{t:"audio/x-ms-wax",e:["wax"]},{t:"audio/x-ms-wma",e:["wma"]},{t:"audio/x-pn-realaudio",e:["ram","ra"]},{t:"audio/x-pn-realaudio-plugin",e:["rmp"]},{t:"audio/x-wav",e:["wav"]},{t:"audio/wav",e:["wav"]},{t:"audio/wave",e:["wav"]},{t:"audio/xm",e:["xm"]},{t:"chemical/x-cdx",e:["cdx"]},{t:"chemical/x-cif",e:["cif"]},{t:"chemical/x-cmdf",e:["cmdf"]},{t:"chemical/x-cml",e:["cml"]},{t:"chemical/x-csml",e:["csml"]},{t:"chemical/x-xyz",e:["xyz"]},{t:"image/bmp",e:["bmp"]},{t:"image/cgm",e:["cgm"]},{t:"image/g3fax",e:["g3"]},{t:"image/gif",e:["gif"]},{t:"image/ief",e:["ief"]},{t:"image/jpeg",e:["jpeg","jpg","jpe"]},{t:"image/jpg",e:["jpeg","jpg","jpe"]},{t:"image/ktx",e:["ktx"]},{t:"image/png",e:["png"]},{t:"image/prs.btif",e:["btif"]},{t:"image/sgi",e:["sgi"]},{t:"image/svg+xml",e:["svg","svgz"]},{t:"image/tiff",e:["tiff","tif"]},{t:"image/vnd.adobe.photoshop",e:["psd"]},{t:"image/vnd.dece.graphic",e:["uvi","uvvi","uvg","uvvg"]},{t:"image/vnd.djvu",e:["djvu","djv"]},{t:"image/vnd.dvb.subtitle",e:["sub"]},{t:"image/vnd.dwg",e:["dwg"]},{t:"image/vnd.dxf",e:["dxf"]},{t:"image/vnd.fastbidsheet",e:["fbs"]},{t:"image/vnd.fpx",e:["fpx"]},{t:"image/vnd.fst",e:["fst"]},{t:"image/vnd.fujixerox.edmics-mmr",e:["mmr"]},{t:"image/vnd.fujixerox.edmics-rlc",e:["rlc"]},{t:"image/vnd.ms-modi",e:["mdi"]},{t:"image/vnd.ms-photo",e:["wdp"]},{t:"image/vnd.net-fpx",e:["npx"]},{t:"image/vnd.wap.wbmp",e:["wbmp"]},{t:"image/vnd.xiff",e:["xif"]},{t:"image/webp",e:["webp"]},{t:"image/x-3ds",e:["3ds"]},{t:"image/x-cmu-raster",e:["ras"]},{t:"image/x-cmx",e:["cmx"]},{t:"image/x-freehand",e:["fh","fhc","fh4","fh5","fh7"]},{t:"image/x-icon",e:["ico"]},{t:"image/x-mrsid-image",e:["sid"]},{t:"image/x-pcx",e:["pcx"]},{t:"image/x-pict",e:["pic","pct"]},{t:"image/x-portable-anymap",e:["pnm"]},{t:"image/x-portable-bitmap",e:["pbm"]},{t:"image/x-portable-graymap",e:["pgm"]},{t:"image/x-portable-pixmap",e:["ppm"]},{t:"image/x-rgb",e:["rgb"]},{t:"image/x-tga",e:["tga"]},{t:"image/x-xbitmap",e:["xbm"]},{t:"image/x-xpixmap",e:["xpm"]},{t:"image/x-xwindowdump",e:["xwd"]},{t:"message/rfc822",e:["eml","mime"]},{t:"model/iges",e:["igs","iges"]},{t:"model/mesh",e:["msh","mesh","silo"]},{t:"model/vnd.collada+xml",e:["dae"]},{t:"model/vnd.dwf",e:["dwf"]},{t:"model/vnd.gdl",e:["gdl"]},{t:"model/vnd.gtw",e:["gtw"]},{t:"model/vnd.mts",e:["mts"]},{t:"model/vnd.vtu",e:["vtu"]},{t:"model/vrml",e:["wrl","vrml"]},{t:"model/x3d+binary",e:["x3db","x3dbz"]},{t:"model/x3d+vrml",e:["x3dv","x3dvz"]},{t:"model/x3d+xml",e:["x3d","x3dz"]},{t:"text/cache-manifest",e:["appcache"]},{t:"text/calendar",e:["ics","ifb"]},{t:"text/css",e:["css"]},{t:"text/csv",e:["csv"]},{t:"text/html",e:["html","htm"]},{t:"text/n3",e:["n3"]},{t:"text/plain",e:["txt","text","conf","def","list","log","in"]},{t:"text/prs.lines.tag",e:["dsc"]},{t:"text/richtext",e:["rtx"]},{t:"text/sgml",e:["sgml","sgm"]},{t:"text/tab-separated-values",e:["tsv"]},{t:"text/troff",e:["t","tr","roff","man","me","ms"]},{t:"text/turtle",e:["ttl"]},{t:"text/uri-list",e:["uri","uris","urls"]},{t:"text/vcard",e:["vcard"]},{t:"text/vnd.curl",e:["curl"]},{t:"text/vnd.curl.dcurl",e:["dcurl"]},{t:"text/vnd.curl.mcurl",e:["mcurl"]},{t:"text/vnd.curl.scurl",e:["scurl"]},{t:"text/vnd.dvb.subtitle",e:["sub"]},{t:"text/vnd.fly",e:["fly"]},{t:"text/vnd.fmi.flexstor",e:["flx"]},{t:"text/vnd.graphviz",e:["gv"]},{t:"text/vnd.in3d.3dml",e:["3dml"]},{t:"text/vnd.in3d.spot",e:["spot"]},{t:"text/vnd.sun.j2me.app-descriptor",e:["jad"]},{t:"text/vnd.wap.wml",e:["wml"]},{t:"text/vnd.wap.wmlscript",e:["wmls"]},{t:"text/x-asm",e:["s","asm"]},{t:"text/x-c",e:["c","cc","cxx","cpp","h","hh","dic"]},{t:"text/x-fortran",e:["f","for","f77","f90"]},{t:"text/x-java-source",e:["java"]},{t:"text/x-nfo",e:["nfo"]},{t:"text/x-opml",e:["opml"]},{t:"text/x-pascal",e:["p","pas"]},{t:"text/x-setext",e:["etx"]},{t:"text/x-sfv",e:["sfv"]},{t:"text/x-uuencode",e:["uu"]},{t:"text/x-vcalendar",e:["vcs"]},{t:"text/x-vcard",e:["vcf"]},{t:"video/3gpp",e:["3gp"]},{t:"video/3gpp2",e:["3g2"]},{t:"video/h261",e:["h261"]},{t:"video/h263",e:["h263"]},{t:"video/h264",e:["h264"]},{t:"video/jpeg",e:["jpgv"]},{t:"video/jpm",e:["jpm","jpgm"]},{t:"video/mj2",e:["mj2","mjp2"]},{t:"video/mp4",e:["mp4","mp4v","mpg4"]},{t:"video/mpeg",e:["mpeg","mpg","mpe","m1v","m2v"]},{t:"video/ogg",e:["ogv"]},{t:"video/quicktime",e:["qt","mov"]},{t:"video/vnd.dece.hd",e:["uvh","uvvh"]},{t:"video/vnd.dece.mobile",e:["uvm","uvvm"]},{t:"video/vnd.dece.pd",e:["uvp","uvvp"]},{t:"video/vnd.dece.sd",e:["uvs","uvvs"]},{t:"video/vnd.dece.video",e:["uvv","uvvv"]},{t:"video/vnd.dvb.file",e:["dvb"]},{t:"video/vnd.fvt",e:["fvt"]},{t:"video/vnd.mpegurl",e:["mxu","m4u"]},{t:"video/vnd.ms-playready.media.pyv",e:["pyv"]},{t:"video/vnd.uvvu.mp4",e:["uvu","uvvu"]},{t:"video/vnd.vivo",e:["viv"]},{t:"video/webm",e:["webm"]},{t:"video/x-f4v",e:["f4v"]},{t:"video/x-fli",e:["fli"]},{t:"video/x-flv",e:["flv"]},{t:"video/x-m4v",e:["m4v"]},{t:"video/x-matroska",e:["mkv","mk3d","mks"]},{t:"video/x-mng",e:["mng"]},{t:"video/x-ms-asf",e:["asf","asx"]},{t:"video/x-ms-vob",e:["vob"]},{t:"video/x-ms-wm",e:["wm"]},{t:"video/x-ms-wmv",e:["wmv"]},{t:"video/x-ms-wmx",e:["wmx"]},{t:"video/x-ms-wvx",e:["wvx"]},{t:"video/x-msvideo",e:["avi"]},{t:"video/x-sgi-movie",e:["movie"]},{t:"video/x-smv",e:["smv"]},{t:"x-conference/x-cooltalk",e:["ice"]},{t:"text/markdown",e:["md","markdown"]}];class V{static fromFileExtension(e){e=e.toLowerCase();for(let i=0;i<O.length;i++){const a=O[i];if(a.e.indexOf(e)>=0)return a.t}return null}static fromFilename(e){if(!e)return null;const i=e.trim().split(".");return i.length<=1?null:V.fromFileExtension(i[i.length-1])}static toFileExtension(e){e=e.toLowerCase();for(let i=0;i<O.length;i++){const a=O[i];if(e==a.t){for(let o=0;o<a.e.length;o++)if(a.e[o].length==3)return a.e[o];return a.e[0]}}return null}static fromDataUrl(e){const i="text/plain";let o=e.substr(0,e.indexOf(",")).split(";")[0];const s=o.split(":");return s.length<=1?i:(o=s[1],o.indexOf("/")>=0?o:i)}}const De=()=>{const[t,e]=n.exports.useState([]),[i,a]=j(async()=>{e((await w.pageToAllList(v.resourceApi.list.bind(v.resourceApi),{fields:["id","title","file_extension","mime"]})).filter(s=>!s.file_extension).map(s=>A(_({},s),{file_extension:V.toFileExtension(s.mime)})))});async function o(){const s=R.loading(d.t("fixFileExtension.action.progress"));try{await S.forEach(t,et(async p=>{await v.resourceApi.update({id:p.id,file_extension:p.file_extension})},10)),e([]),R.success(d.t("fixFileExtension.action.complete"))}finally{s()}}return n.exports.createElement(E,{title:d.t("fixFileExtension.title"),extra:n.exports.createElement(B,null,n.exports.createElement(h,{onClick:a},d.t("common.action.check")),n.exports.createElement(h,{disabled:t.length===0,onClick:o},d.t("fixFileExtension.action.fix")))},n.exports.createElement(x,{dataSource:t!=null?t:[],renderItem:s=>n.exports.createElement(x.Item,{key:s.id,extra:s.mime.startsWith("image/")&&n.exports.createElement(it,{src:H(s.id),width:300})},n.exports.createElement(x.Item.Meta,{title:s.title,description:`${d.t("fixFileExtension.tip")}${s.file_extension}`})),loading:{spinning:i.loading}}))};function Be(){return[{path:"/",component:le,exact:!0,title:d.t("home.title")},{path:"/settings",component:je,title:d.t("settings.title")},{path:"/unusedResource",component:Re,title:d.t("unusedResource.title")},{path:"/notFoundResource",component:Ce,title:d.t("notFoundResource.title")},{path:"/convertExternalLink",component:Oe,title:d.t("convertExternalLink.title")},{path:"/checkParentNotebook",component:Ue,title:d.t("checkParentNotebook.title")},{path:"/fixFileExtension",component:De,title:d.t("fixFileExtension.title")}]}var Je={"common.action.check":"Check","common.action.open":"Open","common.action.remove":"Remove","common.action.download":"Download","home.title":"Home","settings.title":"Security Settings","settings.form.token":"Authorization token","settings.form.port":"Port","settings.action.submit":"Submit","settings.msg.success":"Setup was successful","settings.msg.error":"Unable to access joplin web clipper api","unusedResource.title":"Check for unused resources","unusedResource.listEmptyText":"No unused attachment resources were found","unusedResource.action.removeAll":"Delete all","unusedResource.msg.process":"[{{rate}}/{{all}}] is checking for resources {{title}}","unusedResource.msg.error":"Please check joplin token/port configuration","notFoundResource.title":"Check notes for references to a failed resource","notFoundResource.listEmptyText":"No reference to a failed resource was found","notFoundResource.unknownFileName":"Unknown file name {{id}}","convertExternalLink.title":"Convert External Link to Internal Reference Notes","convertExternalLink.action.convert":"Convert","convertExternalLink.msg.success":"Conversion complete","checkParentNotebook.title":"Check notes without parent directory","checkParentNotebook.listEmptyText":"No abnormal notes found in the parent directory","fixFileExtension.title":"Fix missing resource file extension field","fixFileExtension.action.progress":"Fixing in progress...","fixFileExtension.action.complete":"Fixing completed","fixFileExtension.action.fix":"Fixing","fixFileExtension.tip":"Guess the extension: "},He={"common.action.check":"\u68C0\u67E5","common.action.open":"\u6253\u5F00","common.action.remove":"\u5220\u9664","common.action.download":"\u4E0B\u8F7D","home.title":"\u9996\u9875","settings.title":"\u5B89\u5168\u8BBE\u7F6E","settings.form.token":"\u6388\u6743\u4EE4\u724C","settings.form.port":"\u7AEF\u53E3","settings.action.submit":"\u63D0\u4EA4","settings.msg.success":"\u8BBE\u7F6E\u6210\u529F","settings.msg.error":"\u65E0\u6CD5\u8BBF\u95EE joplin web clipper api","unusedResource.title":"\u68C0\u67E5\u672A\u4F7F\u7528\u7684\u8D44\u6E90","unusedResource.listEmptyText":"\u6CA1\u6709\u627E\u5230\u4EFB\u4F55\u672A\u4F7F\u7528\u7684\u9644\u4EF6\u8D44\u6E90","unusedResource.action.removeAll":"\u5220\u9664\u5168\u90E8","unusedResource.msg.process":"[{{rate}}/{{all}}] \u6B63\u5728\u68C0\u67E5\u8D44\u6E90 {{title}}","unusedResource.msg.error":"\u8BF7\u68C0\u67E5 joplin token/port \u914D\u7F6E","notFoundResource.title":"\u68C0\u67E5\u7B14\u8BB0\u4E2D\u5F15\u7528\u5931\u6548\u7684\u8D44\u6E90","notFoundResource.listEmptyText":"\u6CA1\u6709\u627E\u5230\u4EFB\u4F55\u5F15\u7528\u5931\u6548\u7684\u8D44\u6E90","notFoundResource.unknownFileName":"\u672A\u77E5\u6587\u4EF6\u540D {{id}}","convertExternalLink.title":"\u8F6C\u6362\u5916\u90E8\u94FE\u63A5\u4E3A\u5185\u90E8\u5F15\u7528\u7B14\u8BB0","convertExternalLink.action.convert":"\u8F6C\u6362","convertExternalLink.msg.success":"\u8F6C\u6362\u5B8C\u6210","checkParentNotebook.title":"\u68C0\u67E5\u6CA1\u6709\u7236\u7EA7\u76EE\u5F55\u7684\u7B14\u8BB0","checkParentNotebook.listEmptyText":"\u6CA1\u6709\u68C0\u67E5\u5230\u7236\u76EE\u5F55\u5F02\u5E38\u7684\u7B14\u8BB0","fixFileExtension.title":"\u4FEE\u590D\u8D44\u6E90\u6587\u4EF6\u6269\u5C55\u540D\u5B57\u6BB5\u7F3A\u5931","fixFileExtension.action.progress":"\u6B63\u5728\u4FEE\u590D\u4E2D...","fixFileExtension.action.complete":"\u4FEE\u590D\u5B8C\u6210","fixFileExtension.action.fix":"\u4FEE\u590D","fixFileExtension.tip":"\u731C\u6D4B\u6269\u5C55\u540D: "};const Ge=()=>{const t=pt(),[{value:e},i]=j(async p=>{console.log("language: ",p),await d.init({en:Je,zhCN:He},p);const l=P(p);return Be().map(r=>A(_({},r),{path:Ut.join(l,r.path)}))},[t]);Dt(()=>i(t));const a=X(),o=Y();async function s(p){const l=a.pathname.replace(P(t),P(p));console.log("path: ",t,p,l),await i(p),o.push(l)}return n.exports.createElement(C,{className:I.app},n.exports.createElement(C.Sider,{className:I.sider,width:"max-content"},n.exports.createElement("h2",{className:I.logo},"Joplin Batch"),n.exports.createElement(ot,null,e&&e.map(p=>n.exports.createElement(ot.Item,{key:p.path},n.exports.createElement(Bt,{to:p.path},p.title))))),n.exports.createElement(C,null,n.exports.createElement(C.Header,{className:I.header},n.exports.createElement(Jt,{options:[{label:"English",value:k.En},{label:"\u4E2D\u6587",value:k.ZhCN}],value:t,onChange:s})),n.exports.createElement(C.Content,{className:I.main},n.exports.createElement(n.exports.Suspense,{fallback:"loading..."},Ht(e)))))};function Ve(t={}){const{immediate:e=!1,onNeedRefresh:i,onOfflineReady:a,onRegistered:o,onRegisterError:s}=t;let p,l;const r=async(m=!0)=>{m&&(p==null||p.addEventListener("controlling",u=>{u.isUpdate&&window.location.reload()})),l&&l.waiting&&await Vt(l.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){p=new Gt("/sw.js",{scope:"/"}),p.addEventListener("activated",m=>{m.isUpdate||a==null||a()});{const m=()=>{i==null||i()};p.addEventListener("waiting",m),p.addEventListener("externalwaiting",m)}p.register({immediate:e}).then(m=>{l=m,o==null||o(m)}).catch(m=>{s==null||s(m)})}return r}function Ke(t={}){const{immediate:e=!0,onNeedRefresh:i,onOfflineReady:a,onRegistered:o,onRegisterError:s}=t,[p,l]=n.exports.useState(!1),[r,m]=n.exports.useState(!1),u=Ve({immediate:e,onOfflineReady(){m(!0),a==null||a()},onNeedRefresh(){l(!0),i==null||i()},onRegistered:o,onRegisterError:s});return{needRefresh:[p,l],offlineReady:[r,m],updateServiceWorker:u}}const Ze=()=>{const t="__DATE__",{offlineReady:[e,i],needRefresh:[a,o],updateServiceWorker:s}=Ke({onRegistered(l){console.log("SW Registered: "+l)},onRegisterError(l){console.log("SW registration error",l)}}),p=()=>{i(!1),o(!1)};return b.createElement("div",{className:"ReloadPrompt-container"},(e||a)&&b.createElement("div",{className:"ReloadPrompt-toast"},b.createElement("div",{className:"ReloadPrompt-message"},e?b.createElement("span",null,"App ready to work offline"):b.createElement("span",null,"New content available, click on reload button to update.")),a&&b.createElement("button",{className:"ReloadPrompt-toast-button",onClick:()=>s(!0)},"Reload"),b.createElement("button",{className:"ReloadPrompt-toast-button",onClick:()=>p()},"Close")),b.createElement("div",{className:"ReloadPrompt-date"},t))},Qe=()=>n.exports.createElement(Kt,null,n.exports.createElement(Ge,null),n.exports.createElement(Ze,null));Zt.render(b.createElement(b.StrictMode,null,b.createElement(Qe,null)),document.getElementById("root"));
