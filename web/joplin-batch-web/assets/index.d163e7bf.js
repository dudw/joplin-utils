var jn=Object.defineProperty,$n=Object.defineProperties;var Un=Object.getOwnPropertyDescriptors;var Et=Object.getOwnPropertySymbols;var Yn=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable;var Lt=(r,n,e)=>n in r?jn(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e,et=(r,n)=>{for(var e in n||(n={}))Yn.call(n,e)&&Lt(r,e,n[e]);if(Et)for(var e of Et(n))Qn.call(n,e)&&Lt(r,e,n[e]);return r},tt=(r,n)=>$n(r,Un(n));import{aA as Vn,r as F,as as jt,z as je,B as Jn}from"./index.edaecf24.js";import{n as Kn,j as we,B as $t,o as qn}from"./joplinApiGenerator.4f047005.js";import{m as Nt}from"./index.esm.af52872f.js";import{p as Gn}from"./immer.esm.d3122d4a.js";import{C as Hn}from"./index.1756fe8e.js";import{I as zn}from"./index.e4a58326.js";import{L as he}from"./index.d471ed57.js";import{T as $e}from"./index.f139cf79.js";import{S as Zn}from"./index.c83a5ab7.js";import"./TextArea.f1f4872f.js";import"./EyeOutlined.ed624379.js";function Xn(){return new Worker("./assets/MarkdownLinkUtil.409fecb5.js",{type:"module"})}const Ut=Symbol("Comlink.proxy"),er=Symbol("Comlink.endpoint"),tr=Symbol("Comlink.releaseProxy"),rt=Symbol("Comlink.thrown"),Yt=r=>typeof r=="object"&&r!==null||typeof r=="function",nr={canHandle:r=>Yt(r)&&r[Ut],serialize(r){const{port1:n,port2:e}=new MessageChannel;return Vt(r,n),[e,[e]]},deserialize(r){return r.start(),Kt(r)}},rr={canHandle:r=>Yt(r)&&rt in r,serialize({value:r}){let n;return r instanceof Error?n={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:n={isError:!1,value:r},[n,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},Qt=new Map([["proxy",nr],["throw",rr]]);function Vt(r,n=self){n.addEventListener("message",function e(i){if(!i||!i.data)return;const{id:t,type:a,path:s}=Object.assign({path:[]},i.data),o=(i.data.argumentList||[]).map(ue);let u;try{const l=s.slice(0,-1).reduce((f,v)=>f[v],r),c=s.reduce((f,v)=>f[v],r);switch(a){case"GET":u=c;break;case"SET":l[s.slice(-1)[0]]=ue(i.data.value),u=!0;break;case"APPLY":u=c.apply(l,o);break;case"CONSTRUCT":{const f=new c(...o);u=or(f)}break;case"ENDPOINT":{const{port1:f,port2:v}=new MessageChannel;Vt(r,v),u=sr(f,[f])}break;case"RELEASE":u=void 0;break;default:return}}catch(l){u={value:l,[rt]:0}}Promise.resolve(u).catch(l=>({value:l,[rt]:0})).then(l=>{const[c,f]=lt(l);n.postMessage(Object.assign(Object.assign({},c),{id:t}),f),a==="RELEASE"&&(n.removeEventListener("message",e),Jt(n))})}),n.start&&n.start()}function ar(r){return r.constructor.name==="MessagePort"}function Jt(r){ar(r)&&r.close()}function Kt(r,n){return at(r,[],n)}function Be(r){if(r)throw new Error("Proxy has been released and is not useable")}function at(r,n=[],e=function(){}){let i=!1;const t=new Proxy(e,{get(a,s){if(Be(i),s===tr)return()=>ce(r,{type:"RELEASE",path:n.map(o=>o.toString())}).then(()=>{Jt(r),i=!0});if(s==="then"){if(n.length===0)return{then:()=>t};const o=ce(r,{type:"GET",path:n.map(u=>u.toString())}).then(ue);return o.then.bind(o)}return at(r,[...n,s])},set(a,s,o){Be(i);const[u,l]=lt(o);return ce(r,{type:"SET",path:[...n,s].map(c=>c.toString()),value:u},l).then(ue)},apply(a,s,o){Be(i);const u=n[n.length-1];if(u===er)return ce(r,{type:"ENDPOINT"}).then(ue);if(u==="bind")return at(r,n.slice(0,-1));const[l,c]=At(o);return ce(r,{type:"APPLY",path:n.map(f=>f.toString()),argumentList:l},c).then(ue)},construct(a,s){Be(i);const[o,u]=At(s);return ce(r,{type:"CONSTRUCT",path:n.map(l=>l.toString()),argumentList:o},u).then(ue)}});return t}function ir(r){return Array.prototype.concat.apply([],r)}function At(r){const n=r.map(lt);return[n.map(e=>e[0]),ir(n.map(e=>e[1]))]}const qt=new WeakMap;function sr(r,n){return qt.set(r,n),r}function or(r){return Object.assign(r,{[Ut]:!0})}function lt(r){for(const[n,e]of Qt)if(e.canHandle(r)){const[i,t]=e.serialize(r);return[{type:"HANDLER",name:n,value:i},t]}return[{type:"RAW",value:r},qt.get(r)||[]]}function ue(r){switch(r.type){case"HANDLER":return Qt.get(r.name).deserialize(r.value);case"RAW":return r.value}}function ce(r,n,e){return new Promise(i=>{const t=ur();r.addEventListener("message",function a(s){!s.data||!s.data.id||s.data.id!==t||(r.removeEventListener("message",a),i(s.data))}),r.start&&r.start(),r.postMessage(Object.assign({id:t},n),e)})}function ur(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class ft{constructor(){this.markdownLinkUtilWorker=Kt(new Xn)}async search(n){const e=await Kn.pageToAllList(we.searchApi.search.bind(we.searchApi),{query:`body:"${n}"`,fields:["id","title","body","user_updated_time"],order_by:"user_updated_time",order_dir:"DESC"});return await Nt.map(e,async i=>{const t=await this.markdownLinkUtilWorker.parseLink(i.body);return Reflect.deleteProperty(i,"body"),tt(et({},i),{urls:await ft.mapContentLinks(t,n)})})}static mapContentLinks(n,e){return Nt.map(n.filter(i=>i.url.startsWith(e)),async i=>{if(!i.title)return i;const t=(await we.searchApi.search({query:`title:"${i.title}"`,limit:3,fields:["id","title"]})).items;return tt(et({},i),{matchNotes:t})})}async convert(n,e){const i=await we.noteApi.get(n,["id","body"]),t=await this.markdownLinkUtilWorker.convertLink(i.body,e);await we.noteApi.update({id:i.id,body:t,user_updated_time:Date.now()})}}const lr="_sub1_sym9i_9",fr="_sub2_sym9i_15";var Gt={sub1:lr,sub2:fr};function q(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?q=function(n){return typeof n}:q=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},q(r)}function L(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function Mt(r,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function A(r,n,e){return n&&Mt(r.prototype,n),e&&Mt(r,e),r}function $(r,n,e){return n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function T(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),n&&Le(r,n)}function j(r){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(r)}function Le(r,n){return Le=Object.setPrototypeOf||function(i,t){return i.__proto__=t,i},Le(r,n)}function Ht(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ue(r,n,e){return Ht()?Ue=Reflect.construct:Ue=function(t,a,s){var o=[null];o.push.apply(o,a);var u=Function.bind.apply(t,o),l=new u;return s&&Le(l,s.prototype),l},Ue.apply(null,arguments)}function cr(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function it(r){var n=typeof Map=="function"?new Map:void 0;return it=function(i){if(i===null||!cr(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n!="undefined"){if(n.has(i))return n.get(i);n.set(i,t)}function t(){return Ue(i,arguments,j(this).constructor)}return t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Le(t,i)},it(r)}function H(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function zt(r,n){return n&&(typeof n=="object"||typeof n=="function")?n:H(r)}function C(r){var n=Ht();return function(){var i=j(r),t;if(n){var a=j(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return zt(this,t)}}function vr(r,n){for(;!Object.prototype.hasOwnProperty.call(r,n)&&(r=j(r),r!==null););return r}function J(r,n,e){return typeof Reflect!="undefined"&&Reflect.get?J=Reflect.get:J=function(t,a,s){var o=vr(t,a);if(!!o){var u=Object.getOwnPropertyDescriptor(o,a);return u.get?u.get.call(s):u.value}},J(r,n,e||r)}function Te(r,n){return Zt(r)||pr(r,n)||ct(r,n)||Xt()}function be(r){return Zt(r)||hr(r)||ct(r)||Xt()}function Zt(r){if(Array.isArray(r))return r}function hr(r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(r))return Array.from(r)}function pr(r,n){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(r)))){var e=[],i=!0,t=!1,a=void 0;try{for(var s=r[Symbol.iterator](),o;!(i=(o=s.next()).done)&&(e.push(o.value),!(n&&e.length===n));i=!0);}catch(u){t=!0,a=u}finally{try{!i&&s.return!=null&&s.return()}finally{if(t)throw a}}return e}}function ct(r,n){if(!!r){if(typeof r=="string")return It(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return It(r,n)}}function It(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=r[e];return i}function Xt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(r,n){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=ct(r))||n&&r&&typeof r.length=="number"){e&&(r=e);var i=0,t=function(){};return{s:t,n:function(){return i>=r.length?{done:!0}:{done:!1,value:r[i++]}},e:function(u){throw u},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,o;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(s)throw o}}}}var B={ANCHOR:"&",COMMENT:"#",TAG:"!",DIRECTIVES_END:"-",DOCUMENT_END:"."},p={ALIAS:"ALIAS",BLANK_LINE:"BLANK_LINE",BLOCK_FOLDED:"BLOCK_FOLDED",BLOCK_LITERAL:"BLOCK_LITERAL",COMMENT:"COMMENT",DIRECTIVE:"DIRECTIVE",DOCUMENT:"DOCUMENT",FLOW_MAP:"FLOW_MAP",FLOW_SEQ:"FLOW_SEQ",MAP:"MAP",MAP_KEY:"MAP_KEY",MAP_VALUE:"MAP_VALUE",PLAIN:"PLAIN",QUOTE_DOUBLE:"QUOTE_DOUBLE",QUOTE_SINGLE:"QUOTE_SINGLE",SEQ:"SEQ",SEQ_ITEM:"SEQ_ITEM"},Ye="tag:yaml.org,2002:",ie={MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"};function Tt(r){for(var n=[0],e=r.indexOf(`
`);e!==-1;)e+=1,n.push(e),e=r.indexOf(`
`,e);return n}function en(r){var n,e;return typeof r=="string"?(n=Tt(r),e=r):(Array.isArray(r)&&(r=r[0]),r&&r.context&&(r.lineStarts||(r.lineStarts=Tt(r.context.src)),n=r.lineStarts,e=r.context.src)),{lineStarts:n,src:e}}function st(r,n){if(typeof r!="number"||r<0)return null;var e=en(n),i=e.lineStarts,t=e.src;if(!i||!t||r>t.length)return null;for(var a=0;a<i.length;++a){var s=i[a];if(r<s)return{line:a,col:r-i[a-1]+1};if(r===s)return{line:a+1,col:1}}var o=i.length;return{line:o,col:r-i[o-1]+1}}function gr(r,n){var e=en(n),i=e.lineStarts,t=e.src;if(!i||!(r>=1)||r>i.length)return null;for(var a=i[r-1],s=i[r];s&&s>a&&t[s-1]===`
`;)--s;return t.slice(a,s)}function dr(r,n){var e=r.start,i=r.end,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:80,a=gr(e.line,n);if(!a)return null;var s=e.col;if(a.length>t)if(s<=t-10)a=a.substr(0,t-1)+"\u2026";else{var o=Math.round(t/2);a.length>s+o&&(a=a.substr(0,s+o-1)+"\u2026"),s-=a.length-t,a="\u2026"+a.substr(1-t)}var u=1,l="";i&&(i.line===e.line&&s+(i.col-e.col)<=t+1?u=i.col-e.col:(u=Math.min(a.length+1,t)-s,l="\u2026"));var c=s>1?" ".repeat(s-1):"",f="^".repeat(u);return"".concat(a,`
`).concat(c).concat(f).concat(l)}var _=function(){function r(n,e){L(this,r),this.start=n,this.end=e||n}return A(r,[{key:"isEmpty",value:function(){return typeof this.start!="number"||!this.end||this.end<=this.start}},{key:"setOrigRange",value:function(e,i){var t=this.start,a=this.end;if(e.length===0||a<=e[0])return this.origStart=t,this.origEnd=a,i;for(var s=i;s<e.length&&!(e[s]>t);)++s;this.origStart=t+s;for(var o=s;s<e.length&&!(e[s]>=a);)++s;return this.origEnd=a+s,o}}],[{key:"copy",value:function(e){return new r(e.start,e.end)}}]),r}(),y=function(){function r(n,e,i){L(this,r),Object.defineProperty(this,"context",{value:i||null,writable:!0}),this.error=null,this.range=null,this.valueRange=null,this.props=e||[],this.type=n,this.value=null}return A(r,[{key:"getPropValue",value:function(e,i,t){if(!this.context)return null;var a=this.context.src,s=this.props[e];return s&&a[s.start]===i?a.slice(s.start+(t?1:0),s.end):null}},{key:"anchor",get:function(){for(var e=0;e<this.props.length;++e){var i=this.getPropValue(e,B.ANCHOR,!0);if(i!=null)return i}return null}},{key:"comment",get:function(){for(var e=[],i=0;i<this.props.length;++i){var t=this.getPropValue(i,B.COMMENT,!0);t!=null&&e.push(t)}return e.length>0?e.join(`
`):null}},{key:"commentHasRequiredWhitespace",value:function(e){var i=this.context.src;if(this.header&&e===this.header.end||!this.valueRange)return!1;var t=this.valueRange.end;return e!==t||r.atBlank(i,t-1)}},{key:"hasComment",get:function(){if(this.context){for(var e=this.context.src,i=0;i<this.props.length;++i)if(e[this.props[i].start]===B.COMMENT)return!0}return!1}},{key:"hasProps",get:function(){if(this.context){for(var e=this.context.src,i=0;i<this.props.length;++i)if(e[this.props[i].start]!==B.COMMENT)return!0}return!1}},{key:"includesTrailingLines",get:function(){return!1}},{key:"jsonLike",get:function(){var e=[p.FLOW_MAP,p.FLOW_SEQ,p.QUOTE_DOUBLE,p.QUOTE_SINGLE];return e.indexOf(this.type)!==-1}},{key:"rangeAsLinePos",get:function(){if(!(!this.range||!this.context)){var e=st(this.range.start,this.context.root);if(!!e){var i=st(this.range.end,this.context.root);return{start:e,end:i}}}}},{key:"rawValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,i=e.start,t=e.end;return this.context.src.slice(i,t)}},{key:"tag",get:function(){for(var e=0;e<this.props.length;++e){var i=this.getPropValue(e,B.TAG,!1);if(i!=null){if(i[1]==="<")return{verbatim:i.slice(2,-1)};var t=i.match(/^(.*!)([^!]*)$/),a=Te(t,3);a[0];var s=a[1],o=a[2];return{handle:s,suffix:o}}}return null}},{key:"valueRangeContainsNewline",get:function(){if(!this.valueRange||!this.context)return!1;for(var e=this.valueRange,i=e.start,t=e.end,a=this.context.src,s=i;s<t;++s)if(a[s]===`
`)return!0;return!1}},{key:"parseComment",value:function(e){var i=this.context.src;if(i[e]===B.COMMENT){var t=r.endOfLine(i,e+1),a=new _(e,t);return this.props.push(a),t}return e}},{key:"setOrigRanges",value:function(e,i){return this.range&&(i=this.range.setOrigRange(e,i)),this.valueRange&&this.valueRange.setOrigRange(e,i),this.props.forEach(function(t){return t.setOrigRange(e,i)}),i}},{key:"toString",value:function(){var e=this.context.src,i=this.range,t=this.value;if(t!=null)return t;var a=e.slice(i.start,i.end);return r.addStringTerminator(e,i.end,a)}}],[{key:"addStringTerminator",value:function(e,i,t){if(t[t.length-1]===`
`)return t;var a=r.endOfWhiteSpace(e,i);return a>=e.length||e[a]===`
`?t+`
`:t}},{key:"atDocumentBoundary",value:function(e,i,t){var a=e[i];if(!a)return!0;var s=e[i-1];if(s&&s!==`
`)return!1;if(t){if(a!==t)return!1}else if(a!==B.DIRECTIVES_END&&a!==B.DOCUMENT_END)return!1;var o=e[i+1],u=e[i+2];if(o!==a||u!==a)return!1;var l=e[i+3];return!l||l===`
`||l==="	"||l===" "}},{key:"endOfIdentifier",value:function(e,i){for(var t=e[i],a=t==="<",s=a?[`
`,"	"," ",">"]:[`
`,"	"," ","[","]","{","}",","];t&&s.indexOf(t)===-1;)t=e[i+=1];return a&&t===">"&&(i+=1),i}},{key:"endOfIndent",value:function(e,i){for(var t=e[i];t===" ";)t=e[i+=1];return i}},{key:"endOfLine",value:function(e,i){for(var t=e[i];t&&t!==`
`;)t=e[i+=1];return i}},{key:"endOfWhiteSpace",value:function(e,i){for(var t=e[i];t==="	"||t===" ";)t=e[i+=1];return i}},{key:"startOfLine",value:function(e,i){var t=e[i-1];if(t===`
`)return i;for(;t&&t!==`
`;)t=e[i-=1];return i+1}},{key:"endOfBlockIndent",value:function(e,i,t){var a=r.endOfIndent(e,t);if(a>t+i)return a;var s=r.endOfWhiteSpace(e,a),o=e[s];return!o||o===`
`?s:null}},{key:"atBlank",value:function(e,i,t){var a=e[i];return a===`
`||a==="	"||a===" "||t&&!a}},{key:"nextNodeIsIndented",value:function(e,i,t){return!e||i<0?!1:i>0?!0:t&&e==="-"}},{key:"normalizeOffset",value:function(e,i){var t=e[i];return t?t!==`
`&&e[i-1]===`
`?i-1:r.endOfWhiteSpace(e,i):i}},{key:"foldNewline",value:function(e,i,t){for(var a=0,s=!1,o="",u=e[i+1];u===" "||u==="	"||u===`
`;){switch(u){case`
`:a=0,i+=1,o+=`
`;break;case"	":a<=t&&(s=!0),i=r.endOfWhiteSpace(e,i+2)-1;break;case" ":a+=1,i+=1;break}u=e[i+1]}return o||(o=" "),u&&a<=t&&(s=!0),{fold:o,offset:i,error:s}}}]),r}(),ge=function(r){T(e,r);var n=C(e);function e(i,t,a){var s;if(L(this,e),!a||!(t instanceof y))throw new Error("Invalid arguments for new ".concat(i));return s=n.call(this),s.name=i,s.message=a,s.source=t,s}return A(e,[{key:"makePretty",value:function(){if(!!this.source){this.nodeType=this.source.type;var t=this.source.context&&this.source.context.root;if(typeof this.offset=="number"){this.range=new _(this.offset,this.offset+1);var a=t&&st(this.offset,t);if(a){var s={line:a.line,col:a.col+1};this.linePos={start:a,end:s}}delete this.offset}else this.range=this.source.range,this.linePos=this.source.rangeAsLinePos;if(this.linePos){var o=this.linePos.start,u=o.line,l=o.col;this.message+=" at line ".concat(u,", column ").concat(l);var c=t&&dr(this.linePos,t);c&&(this.message+=`:

`.concat(c,`
`))}delete this.source}}}]),e}(it(Error)),Ne=function(r){T(e,r);var n=C(e);function e(i,t){return L(this,e),n.call(this,"YAMLReferenceError",i,t)}return e}(ge),O=function(r){T(e,r);var n=C(e);function e(i,t){return L(this,e),n.call(this,"YAMLSemanticError",i,t)}return e}(ge),U=function(r){T(e,r);var n=C(e);function e(i,t){return L(this,e),n.call(this,"YAMLSyntaxError",i,t)}return e}(ge),ye=function(r){T(e,r);var n=C(e);function e(i,t){return L(this,e),n.call(this,"YAMLWarning",i,t)}return e}(ge),tn=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;for(var t=this.valueRange,a=t.start,s=t.end,o=this.context.src,u=o[s-1];a<s&&(u===`
`||u==="	"||u===" ");)u=o[--s-1];for(var l="",c=a;c<s;++c){var f=o[c];if(f===`
`){var v=y.foldNewline(o,c,-1),h=v.fold,g=v.offset;l+=h,c=g}else if(f===" "||f==="	"){for(var d=c,w=o[c+1];c<s&&(w===" "||w==="	");)c+=1,w=o[c+1];w!==`
`&&(l+=c>d?o.slice(d,c+1):f)}else l+=f}var m=o[a];switch(m){case"	":{var b="Plain value cannot start with a tab character",S=[new O(this,b)];return{errors:S,str:l}}case"@":case"`":{var P="Plain value cannot start with reserved character ".concat(m),M=[new O(this,P)];return{errors:M,str:l}}default:return l}}},{key:"parseBlockValue",value:function(t){for(var a=this.context,s=a.indent,o=a.inFlow,u=a.src,l=t,c=t,f=u[l];f===`
`&&!y.atDocumentBoundary(u,l+1);f=u[l]){var v=y.endOfBlockIndent(u,s,l+1);if(v===null||u[v]==="#")break;u[v]===`
`?l=v:(c=e.endOfLine(u,v,o),l=c)}return this.valueRange.isEmpty()&&(this.valueRange.start=t),this.valueRange.end=c,c}},{key:"parse",value:function(t,a){this.context=t;var s=t.inFlow,o=t.src,u=a,l=o[u];return l&&l!=="#"&&l!==`
`&&(u=e.endOfLine(o,a,s)),this.valueRange=new _(a,u),u=y.endOfWhiteSpace(o,u),u=this.parseComment(u),(!this.hasComment||this.valueRange.isEmpty())&&(u=this.parseBlockValue(u)),u}}],[{key:"endOfLine",value:function(t,a,s){for(var o=t[a],u=a;o&&o!==`
`&&!(s&&(o==="["||o==="]"||o==="{"||o==="}"||o===","));){var l=t[u+1];if(o===":"&&(!l||l===`
`||l==="	"||l===" "||s&&l===",")||(o===" "||o==="	")&&l==="#")break;u+=1,o=l}return u}}]),e}(y),Ae=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.call(this,p.BLANK_LINE)}return A(e,[{key:"includesTrailingLines",get:function(){return!0}},{key:"parse",value:function(t,a){return this.context=t,this.range=new _(a,a+1),a+1}}]),e}(y),vt=function(r){T(e,r);var n=C(e);function e(i,t){var a;return L(this,e),a=n.call(this,i,t),a.node=null,a}return A(e,[{key:"includesTrailingLines",get:function(){return!!this.node&&this.node.includesTrailingLines}},{key:"parse",value:function(t,a){this.context=t;var s=t.parseNode,o=t.src,u=t.atLineStart,l=t.lineStart;!u&&this.type===p.SEQ_ITEM&&(this.error=new O(this,"Sequence items must not have preceding content on the same line"));for(var c=u?a-l:t.indent,f=y.endOfWhiteSpace(o,a+1),v=o[f],h=v==="#",g=[],d=null;v===`
`||v==="#";){if(v==="#"){var w=y.endOfLine(o,f+1);g.push(new _(f,w)),f=w}else{u=!0,l=f+1;var m=y.endOfWhiteSpace(o,l);o[m]===`
`&&g.length===0&&(d=new Ae,l=d.parse({src:o},l)),f=y.endOfIndent(o,l)}v=o[f]}if(y.nextNodeIsIndented(v,f-(l+c),this.type!==p.SEQ_ITEM)?this.node=s({atLineStart:u,inCollection:!1,indent:c,lineStart:l,parent:this},f):v&&l>a+1&&(f=l-1),this.node){if(d){var b=t.parent.items||t.parent.contents;b&&b.push(d)}g.length&&Array.prototype.push.apply(this.props,g),f=this.node.range.end}else if(h){var S=g[0];this.props.push(S),f=S.end}else f=y.endOfLine(o,a+1);var P=this.node?this.node.valueRange.end:f;return this.valueRange=new _(a,P),f}},{key:"setOrigRanges",value:function(t,a){return a=J(j(e.prototype),"setOrigRanges",this).call(this,t,a),this.node?this.node.setOrigRanges(t,a):a}},{key:"toString",value:function(){var t=this.context.src,a=this.node,s=this.range,o=this.value;if(o!=null)return o;var u=a?t.slice(s.start,a.range.start)+String(a):t.slice(s.start,s.end);return y.addStringTerminator(t,s.end,u)}}]),e}(y),Oe=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.call(this,p.COMMENT)}return A(e,[{key:"parse",value:function(t,a){this.context=t;var s=this.parseComment(a);return this.range=new _(a,s),s}}]),e}(y);function ot(r){for(var n=r;n instanceof vt;)n=n.node;if(!(n instanceof nn))return null;for(var e=n.items.length,i=-1,t=e-1;t>=0;--t){var a=n.items[t];if(a.type===p.COMMENT){var s=a.context,o=s.indent,u=s.lineStart;if(o>0&&a.range.start>=u+o)break;i=t}else if(a.type===p.BLANK_LINE)i=t;else break}if(i===-1)return null;for(var l=n.items.splice(i,e-i),c=l[0].range.start;n.range.end=c,n.valueRange&&n.valueRange.end>c&&(n.valueRange.end=c),n!==r;)n=n.context.parent;return l}var nn=function(r){T(e,r);var n=C(e);function e(i){var t;L(this,e),t=n.call(this,i.type===p.SEQ_ITEM?p.SEQ:p.MAP);for(var a=i.props.length-1;a>=0;--a)if(i.props[a].start<i.context.lineStart){t.props=i.props.slice(0,a+1),i.props=i.props.slice(a+1);var s=i.props[0]||i.valueRange;i.range.start=s.start;break}t.items=[i];var o=ot(i);return o&&Array.prototype.push.apply(t.items,o),t}return A(e,[{key:"includesTrailingLines",get:function(){return this.items.length>0}},{key:"parse",value:function(t,a){this.context=t;var s=t.parseNode,o=t.src,u=y.startOfLine(o,a),l=this.items[0];l.context.parent=this,this.valueRange=_.copy(l.valueRange);var c=l.range.start-l.context.lineStart,f=a;f=y.normalizeOffset(o,f);for(var v=o[f],h=y.endOfWhiteSpace(o,u)===f,g=!1;v;){for(;v===`
`||v==="#";){if(h&&v===`
`&&!g){var d=new Ae;if(f=d.parse({src:o},f),this.valueRange.end=f,f>=o.length){v=null;break}this.items.push(d),f-=1}else if(v==="#"){if(f<u+c&&!e.nextContentHasIndent(o,f,c))return f;var w=new Oe;if(f=w.parse({indent:c,lineStart:u,src:o},f),this.items.push(w),this.valueRange.end=f,f>=o.length){v=null;break}}if(u=f+1,f=y.endOfIndent(o,u),y.atBlank(o,f)){var m=y.endOfWhiteSpace(o,f),b=o[m];(!b||b===`
`||b==="#")&&(f=m)}v=o[f],h=!0}if(!v)break;if(f!==u+c&&(h||v!==":")){if(f<u+c){u>a&&(f=u);break}else if(!this.error){var S="All collection items must start at the same column";this.error=new U(this,S)}}if(l.type===p.SEQ_ITEM){if(v!=="-"){u>a&&(f=u);break}}else if(v==="-"&&!this.error){var P=o[f+1];if(!P||P===`
`||P==="	"||P===" "){var M="A collection cannot be both a mapping and a sequence";this.error=new U(this,M)}}var k=s({atLineStart:h,inCollection:!0,indent:c,lineStart:u,parent:this},f);if(!k)return f;if(this.items.push(k),this.valueRange.end=k.valueRange.end,f=y.normalizeOffset(o,k.range.end),v=o[f],h=!1,g=k.includesTrailingLines,v){for(var R=f-1,x=o[R];x===" "||x==="	";)x=o[--R];x===`
`&&(u=R+1,h=!0)}var K=ot(k);K&&Array.prototype.push.apply(this.items,K)}return f}},{key:"setOrigRanges",value:function(t,a){return a=J(j(e.prototype),"setOrigRanges",this).call(this,t,a),this.items.forEach(function(s){a=s.setOrigRanges(t,a)}),a}},{key:"toString",value:function(){var t=this.context.src,a=this.items,s=this.range,o=this.value;if(o!=null)return o;for(var u=t.slice(s.start,a[0].range.start)+String(a[0]),l=1;l<a.length;++l){var c=a[l],f=c.context,v=f.atLineStart,h=f.indent;if(v)for(var g=0;g<h;++g)u+=" ";u+=String(c)}return y.addStringTerminator(t,s.end,u)}}],[{key:"nextContentHasIndent",value:function(t,a,s){var o=y.endOfLine(t,a)+1;a=y.endOfWhiteSpace(t,o);var u=t[a];return u?a>=o+s?!0:u!=="#"&&u!==`
`?!1:e.nextContentHasIndent(t,a,s):!1}}]),e}(y),yr=function(r){T(e,r);var n=C(e);function e(){var i;return L(this,e),i=n.call(this,p.DIRECTIVE),i.name=null,i}return A(e,[{key:"parameters",get:function(){var t=this.rawValue;return t?t.trim().split(/[ \t]+/):[]}},{key:"parseName",value:function(t){for(var a=this.context.src,s=t,o=a[s];o&&o!==`
`&&o!=="	"&&o!==" ";)o=a[s+=1];return this.name=a.slice(t,s),s}},{key:"parseParameters",value:function(t){for(var a=this.context.src,s=t,o=a[s];o&&o!==`
`&&o!=="#";)o=a[s+=1];return this.valueRange=new _(t,s),s}},{key:"parse",value:function(t,a){this.context=t;var s=this.parseName(a+1);return s=this.parseParameters(s),s=this.parseComment(s),this.range=new _(a,s),s}}]),e}(y),mr=function(r){T(e,r);var n=C(e);function e(){var i;return L(this,e),i=n.call(this,p.DOCUMENT),i.directives=null,i.contents=null,i.directivesEndMarker=null,i.documentEndMarker=null,i}return A(e,[{key:"parseDirectives",value:function(t){var a=this.context.src;this.directives=[];for(var s=!0,o=!1,u=t;!y.atDocumentBoundary(a,u,B.DIRECTIVES_END);)switch(u=e.startCommentOrEndBlankLine(a,u),a[u]){case`
`:if(s){var l=new Ae;u=l.parse({src:a},u),u<a.length&&this.directives.push(l)}else u+=1,s=!0;break;case"#":{var c=new Oe;u=c.parse({src:a},u),this.directives.push(c),s=!1}break;case"%":{var f=new yr;u=f.parse({parent:this,src:a},u),this.directives.push(f),o=!0,s=!1}break;default:return o?this.error=new O(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),u}return a[u]?(this.directivesEndMarker=new _(u,u+3),u+3):(o?this.error=new O(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),u)}},{key:"parseContents",value:function(t){var a=this.context,s=a.parseNode,o=a.src;this.contents||(this.contents=[]);for(var u=t;o[u-1]==="-";)u-=1;var l=y.endOfWhiteSpace(o,t),c=u===t;for(this.valueRange=new _(l);!y.atDocumentBoundary(o,l,B.DOCUMENT_END);){switch(o[l]){case`
`:if(c){var f=new Ae;l=f.parse({src:o},l),l<o.length&&this.contents.push(f)}else l+=1,c=!0;u=l;break;case"#":{var v=new Oe;l=v.parse({src:o},l),this.contents.push(v),c=!1}break;default:{var h=y.endOfIndent(o,l),g={atLineStart:c,indent:-1,inFlow:!1,inCollection:!1,lineStart:u,parent:this},d=s(g,h);if(!d)return this.valueRange.end=h;this.contents.push(d),l=d.range.end,c=!1;var w=ot(d);w&&Array.prototype.push.apply(this.contents,w)}}l=e.startCommentOrEndBlankLine(o,l)}if(this.valueRange.end=l,o[l]&&(this.documentEndMarker=new _(l,l+3),l+=3,o[l])){if(l=y.endOfWhiteSpace(o,l),o[l]==="#"){var m=new Oe;l=m.parse({src:o},l),this.contents.push(m)}switch(o[l]){case`
`:l+=1;break;case void 0:break;default:this.error=new U(this,"Document end marker line cannot have a non-comment suffix")}}return l}},{key:"parse",value:function(t,a){t.root=this,this.context=t;var s=t.src,o=s.charCodeAt(a)===65279?a+1:a;return o=this.parseDirectives(o),o=this.parseContents(o),o}},{key:"setOrigRanges",value:function(t,a){return a=J(j(e.prototype),"setOrigRanges",this).call(this,t,a),this.directives.forEach(function(s){a=s.setOrigRanges(t,a)}),this.directivesEndMarker&&(a=this.directivesEndMarker.setOrigRange(t,a)),this.contents.forEach(function(s){a=s.setOrigRanges(t,a)}),this.documentEndMarker&&(a=this.documentEndMarker.setOrigRange(t,a)),a}},{key:"toString",value:function(){var t=this.contents,a=this.directives,s=this.value;if(s!=null)return s;var o=a.join("");return t.length>0&&((a.length>0||t[0].type===p.COMMENT)&&(o+=`---
`),o+=t.join("")),o[o.length-1]!==`
`&&(o+=`
`),o}}],[{key:"startCommentOrEndBlankLine",value:function(t,a){var s=y.endOfWhiteSpace(t,a),o=t[s];return o==="#"||o===`
`?s:a}}]),e}(y),wr=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"parse",value:function(t,a){this.context=t;var s=t.src,o=y.endOfIdentifier(s,a+1);return this.valueRange=new _(a+1,o),o=y.endOfWhiteSpace(s,o),o=this.parseComment(o),o}}]),e}(y),ae={CLIP:"CLIP",KEEP:"KEEP",STRIP:"STRIP"},br=function(r){T(e,r);var n=C(e);function e(i,t){var a;return L(this,e),a=n.call(this,i,t),a.blockIndent=null,a.chomping=ae.CLIP,a.header=null,a}return A(e,[{key:"includesTrailingLines",get:function(){return this.chomping===ae.KEEP}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var t=this.valueRange,a=t.start,s=t.end,o=this.context,u=o.indent,l=o.src;if(this.valueRange.isEmpty())return"";for(var c=null,f=l[s-1];f===`
`||f==="	"||f===" ";){if(s-=1,s<=a){if(this.chomping===ae.KEEP)break;return""}f===`
`&&(c=s),f=l[s-1]}var v=s+1;c&&(this.chomping===ae.KEEP?(v=c,s=this.valueRange.end):s=c);for(var h=u+this.blockIndent,g=this.type===p.BLOCK_FOLDED,d=!0,w="",m="",b=!1,S=a;S<s;++S){for(var P=0;P<h&&l[S]===" ";++P)S+=1;var M=l[S];if(M===`
`)m===`
`?w+=`
`:m=`
`;else{var k=y.endOfLine(l,S),R=l.slice(S,k);S=k,g&&(M===" "||M==="	")&&S<v?(m===" "?m=`
`:!b&&!d&&m===`
`&&(m=`

`),w+=m+R,m=k<s&&l[k]||"",b=!0):(w+=m+R,m=g&&S<v?" ":`
`,b=!1),d&&R!==""&&(d=!1)}}return this.chomping===ae.STRIP?w:w+`
`}},{key:"parseBlockHeader",value:function(t){for(var a=this.context.src,s=t+1,o="";;){var u=a[s];switch(u){case"-":this.chomping=ae.STRIP;break;case"+":this.chomping=ae.KEEP;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o+=u;break;default:return this.blockIndent=Number(o)||null,this.header=new _(t,s),s}s+=1}}},{key:"parseBlockValue",value:function(t){for(var a=this.context,s=a.indent,o=a.src,u=!!this.blockIndent,l=t,c=t,f=1,v=o[l];v===`
`&&(l+=1,!y.atDocumentBoundary(o,l));v=o[l]){var h=y.endOfBlockIndent(o,s,l);if(h===null)break;var g=o[h],d=h-(l+s);if(this.blockIndent){if(g&&g!==`
`&&d<this.blockIndent){if(o[h]==="#")break;if(!this.error){var m=u?"explicit indentation indicator":"first line",b="Block scalars must not be less indented than their ".concat(m);this.error=new O(this,b)}}}else if(o[h]!==`
`){if(d<f){var w="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";this.error=new O(this,w)}this.blockIndent=d}else d>f&&(f=d);o[h]===`
`?l=h:l=c=y.endOfLine(o,h)}return this.chomping!==ae.KEEP&&(l=o[c]?c+1:c),this.valueRange=new _(t+1,l),l}},{key:"parse",value:function(t,a){this.context=t;var s=t.src,o=this.parseBlockHeader(a);return o=y.endOfWhiteSpace(s,o),o=this.parseComment(o),o=this.parseBlockValue(o),o}},{key:"setOrigRanges",value:function(t,a){return a=J(j(e.prototype),"setOrigRanges",this).call(this,t,a),this.header?this.header.setOrigRange(t,a):a}}]),e}(y),Sr=function(r){T(e,r);var n=C(e);function e(i,t){var a;return L(this,e),a=n.call(this,i,t),a.items=null,a}return A(e,[{key:"prevNodeIsJsonLike",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.items.length,a=this.items[t-1];return!!a&&(a.jsonLike||a.type===p.COMMENT&&this.prevNodeIsJsonLike(t-1))}},{key:"parse",value:function(t,a){this.context=t;var s=t.parseNode,o=t.src,u=t.indent,l=t.lineStart,c=o[a];this.items=[{char:c,offset:a}];var f=y.endOfWhiteSpace(o,a+1);for(c=o[f];c&&c!=="]"&&c!=="}";){switch(c){case`
`:{l=f+1;var v=y.endOfWhiteSpace(o,l);if(o[v]===`
`){var h=new Ae;l=h.parse({src:o},l),this.items.push(h)}if(f=y.endOfIndent(o,l),f<=l+u&&(c=o[f],f<l+u||c!=="]"&&c!=="}")){var g="Insufficient indentation in flow collection";this.error=new O(this,g)}}break;case",":this.items.push({char:c,offset:f}),f+=1;break;case"#":{var d=new Oe;f=d.parse({src:o},f),this.items.push(d)}break;case"?":case":":{var w=o[f+1];if(w===`
`||w==="	"||w===" "||w===","||c===":"&&this.prevNodeIsJsonLike()){this.items.push({char:c,offset:f}),f+=1;break}}default:{var m=s({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:l,parent:this},f);if(!m)return this.valueRange=new _(a,f),f;this.items.push(m),f=y.normalizeOffset(o,m.range.end)}}f=y.endOfWhiteSpace(o,f),c=o[f]}return this.valueRange=new _(a,f+1),c&&(this.items.push({char:c,offset:f}),f=y.endOfWhiteSpace(o,f+1),f=this.parseComment(f)),f}},{key:"setOrigRanges",value:function(t,a){return a=J(j(e.prototype),"setOrigRanges",this).call(this,t,a),this.items.forEach(function(s){if(s instanceof y)a=s.setOrigRanges(t,a);else if(t.length===0)s.origOffset=s.offset;else{for(var o=a;o<t.length&&!(t[o]>s.offset);)++o;s.origOffset=s.offset+o,a=o}}),a}},{key:"toString",value:function(){var t=this.context.src,a=this.items,s=this.range,o=this.value;if(o!=null)return o;var u=a.filter(function(f){return f instanceof y}),l="",c=s.start;return u.forEach(function(f){var v=t.slice(c,f.range.start);c=f.range.end,l+=v+String(f),l[l.length-1]===`
`&&t[c-1]!==`
`&&t[c]===`
`&&(c+=1)}),l+=t.slice(c,s.end),y.addStringTerminator(t,s.end,l)}}]),e}(y),kr=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var t=[],a=this.valueRange,s=a.start,o=a.end,u=this.context,l=u.indent,c=u.src;c[o-1]!=='"'&&t.push(new U(this,'Missing closing "quote'));for(var f="",v=s+1;v<o-1;++v){var h=c[v];if(h===`
`){y.atDocumentBoundary(c,v+1)&&t.push(new O(this,"Document boundary indicators are not allowed within string values"));var g=y.foldNewline(c,v,l),d=g.fold,w=g.offset,m=g.error;f+=d,v=w,m&&t.push(new O(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if(h==="\\")switch(v+=1,c[v]){case"0":f+="\0";break;case"a":f+="\x07";break;case"b":f+="\b";break;case"e":f+="\x1B";break;case"f":f+="\f";break;case"n":f+=`
`;break;case"r":f+="\r";break;case"t":f+="	";break;case"v":f+="\v";break;case"N":f+="\x85";break;case"_":f+="\xA0";break;case"L":f+="\u2028";break;case"P":f+="\u2029";break;case" ":f+=" ";break;case'"':f+='"';break;case"/":f+="/";break;case"\\":f+="\\";break;case"	":f+="	";break;case"x":f+=this.parseCharCode(v+1,2,t),v+=2;break;case"u":f+=this.parseCharCode(v+1,4,t),v+=4;break;case"U":f+=this.parseCharCode(v+1,8,t),v+=8;break;case`
`:for(;c[v+1]===" "||c[v+1]==="	";)v+=1;break;default:t.push(new U(this,"Invalid escape sequence ".concat(c.substr(v-1,2)))),f+="\\"+c[v]}else if(h===" "||h==="	"){for(var b=v,S=c[v+1];S===" "||S==="	";)v+=1,S=c[v+1];S!==`
`&&(f+=v>b?c.slice(b,v+1):h)}else f+=h}return t.length>0?{errors:t,str:f}:f}},{key:"parseCharCode",value:function(t,a,s){var o=this.context.src,u=o.substr(t,a),l=u.length===a&&/^[0-9a-fA-F]+$/.test(u),c=l?parseInt(u,16):NaN;return isNaN(c)?(s.push(new U(this,"Invalid escape sequence ".concat(o.substr(t-2,a+2)))),o.substr(t-2,a+2)):String.fromCodePoint(c)}},{key:"parse",value:function(t,a){this.context=t;var s=t.src,o=e.endOfQuote(s,a+1);return this.valueRange=new _(a,o),o=y.endOfWhiteSpace(s,o),o=this.parseComment(o),o}}],[{key:"endOfQuote",value:function(t,a){for(var s=t[a];s&&s!=='"';)a+=s==="\\"?2:1,s=t[a];return a+1}}]),e}(y),Or=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var t=[],a=this.valueRange,s=a.start,o=a.end,u=this.context,l=u.indent,c=u.src;c[o-1]!=="'"&&t.push(new U(this,"Missing closing 'quote"));for(var f="",v=s+1;v<o-1;++v){var h=c[v];if(h===`
`){y.atDocumentBoundary(c,v+1)&&t.push(new O(this,"Document boundary indicators are not allowed within string values"));var g=y.foldNewline(c,v,l),d=g.fold,w=g.offset,m=g.error;f+=d,v=w,m&&t.push(new O(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if(h==="'")f+=h,v+=1,c[v]!=="'"&&t.push(new U(this,"Unescaped single quote? This should not happen."));else if(h===" "||h==="	"){for(var b=v,S=c[v+1];S===" "||S==="	";)v+=1,S=c[v+1];S!==`
`&&(f+=v>b?c.slice(b,v+1):h)}else f+=h}return t.length>0?{errors:t,str:f}:f}},{key:"parse",value:function(t,a){this.context=t;var s=t.src,o=e.endOfQuote(s,a+1);return this.valueRange=new _(a,o),o=y.endOfWhiteSpace(s,o),o=this.parseComment(o),o}}],[{key:"endOfQuote",value:function(t,a){for(var s=t[a];s;)if(s==="'"){if(t[a+1]!=="'")break;s=t[a+=2]}else s=t[a+=1];return a+1}}]),e}(y);function Er(r,n){switch(r){case p.ALIAS:return new wr(r,n);case p.BLOCK_FOLDED:case p.BLOCK_LITERAL:return new br(r,n);case p.FLOW_MAP:case p.FLOW_SEQ:return new Sr(r,n);case p.MAP_KEY:case p.MAP_VALUE:case p.SEQ_ITEM:return new vt(r,n);case p.COMMENT:case p.PLAIN:return new tn(r,n);case p.QUOTE_DOUBLE:return new kr(r,n);case p.QUOTE_SINGLE:return new Or(r,n);default:return null}}var Lr=function(){function r(){var n=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=i.atLineStart,a=i.inCollection,s=i.inFlow,o=i.indent,u=i.lineStart,l=i.parent;L(this,r),$(this,"parseNode",function(c,f){if(y.atDocumentBoundary(n.src,f))return null;var v=new r(n,c),h=v.parseProps(f),g=h.props,d=h.type,w=h.valueStart,m=Er(d,g),b=m.parse(v,w);if(m.range=new _(f,b),b<=f&&(m.error=new Error("Node#parse consumed no characters"),m.error.parseEnd=b,m.error.source=m,m.range.end=f+1),v.nodeStartsCollection(m)){!m.error&&!v.atLineStart&&v.parent.type===p.DOCUMENT&&(m.error=new U(m,"Block collection must not have preceding content here (e.g. directives-end indicator)"));var S=new nn(m);return b=S.parse(new r(v),b),S.range=new _(f,b),S}return m}),this.atLineStart=t!=null?t:e.atLineStart||!1,this.inCollection=a!=null?a:e.inCollection||!1,this.inFlow=s!=null?s:e.inFlow||!1,this.indent=o!=null?o:e.indent,this.lineStart=u!=null?u:e.lineStart,this.parent=l!=null?l:e.parent||{},this.root=e.root,this.src=e.src}return A(r,[{key:"nodeStartsCollection",value:function(e){var i=this.inCollection,t=this.inFlow,a=this.src;if(i||t)return!1;if(e instanceof vt)return!0;var s=e.range.end;return a[s]===`
`||a[s-1]===`
`?!1:(s=y.endOfWhiteSpace(a,s),a[s]===":")}},{key:"parseProps",value:function(e){var i=this.inFlow,t=this.parent,a=this.src,s=[],o=!1;e=this.atLineStart?y.endOfIndent(a,e):y.endOfWhiteSpace(a,e);for(var u=a[e];u===B.ANCHOR||u===B.COMMENT||u===B.TAG||u===`
`;){if(u===`
`){var l=e,c=void 0;do c=l+1,l=y.endOfIndent(a,c);while(a[l]===`
`);var f=l-(c+this.indent),v=t.type===p.SEQ_ITEM&&t.context.atLineStart;if(a[l]!=="#"&&!y.nextNodeIsIndented(a[l],f,!v))break;this.atLineStart=!0,this.lineStart=c,o=!1,e=l}else if(u===B.COMMENT){var h=y.endOfLine(a,e+1);s.push(new _(e,h)),e=h}else{var g=y.endOfIdentifier(a,e+1);u===B.TAG&&a[g]===","&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(a.slice(e+1,g+13))&&(g=y.endOfIdentifier(a,g+5)),s.push(new _(e,g)),o=!0,e=y.endOfWhiteSpace(a,g)}u=a[e]}o&&u===":"&&y.atBlank(a,e+1,!0)&&(e-=1);var d=r.parseType(a,e,i);return{props:s,type:d,valueStart:e}}}],[{key:"parseType",value:function(e,i,t){switch(e[i]){case"*":return p.ALIAS;case">":return p.BLOCK_FOLDED;case"|":return p.BLOCK_LITERAL;case"{":return p.FLOW_MAP;case"[":return p.FLOW_SEQ;case"?":return!t&&y.atBlank(e,i+1,!0)?p.MAP_KEY:p.PLAIN;case":":return!t&&y.atBlank(e,i+1,!0)?p.MAP_VALUE:p.PLAIN;case"-":return!t&&y.atBlank(e,i+1,!0)?p.SEQ_ITEM:p.PLAIN;case'"':return p.QUOTE_DOUBLE;case"'":return p.QUOTE_SINGLE;default:return p.PLAIN}}}]),r}();function ht(r){var n=[];r.indexOf("\r")!==-1&&(r=r.replace(/\r\n?/g,function(s,o){return s.length>1&&n.push(o),`
`}));var e=[],i=0;do{var t=new mr,a=new Lr({src:r});i=t.parse(a,i),e.push(t)}while(i<r.length);return e.setOrigRanges=function(){if(n.length===0)return!1;for(var s=1;s<n.length;++s)n[s]-=s;for(var o=0,u=0;u<e.length;++u)o=e[u].setOrigRanges(n,o);return n.splice(0,n.length),!0},e.toString=function(){return e.join(`...
`)},e}function Nr(r,n,e){if(!e)return r;var i=e.replace(/[\s\S]^/gm,"$&".concat(n,"#"));return"#".concat(i,`
`).concat(n).concat(r)}function pe(r,n,e){return e?e.indexOf(`
`)===-1?"".concat(r," #").concat(e):"".concat(r,`
`)+e.replace(/^/gm,"".concat(n||"","#")):r}var Q=function r(){L(this,r)};function z(r,n,e){if(Array.isArray(r))return r.map(function(a,s){return z(a,String(s),e)});if(r&&typeof r.toJSON=="function"){var i=e&&e.anchors&&e.anchors.get(r);i&&(e.onCreate=function(a){i.res=a,delete e.onCreate});var t=r.toJSON(n,e);return i&&e.onCreate&&e.onCreate(t),t}return(!e||!e.keep)&&typeof r=="bigint"?Number(r):r}var N=function(r){T(e,r);var n=C(e);function e(i){var t;return L(this,e),t=n.call(this),t.value=i,t}return A(e,[{key:"toJSON",value:function(t,a){return a&&a.keep?this.value:z(this.value,t,a)}},{key:"toString",value:function(){return String(this.value)}}]),e}(Q);function Ct(r,n,e){for(var i=e,t=n.length-1;t>=0;--t){var a=n[t];if(Number.isInteger(a)&&a>=0){var s=[];s[a]=i,i=s}else{var o={};Object.defineProperty(o,a,{value:i,writable:!0,enumerable:!0,configurable:!0}),i=o}}return r.createNode(i,!1)}var Se=function(n){return n==null||q(n)==="object"&&n[Symbol.iterator]().next().done},W=function(r){T(e,r);var n=C(e);function e(i){var t;return L(this,e),t=n.call(this),$(H(t),"items",[]),t.schema=i,t}return A(e,[{key:"addIn",value:function(t,a){if(Se(t))this.add(a);else{var s=be(t),o=s[0],u=s.slice(1),l=this.get(o,!0);if(l instanceof e)l.addIn(u,a);else if(l===void 0&&this.schema)this.set(o,Ct(this.schema,u,a));else throw new Error("Expected YAML collection at ".concat(o,". Remaining path: ").concat(u))}}},{key:"deleteIn",value:function(t){var a=be(t),s=a[0],o=a.slice(1);if(o.length===0)return this.delete(s);var u=this.get(s,!0);if(u instanceof e)return u.deleteIn(o);throw new Error("Expected YAML collection at ".concat(s,". Remaining path: ").concat(o))}},{key:"getIn",value:function(t,a){var s=be(t),o=s[0],u=s.slice(1),l=this.get(o,!0);return u.length===0?!a&&l instanceof N?l.value:l:l instanceof e?l.getIn(u,a):void 0}},{key:"hasAllNullValues",value:function(){return this.items.every(function(t){if(!t||t.type!=="PAIR")return!1;var a=t.value;return a==null||a instanceof N&&a.value==null&&!a.commentBefore&&!a.comment&&!a.tag})}},{key:"hasIn",value:function(t){var a=be(t),s=a[0],o=a.slice(1);if(o.length===0)return this.has(s);var u=this.get(s,!0);return u instanceof e?u.hasIn(o):!1}},{key:"setIn",value:function(t,a){var s=be(t),o=s[0],u=s.slice(1);if(u.length===0)this.set(o,a);else{var l=this.get(o,!0);if(l instanceof e)l.setIn(u,a);else if(l===void 0&&this.schema)this.set(o,Ct(this.schema,u,a));else throw new Error("Expected YAML collection at ".concat(o,". Remaining path: ").concat(u))}}},{key:"toJSON",value:function(){return null}},{key:"toString",value:function(t,a,s,o){var u=this,l=a.blockItem,c=a.flowChars,f=a.isMap,v=a.itemIndent,h=t,g=h.indent,d=h.indentStep,w=h.stringify,m=this.type===p.FLOW_MAP||this.type===p.FLOW_SEQ||t.inFlow;m&&(v+=d);var b=f&&this.hasAllNullValues();t=Object.assign({},t,{allNullValues:b,indent:v,inFlow:m,type:null});var S=!1,P=!1,M=this.items.reduce(function(G,D,Fn){var Re;D&&(!S&&D.spaceBefore&&G.push({type:"comment",str:""}),D.commentBefore&&D.commentBefore.match(/^.*$/gm).forEach(function(Wn){G.push({type:"comment",str:"#".concat(Wn)})}),D.comment&&(Re=D.comment),m&&(!S&&D.spaceBefore||D.commentBefore||D.comment||D.key&&(D.key.commentBefore||D.key.comment)||D.value&&(D.value.commentBefore||D.value.comment))&&(P=!0)),S=!1;var me=w(D,t,function(){return Re=null},function(){return S=!0});return m&&!P&&me.includes(`
`)&&(P=!0),m&&Fn<u.items.length-1&&(me+=","),me=pe(me,v,Re),S&&(Re||m)&&(S=!1),G.push({type:"item",str:me}),G},[]),k;if(M.length===0)k=c.start+c.end;else if(m){var R=c.start,x=c.end,K=M.map(function(G){return G.str});if(P||K.reduce(function(G,D){return G+D.length+2},2)>e.maxFlowStringSingleLineLength){k=R;var Y=I(K),Z;try{for(Y.s();!(Z=Y.n()).done;){var Pe=Z.value;k+=Pe?`
`.concat(d).concat(g).concat(Pe):`
`}}catch(G){Y.e(G)}finally{Y.f()}k+=`
`.concat(g).concat(x)}else k="".concat(R," ").concat(K.join(" ")," ").concat(x)}else{var St=M.map(l);k=St.shift();var _e=I(St),kt;try{for(_e.s();!(kt=_e.n()).done;){var Ot=kt.value;k+=Ot?`
`.concat(g).concat(Ot):`
`}}catch(G){_e.e(G)}finally{_e.f()}}return this.comment?(k+=`
`+this.comment.replace(/^/gm,"".concat(g,"#")),s&&s()):S&&o&&o(),k}}]),e}(Q);$(W,"maxFlowStringSingleLineLength",60);function De(r){var n=r instanceof N?r.value:r;return n&&typeof n=="string"&&(n=Number(n)),Number.isInteger(n)&&n>=0?n:null}var X=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"add",value:function(t){this.items.push(t)}},{key:"delete",value:function(t){var a=De(t);if(typeof a!="number")return!1;var s=this.items.splice(a,1);return s.length>0}},{key:"get",value:function(t,a){var s=De(t);if(typeof s=="number"){var o=this.items[s];return!a&&o instanceof N?o.value:o}}},{key:"has",value:function(t){var a=De(t);return typeof a=="number"&&a<this.items.length}},{key:"set",value:function(t,a){var s=De(t);if(typeof s!="number")throw new Error("Expected a valid index, not ".concat(t,"."));this.items[s]=a}},{key:"toJSON",value:function(t,a){var s=[];a&&a.onCreate&&a.onCreate(s);var o=0,u=I(this.items),l;try{for(u.s();!(l=u.n()).done;){var c=l.value;s.push(z(c,String(o++),a))}}catch(f){u.e(f)}finally{u.f()}return s}},{key:"toString",value:function(t,a,s){return t?J(j(e.prototype),"toString",this).call(this,t,{blockItem:function(u){return u.type==="comment"?u.str:"- ".concat(u.str)},flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(t.indent||"")+"  "},a,s):JSON.stringify(this)}}]),e}(W),Ar=function(n,e,i){return e===null?"":q(e)!=="object"?String(e):n instanceof Q&&i&&i.doc?n.toString({anchors:Object.create(null),doc:i.doc,indent:"",indentStep:i.indentStep,inFlow:!0,inStringifyKey:!0,stringify:i.stringify}):JSON.stringify(e)},E=function(r){T(e,r);var n=C(e);function e(i){var t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return L(this,e),t=n.call(this),t.key=i,t.value=a,t.type=e.Type.PAIR,t}return A(e,[{key:"commentBefore",get:function(){return this.key instanceof Q?this.key.commentBefore:void 0},set:function(t){if(this.key==null&&(this.key=new N(null)),this.key instanceof Q)this.key.commentBefore=t;else{var a="Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.";throw new Error(a)}}},{key:"addToJSMap",value:function(t,a){var s=z(this.key,"",t);if(a instanceof Map){var o=z(this.value,s,t);a.set(s,o)}else if(a instanceof Set)a.add(s);else{var u=Ar(this.key,s,t),l=z(this.value,u,t);u in a?Object.defineProperty(a,u,{value:l,writable:!0,enumerable:!0,configurable:!0}):a[u]=l}return a}},{key:"toJSON",value:function(t,a){var s=a&&a.mapAsMap?new Map:{};return this.addToJSMap(a,s)}},{key:"toString",value:function(t,a,s){if(!t||!t.doc)return JSON.stringify(this);var o=t.doc.options,u=o.indent,l=o.indentSeq,c=o.simpleKeys,f=this.key,v=this.value,h=f instanceof Q&&f.comment;if(c){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(f instanceof W){var g="With simple keys, collection cannot be used as a key value";throw new Error(g)}}var d=!c&&(!f||h||(f instanceof Q?f instanceof W||f.type===p.BLOCK_FOLDED||f.type===p.BLOCK_LITERAL:q(f)==="object")),w=t,m=w.doc,b=w.indent,S=w.indentStep,P=w.stringify;t=Object.assign({},t,{implicitKey:!d,indent:b+S});var M=!1,k=P(f,t,function(){return h=null},function(){return M=!0});if(k=pe(k,t.indent,h),!d&&k.length>1024){if(c)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(t.allNullValues&&!c)return this.comment?(k=pe(k,t.indent,this.comment),a&&a()):M&&!h&&s&&s(),t.inFlow&&!d?k:"? ".concat(k);k=d?"? ".concat(k,`
`).concat(b,":"):"".concat(k,":"),this.comment&&(k=pe(k,t.indent,this.comment),a&&a());var R="",x=null;if(v instanceof Q){if(v.spaceBefore&&(R=`
`),v.commentBefore){var K=v.commentBefore.replace(/^/gm,"".concat(t.indent,"#"));R+=`
`.concat(K)}x=v.comment}else v&&q(v)==="object"&&(v=m.schema.createNode(v,!0));t.implicitKey=!1,!d&&!this.comment&&v instanceof N&&(t.indentAtStart=k.length+1),M=!1,!l&&u>=2&&!t.inFlow&&!d&&v instanceof X&&v.type!==p.FLOW_SEQ&&!v.tag&&!m.anchors.getName(v)&&(t.indent=t.indent.substr(2));var Y=P(v,t,function(){return x=null},function(){return M=!0}),Z=" ";if(R||this.comment)Z="".concat(R,`
`).concat(t.indent);else if(!d&&v instanceof W){var Pe=Y[0]==="["||Y[0]==="{";(!Pe||Y.includes(`
`))&&(Z=`
`.concat(t.indent))}else Y[0]===`
`&&(Z="");return M&&!x&&s&&s(),pe(k+Z+Y,t.indent,x)}}]),e}(Q);$(E,"Type",{PAIR:"PAIR",MERGE_PAIR:"MERGE_PAIR"});var Mr=function r(n,e){if(n instanceof ne){var i=e.get(n.source);return i.count*i.aliasCount}else if(n instanceof W){var t=0,a=I(n.items),s;try{for(a.s();!(s=a.n()).done;){var o=s.value,u=r(o,e);u>t&&(t=u)}}catch(f){a.e(f)}finally{a.f()}return t}else if(n instanceof E){var l=r(n.key,e),c=r(n.value,e);return Math.max(l,c)}return 1},ne=function(r){T(e,r);var n=C(e);function e(i){var t;return L(this,e),t=n.call(this),t.source=i,t.type=p.ALIAS,t}return A(e,[{key:"tag",set:function(t){throw new Error("Alias nodes cannot have tags")}},{key:"toJSON",value:function(t,a){if(!a)return z(this.source,t,a);var s=a.anchors,o=a.maxAliasCount,u=s.get(this.source);if(!u||u.res===void 0){var l="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new Ne(this.cstNode,l):new ReferenceError(l)}if(o>=0&&(u.count+=1,u.aliasCount===0&&(u.aliasCount=Mr(this.source,s)),u.count*u.aliasCount>o)){var c="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new Ne(this.cstNode,c):new ReferenceError(c)}return u.res}},{key:"toString",value:function(t){return e.stringify(this,t)}}],[{key:"stringify",value:function(t,a){var s=t.range,o=t.source,u=a.anchors,l=a.doc,c=a.implicitKey,f=a.inStringifyKey,v=Object.keys(u).find(function(g){return u[g]===o});if(!v&&f&&(v=l.anchors.getName(o)||l.anchors.newName()),v)return"*".concat(v).concat(c?" ":"");var h=l.anchors.getName(o)?"Alias node must be after source node":"Source node not found for alias node";throw new Error("".concat(h," [").concat(s,"]"))}}]),e}(Q);$(ne,"default",!0);function le(r,n){var e=n instanceof N?n.value:n,i=I(r),t;try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a instanceof E&&(a.key===n||a.key===e||a.key&&a.key.value===e))return a}}catch(s){i.e(s)}finally{i.f()}}var V=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"add",value:function(t,a){t?t instanceof E||(t=new E(t.key||t,t.value)):t=new E(t);var s=le(this.items,t.key),o=this.schema&&this.schema.sortMapEntries;if(s)if(a)s.value=t.value;else throw new Error("Key ".concat(t.key," already set"));else if(o){var u=this.items.findIndex(function(l){return o(t,l)<0});u===-1?this.items.push(t):this.items.splice(u,0,t)}else this.items.push(t)}},{key:"delete",value:function(t){var a=le(this.items,t);if(!a)return!1;var s=this.items.splice(this.items.indexOf(a),1);return s.length>0}},{key:"get",value:function(t,a){var s=le(this.items,t),o=s&&s.value;return!a&&o instanceof N?o.value:o}},{key:"has",value:function(t){return!!le(this.items,t)}},{key:"set",value:function(t,a){this.add(new E(t,a),!0)}},{key:"toJSON",value:function(t,a,s){var o=s?new s:a&&a.mapAsMap?new Map:{};a&&a.onCreate&&a.onCreate(o);var u=I(this.items),l;try{for(u.s();!(l=u.n()).done;){var c=l.value;c.addToJSMap(a,o)}}catch(f){u.e(f)}finally{u.f()}return o}},{key:"toString",value:function(t,a,s){if(!t)return JSON.stringify(this);var o=I(this.items),u;try{for(o.s();!(u=o.n()).done;){var l=u.value;if(!(l instanceof E))throw new Error("Map items must all be pairs; found ".concat(JSON.stringify(l)," instead"))}}catch(c){o.e(c)}finally{o.f()}return J(j(e.prototype),"toString",this).call(this,t,{blockItem:function(f){return f.str},flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:t.indent||""},a,s)}}]),e}(W),rn="<<",an=function(r){T(e,r);var n=C(e);function e(i){var t;if(L(this,e),i instanceof E){var a=i.value;a instanceof X||(a=new X,a.items.push(i.value),a.range=i.value.range),t=n.call(this,i.key,a),t.range=i.range}else t=n.call(this,new N(rn),new X);return t.type=E.Type.MERGE_PAIR,zt(t)}return A(e,[{key:"addToJSMap",value:function(t,a){var s=I(this.value.items),o;try{for(s.s();!(o=s.n()).done;){var u=o.value.source;if(!(u instanceof V))throw new Error("Merge sources must be maps");var l=u.toJSON(null,t,Map),c=I(l),f;try{for(c.s();!(f=c.n()).done;){var v=Te(f.value,2),h=v[0],g=v[1];a instanceof Map?a.has(h)||a.set(h,g):a instanceof Set?a.add(h):Object.prototype.hasOwnProperty.call(a,h)||Object.defineProperty(a,h,{value:g,writable:!0,enumerable:!0,configurable:!0})}}catch(d){c.e(d)}finally{c.f()}}}catch(d){s.e(d)}finally{s.f()}return a}},{key:"toString",value:function(t,a){var s=this.value;if(s.items.length>1)return J(j(e.prototype),"toString",this).call(this,t,a);this.value=s.items[0];var o=J(j(e.prototype),"toString",this).call(this,t,a);return this.value=s,o}}]),e}(E),Ee={defaultType:p.BLOCK_LITERAL,lineWidth:76},ee={trueStr:"true",falseStr:"false"},oe={asBigInt:!1},de={nullStr:"null"},re={defaultType:p.PLAIN,doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};function pt(r,n,e){var i=I(n),t;try{for(i.s();!(t=i.n()).done;){var a=t.value,s=a.format,o=a.test,u=a.resolve;if(o){var l=r.match(o);if(l){var c=u.apply(null,l);return c instanceof N||(c=new N(c)),s&&(c.format=s),c}}}}catch(f){i.e(f)}finally{i.f()}return e&&(r=e(r)),new N(r)}var sn="flow",ut="block",Qe="quoted",Pt=function(n,e){for(var i=n[e+1];i===" "||i==="	";){do i=n[e+=1];while(i&&i!==`
`);i=n[e+1]}return e};function Ke(r,n,e,i){var t=i.indentAtStart,a=i.lineWidth,s=a===void 0?80:a,o=i.minContentWidth,u=o===void 0?20:o,l=i.onFold,c=i.onOverflow;if(!s||s<0)return r;var f=Math.max(1+u,1+s-n.length);if(r.length<=f)return r;var v=[],h={},g=s-n.length;typeof t=="number"&&(t>s-Math.max(2,u)?v.push(0):g=s-t);var d=void 0,w=void 0,m=!1,b=-1,S=-1,P=-1;e===ut&&(b=Pt(r,b),b!==-1&&(g=b+f));for(var M;M=r[b+=1];){if(e===Qe&&M==="\\"){switch(S=b,r[b+1]){case"x":b+=3;break;case"u":b+=5;break;case"U":b+=9;break;default:b+=1}P=b}if(M===`
`)e===ut&&(b=Pt(r,b)),g=b+f,d=void 0;else{if(M===" "&&w&&w!==" "&&w!==`
`&&w!=="	"){var k=r[b+1];k&&k!==" "&&k!==`
`&&k!=="	"&&(d=b)}if(b>=g)if(d)v.push(d),g=d+f,d=void 0;else if(e===Qe){for(;w===" "||w==="	";)w=M,M=r[b+=1],m=!0;var R=b>P+1?b-2:S-1;if(h[R])return r;v.push(R),h[R]=!0,g=R+f,d=void 0}else m=!0}w=M}if(m&&c&&c(),v.length===0)return r;l&&l();for(var x=r.slice(0,v[0]),K=0;K<v.length;++K){var Y=v[K],Z=v[K+1]||r.length;Y===0?x=`
`.concat(n).concat(r.slice(0,Z)):(e===Qe&&h[Y]&&(x+="".concat(r[Y],"\\")),x+=`
`.concat(n).concat(r.slice(Y+1,Z)))}return x}var gt=function(n){var e=n.indentAtStart;return e?Object.assign({indentAtStart:e},re.fold):re.fold},qe=function(n){return/^(%|---|\.\.\.)/m.test(n)};function Ir(r,n,e){if(!n||n<0)return!1;var i=n-e,t=r.length;if(t<=i)return!1;for(var a=0,s=0;a<t;++a)if(r[a]===`
`){if(a-s>i)return!0;if(s=a+1,t-s<=i)return!1}return!0}function fe(r,n){var e=n.implicitKey,i=re.doubleQuoted,t=i.jsonEncoding,a=i.minMultiLineLength,s=JSON.stringify(r);if(t)return s;for(var o=n.indent||(qe(r)?"  ":""),u="",l=0,c=0,f=s[c];f;f=s[++c])if(f===" "&&s[c+1]==="\\"&&s[c+2]==="n"&&(u+=s.slice(l,c)+"\\ ",c+=1,l=c,f="\\"),f==="\\")switch(s[c+1]){case"u":{u+=s.slice(l,c);var v=s.substr(c+2,4);switch(v){case"0000":u+="\\0";break;case"0007":u+="\\a";break;case"000b":u+="\\v";break;case"001b":u+="\\e";break;case"0085":u+="\\N";break;case"00a0":u+="\\_";break;case"2028":u+="\\L";break;case"2029":u+="\\P";break;default:v.substr(0,2)==="00"?u+="\\x"+v.substr(2):u+=s.substr(c,6)}c+=5,l=c+1}break;case"n":if(e||s[c+2]==='"'||s.length<a)c+=1;else{for(u+=s.slice(l,c)+`

`;s[c+2]==="\\"&&s[c+3]==="n"&&s[c+4]!=='"';)u+=`
`,c+=2;u+=o,s[c+2]===" "&&(u+="\\"),c+=1,l=c+1}break;default:c+=1}return u=l?u+s.slice(l):s,e?u:Ke(u,o,Qe,gt(n))}function on(r,n){if(n.implicitKey){if(/\n/.test(r))return fe(r,n)}else if(/[ \t]\n|\n[ \t]/.test(r))return fe(r,n);var e=n.indent||(qe(r)?"  ":""),i="'"+r.replace(/'/g,"''").replace(/\n+/g,`$&
`.concat(e))+"'";return n.implicitKey?i:Ke(i,e,sn,gt(n))}function Ve(r,n,e,i){var t=r.comment,a=r.type,s=r.value;if(/\n[\t ]+$/.test(s)||/^\s*$/.test(s))return fe(s,n);var o=n.indent||(n.forceBlockIndent||qe(s)?"  ":""),u=o?"2":"1",l=a===p.BLOCK_FOLDED?!1:a===p.BLOCK_LITERAL?!0:!Ir(s,re.fold.lineWidth,o.length),c=l?"|":">";if(!s)return c+`
`;var f="",v="";if(s=s.replace(/[\n\t ]*$/,function(g){var d=g.indexOf(`
`);return d===-1?c+="-":(s===g||d!==g.length-1)&&(c+="+",i&&i()),v=g.replace(/\n$/,""),""}).replace(/^[\n ]*/,function(g){g.indexOf(" ")!==-1&&(c+=u);var d=g.match(/ +$/);return d?(f=g.slice(0,-d[0].length),d[0]):(f=g,"")}),v&&(v=v.replace(/\n+(?!\n|$)/g,"$&".concat(o))),f&&(f=f.replace(/\n+/g,"$&".concat(o))),t&&(c+=" #"+t.replace(/ ?[\r\n]+/g," "),e&&e()),!s)return"".concat(c).concat(u,`
`).concat(o).concat(v);if(l)return s=s.replace(/\n+/g,"$&".concat(o)),"".concat(c,`
`).concat(o).concat(f).concat(s).concat(v);s=s.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,"$&".concat(o));var h=Ke("".concat(f).concat(s).concat(v),o,ut,re.fold);return"".concat(c,`
`).concat(o).concat(h)}function Tr(r,n,e,i){var t=r.comment,a=r.type,s=r.value,o=n.actualString,u=n.implicitKey,l=n.indent,c=n.inFlow;if(u&&/[\n[\]{},]/.test(s)||c&&/[[\]{},]/.test(s))return fe(s,n);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return u||c||s.indexOf(`
`)===-1?s.indexOf('"')!==-1&&s.indexOf("'")===-1?on(s,n):fe(s,n):Ve(r,n,e,i);if(!u&&!c&&a!==p.PLAIN&&s.indexOf(`
`)!==-1)return Ve(r,n,e,i);if(l===""&&qe(s))return n.forceBlockIndent=!0,Ve(r,n,e,i);var f=s.replace(/\n+/g,`$&
`.concat(l));if(o){var v=n.doc.schema.tags,h=pt(f,v,v.scalarFallback).value;if(typeof h!="string")return fe(s,n)}var g=u?f:Ke(f,l,sn,gt(n));return t&&!c&&(g.indexOf(`
`)!==-1||t.indexOf(`
`)!==-1)?(e&&e(),Nr(g,l,t)):g}function dt(r,n,e,i){var t=re.defaultType,a=n.implicitKey,s=n.inFlow,o=r,u=o.type,l=o.value;typeof l!="string"&&(l=String(l),r=Object.assign({},r,{value:l}));var c=function(h){switch(h){case p.BLOCK_FOLDED:case p.BLOCK_LITERAL:return Ve(r,n,e,i);case p.QUOTE_DOUBLE:return fe(l,n);case p.QUOTE_SINGLE:return on(l,n);case p.PLAIN:return Tr(r,n,e,i);default:return null}};(u!==p.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(l)||(a||s)&&(u===p.BLOCK_FOLDED||u===p.BLOCK_LITERAL))&&(u=p.QUOTE_DOUBLE);var f=c(u);if(f===null&&(f=c(t),f===null))throw new Error("Unsupported default string type ".concat(t));return f}function te(r){var n=r.format,e=r.minFractionDigits,i=r.tag,t=r.value;if(typeof t=="bigint")return String(t);if(!isFinite(t))return isNaN(t)?".nan":t<0?"-.inf":".inf";var a=JSON.stringify(t);if(!n&&e&&(!i||i==="tag:yaml.org,2002:float")&&/^\d/.test(a)){var s=a.indexOf(".");s<0&&(s=a.length,a+=".");for(var o=e-(a.length-s-1);o-- >0;)a+="0"}return a}function un(r,n){var e,i;switch(n.type){case p.FLOW_MAP:e="}",i="flow map";break;case p.FLOW_SEQ:e="]",i="flow sequence";break;default:r.push(new O(n,"Not a flow collection!?"));return}for(var t,a=n.items.length-1;a>=0;--a){var s=n.items[a];if(!s||s.type!==p.COMMENT){t=s;break}}if(t&&t.char!==e){var o="Expected ".concat(i," to end with ").concat(e),u;typeof t.offset=="number"?(u=new O(n,o),u.offset=t.offset+1):(u=new O(t,o),t.range&&t.range.end&&(u.offset=t.range.end-t.range.start)),r.push(u)}}function ln(r,n){var e=n.context.src[n.range.start-1];if(e!==`
`&&e!=="	"&&e!==" "){var i="Comments must be separated from other tokens by white space characters";r.push(new O(n,i))}}function fn(r,n){var e=String(n),i=e.substr(0,8)+"..."+e.substr(-8);return new O(r,'The "'.concat(i,'" key is too long'))}function cn(r,n){var e=I(n),i;try{for(e.s();!(i=e.n()).done;){var t=i.value,a=t.afterKey,s=t.before,o=t.comment,u=r.items[s];u?(a&&u.value&&(u=u.value),o===void 0?(a||!u.commentBefore)&&(u.spaceBefore=!0):u.commentBefore?u.commentBefore+=`
`+o:u.commentBefore=o):o!==void 0&&(r.comment?r.comment+=`
`+o:r.comment=o)}}catch(l){e.e(l)}finally{e.f()}}function Ce(r,n){var e=n.strValue;return e?typeof e=="string"?e:(e.errors.forEach(function(i){i.source||(i.source=n),r.errors.push(i)}),e.str):""}function Cr(r,n){var e=n.tag,i=e.handle,t=e.suffix,a=r.tagPrefixes.find(function(u){return u.handle===i});if(!a){var s=r.getDefaults().tagPrefixes;if(s&&(a=s.find(function(u){return u.handle===i})),!a)throw new O(n,"The ".concat(i," tag handle is non-default and was not declared."))}if(!t)throw new O(n,"The ".concat(i," tag has no suffix."));if(i==="!"&&(r.version||r.options.version)==="1.0"){if(t[0]==="^")return r.warnings.push(new ye(n,"YAML 1.0 ^ tag expansion is not supported")),t;if(/[:/]/.test(t)){var o=t.match(/^([a-z0-9-]+)\/(.*)/i);return o?"tag:".concat(o[1],".yaml.org,2002:").concat(o[2]):"tag:".concat(t)}}return a.prefix+decodeURIComponent(t)}function Pr(r,n){var e=n.tag,i=n.type,t=!1;if(e){var a=e.handle,s=e.suffix,o=e.verbatim;if(o){if(o!=="!"&&o!=="!!")return o;var u="Verbatim tags aren't resolved, so ".concat(o," is invalid.");r.errors.push(new O(n,u))}else if(a==="!"&&!s)t=!0;else try{return Cr(r,n)}catch(l){r.errors.push(l)}}switch(i){case p.BLOCK_FOLDED:case p.BLOCK_LITERAL:case p.QUOTE_DOUBLE:case p.QUOTE_SINGLE:return ie.STR;case p.FLOW_MAP:case p.MAP:return ie.MAP;case p.FLOW_SEQ:case p.SEQ:return ie.SEQ;case p.PLAIN:return t?ie.STR:null;default:return null}}function _t(r,n,e){var i=r.schema.tags,t=[],a=I(i),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;if(o.tag===e)if(o.test)t.push(o);else{var u=o.resolve(r,n);return u instanceof W?u:new N(u)}}}catch(c){a.e(c)}finally{a.f()}var l=Ce(r,n);return typeof l=="string"&&t.length>0?pt(l,t,i.scalarFallback):null}function _r(r){var n=r.type;switch(n){case p.FLOW_MAP:case p.MAP:return ie.MAP;case p.FLOW_SEQ:case p.SEQ:return ie.SEQ;default:return ie.STR}}function Rr(r,n,e){try{var i=_t(r,n,e);if(i)return e&&n.tag&&(i.tag=e),i}catch(u){return u.source||(u.source=n),r.errors.push(u),null}try{var t=_r(n);if(!t)throw new Error("The tag ".concat(e," is unavailable"));var a="The tag ".concat(e," is unavailable, falling back to ").concat(t);r.warnings.push(new ye(n,a));var s=_t(r,n,t);return s.tag=e,s}catch(u){var o=new Ne(n,u.message);return o.stack=u.stack,r.errors.push(o),null}}var Br=function(n){if(!n)return!1;var e=n.type;return e===p.MAP_KEY||e===p.MAP_VALUE||e===p.SEQ_ITEM};function Dr(r,n){var e={before:[],after:[]},i=!1,t=!1,a=Br(n.context.parent)?n.context.parent.props.concat(n.props):n.props,s=I(a),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,l=u.start,c=u.end;switch(n.context.src[l]){case B.COMMENT:{if(!n.commentHasRequiredWhitespace(l)){var f="Comments must be separated from other tokens by white space characters";r.push(new O(n,f))}var v=n.header,h=n.valueRange,g=h&&(l>h.start||v&&l>v.start)?e.after:e.before;g.push(n.context.src.slice(l+1,c));break}case B.ANCHOR:if(i){var d="A node can have at most one anchor";r.push(new O(n,d))}i=!0;break;case B.TAG:if(t){var w="A node can have at most one tag";r.push(new O(n,w))}t=!0;break}}}catch(m){s.e(m)}finally{s.f()}return{comments:e,hasAnchor:i,hasTag:t}}function xr(r,n){var e=r.anchors,i=r.errors,t=r.schema;if(n.type===p.ALIAS){var a=n.rawValue,s=e.getNode(a);if(!s){var o="Aliased anchor not found: ".concat(a);return i.push(new Ne(n,o)),null}var u=new ne(s);return e._cstAliases.push(u),u}var l=Pr(r,n);if(l)return Rr(r,n,l);if(n.type!==p.PLAIN){var c="Failed to resolve ".concat(n.type," node here");return i.push(new U(n,c)),null}try{var f=Ce(r,n);return pt(f,t.tags,t.tags.scalarFallback)}catch(v){return v.source||(v.source=n),i.push(v),null}}function se(r,n){if(!n)return null;n.error&&r.errors.push(n.error);var e=Dr(r.errors,n),i=e.comments,t=e.hasAnchor,a=e.hasTag;if(t){var s=r.anchors,o=n.anchor,u=s.getNode(o);u&&(s.map[s.newName(o)]=u),s.map[o]=n}if(n.type===p.ALIAS&&(t||a)){var l="An alias node must not specify any properties";r.errors.push(new O(n,l))}var c=xr(r,n);if(c){c.range=[n.range.start,n.range.end],r.options.keepCstNodes&&(c.cstNode=n),r.options.keepNodeTypes&&(c.type=n.type);var f=i.before.join(`
`);f&&(c.commentBefore=c.commentBefore?"".concat(c.commentBefore,`
`).concat(f):f);var v=i.after.join(`
`);v&&(c.comment=c.comment?"".concat(c.comment,`
`).concat(v):v)}return n.resolved=c}function vn(r,n){if(n.type!==p.MAP&&n.type!==p.FLOW_MAP){var e="A ".concat(n.type," node cannot be resolved as a mapping");return r.errors.push(new U(n,e)),null}var i=n.type===p.FLOW_MAP?$r(r,n):jr(r,n),t=i.comments,a=i.items,s=new V;s.items=a,cn(s,t);for(var o=!1,u=0;u<a.length;++u){var l=a[u].key;if(l instanceof W&&(o=!0),r.schema.merge&&l&&l.value===rn){a[u]=new an(a[u]);var c=a[u].value.items,f=null;c.some(function(w){if(w instanceof ne){var m=w.source.type;return m===p.MAP||m===p.FLOW_MAP?!1:f="Merge nodes aliases can only point to maps"}return f="Merge nodes can only have Alias nodes as values"}),f&&r.errors.push(new O(n,f))}else for(var v=u+1;v<a.length;++v){var h=a[v].key;if(l===h||l&&h&&Object.prototype.hasOwnProperty.call(l,"value")&&l.value===h.value){var g='Map keys must be unique; "'.concat(l,'" is repeated');r.errors.push(new O(n,g));break}}}if(o&&!r.options.mapAsMap){var d="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";r.warnings.push(new ye(n,d))}return n.resolved=s,s}var Fr=function(n){var e=n.context,i=e.lineStart,t=e.node,a=e.src,s=n.props;if(s.length===0)return!1;var o=s[0].start;if(t&&o>t.valueRange.start||a[o]!==B.COMMENT)return!1;for(var u=i;u<o;++u)if(a[u]===`
`)return!1;return!0};function Wr(r,n){if(!!Fr(r)){var e=r.getPropValue(0,B.COMMENT,!0),i=!1,t=n.value.commentBefore;if(t&&t.startsWith(e))n.value.commentBefore=t.substr(e.length+1),i=!0;else{var a=n.value.comment;!r.node&&a&&a.startsWith(e)&&(n.value.comment=a.substr(e.length+1),i=!0)}i&&(n.comment=e)}}function jr(r,n){for(var e=[],i=[],t=void 0,a=null,s=0;s<n.items.length;++s){var o=n.items[s];switch(o.type){case p.BLANK_LINE:e.push({afterKey:!!t,before:i.length});break;case p.COMMENT:e.push({afterKey:!!t,before:i.length,comment:o.comment});break;case p.MAP_KEY:t!==void 0&&i.push(new E(t)),o.error&&r.errors.push(o.error),t=se(r,o.node),a=null;break;case p.MAP_VALUE:{if(t===void 0&&(t=null),o.error&&r.errors.push(o.error),!o.context.atLineStart&&o.node&&o.node.type===p.MAP&&!o.node.context.atLineStart){var u="Nested mappings are not allowed in compact mappings";r.errors.push(new O(o.node,u))}var l=o.node;if(!l&&o.props.length>0){l=new tn(p.PLAIN,[]),l.context={parent:o,src:o.context.src};var c=o.range.start+1;if(l.range={start:c,end:c},l.valueRange={start:c,end:c},typeof o.range.origStart=="number"){var f=o.range.origStart+1;l.range.origStart=l.range.origEnd=f,l.valueRange.origStart=l.valueRange.origEnd=f}}var v=new E(t,se(r,l));Wr(o,v),i.push(v),t&&typeof a=="number"&&o.range.start>a+1024&&r.errors.push(fn(n,t)),t=void 0,a=null}break;default:t!==void 0&&i.push(new E(t)),t=se(r,o),a=o.range.start,o.error&&r.errors.push(o.error);e:for(var h=s+1;;++h){var g=n.items[h];switch(g&&g.type){case p.BLANK_LINE:case p.COMMENT:continue e;case p.MAP_VALUE:break e;default:{var d="Implicit map keys need to be followed by map values";r.errors.push(new O(o,d));break e}}}if(o.valueRangeContainsNewline){var w="Implicit map keys need to be on a single line";r.errors.push(new O(o,w))}}}return t!==void 0&&i.push(new E(t)),{comments:e,items:i}}function $r(r,n){for(var e=[],i=[],t=void 0,a=!1,s="{",o=0;o<n.items.length;++o){var u=n.items[o];if(typeof u.char=="string"){var l=u.char,c=u.offset;if(l==="?"&&t===void 0&&!a){a=!0,s=":";continue}if(l===":"){if(t===void 0&&(t=null),s===":"){s=",";continue}}else if(a&&(t===void 0&&l!==","&&(t=null),a=!1),t!==void 0&&(i.push(new E(t)),t=void 0,l===",")){s=":";continue}if(l==="}"){if(o===n.items.length-1)continue}else if(l===s){s=":";continue}var f="Flow map contains an unexpected ".concat(l),v=new U(n,f);v.offset=c,r.errors.push(v)}else u.type===p.BLANK_LINE?e.push({afterKey:!!t,before:i.length}):u.type===p.COMMENT?(ln(r.errors,u),e.push({afterKey:!!t,before:i.length,comment:u.comment})):t===void 0?(s===","&&r.errors.push(new O(u,"Separator , missing in flow map")),t=se(r,u)):(s!==","&&r.errors.push(new O(u,"Indicator : missing in flow map entry")),i.push(new E(t,se(r,u))),t=void 0,a=!1)}return un(r.errors,n),t!==void 0&&i.push(new E(t)),{comments:e,items:i}}function hn(r,n){if(n.type!==p.SEQ&&n.type!==p.FLOW_SEQ){var e="A ".concat(n.type," node cannot be resolved as a sequence");return r.errors.push(new U(n,e)),null}var i=n.type===p.FLOW_SEQ?Yr(r,n):Ur(r,n),t=i.comments,a=i.items,s=new X;if(s.items=a,cn(s,t),!r.options.mapAsMap&&a.some(function(u){return u instanceof E&&u.key instanceof W})){var o="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";r.warnings.push(new ye(n,o))}return n.resolved=s,s}function Ur(r,n){for(var e=[],i=[],t=0;t<n.items.length;++t){var a=n.items[t];switch(a.type){case p.BLANK_LINE:e.push({before:i.length});break;case p.COMMENT:e.push({comment:a.comment,before:i.length});break;case p.SEQ_ITEM:if(a.error&&r.errors.push(a.error),i.push(se(r,a.node)),a.hasProps){var s="Sequence items cannot have tags or anchors before the - indicator";r.errors.push(new O(a,s))}break;default:a.error&&r.errors.push(a.error),r.errors.push(new U(a,"Unexpected ".concat(a.type," node in sequence")))}}return{comments:e,items:i}}function Yr(r,n){for(var e=[],i=[],t=!1,a=void 0,s=null,o="[",u=null,l=0;l<n.items.length;++l){var c=n.items[l];if(typeof c.char=="string"){var f=c.char,v=c.offset;if(f!==":"&&(t||a!==void 0)&&(t&&a===void 0&&(a=o?i.pop():null),i.push(new E(a)),t=!1,a=void 0,s=null),f===o)o=null;else if(!o&&f==="?")t=!0;else if(o!=="["&&f===":"&&a===void 0){if(o===","){if(a=i.pop(),a instanceof E){var h="Chaining flow sequence pairs is invalid",g=new O(n,h);g.offset=v,r.errors.push(g)}if(!t&&typeof s=="number"){var d=c.range?c.range.start:c.offset;d>s+1024&&r.errors.push(fn(n,a));for(var w=u.context.src,m=s;m<d;++m)if(w[m]===`
`){var b="Implicit keys of flow sequence pairs need to be on a single line";r.errors.push(new O(u,b));break}}}else a=null;s=null,t=!1,o=null}else if(o==="["||f!=="]"||l<n.items.length-1){var S="Flow sequence contains an unexpected ".concat(f),P=new U(n,S);P.offset=v,r.errors.push(P)}}else if(c.type===p.BLANK_LINE)e.push({before:i.length});else if(c.type===p.COMMENT)ln(r.errors,c),e.push({comment:c.comment,before:i.length});else{if(o){var M="Expected a ".concat(o," in flow sequence");r.errors.push(new O(c,M))}var k=se(r,c);a===void 0?(i.push(k),u=c):(i.push(new E(a,k)),a=void 0),s=c.range.start,o=","}}return un(r.errors,n),a!==void 0&&i.push(new E(a)),{comments:e,items:i}}var pn={identify:function(n){return n instanceof Uint8Array},default:!1,tag:"tag:yaml.org,2002:binary",resolve:function(n,e){var i=Ce(n,e);if(typeof Buffer=="function")return Buffer.from(i,"base64");if(typeof atob=="function"){for(var t=atob(i.replace(/[\n\r]/g,"")),a=new Uint8Array(t.length),s=0;s<t.length;++s)a[s]=t.charCodeAt(s);return a}else{var o="This environment does not support reading binary tags; either Buffer or atob is required";return n.errors.push(new Ne(e,o)),null}},options:Ee,stringify:function(n,e,i,t){var a=n.comment,s=n.type,o=n.value,u;if(typeof Buffer=="function")u=o instanceof Buffer?o.toString("base64"):Buffer.from(o.buffer).toString("base64");else if(typeof btoa=="function"){for(var l="",c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);u=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(s||(s=Ee.defaultType),s===p.QUOTE_DOUBLE)o=u;else{for(var f=Ee.lineWidth,v=Math.ceil(u.length/f),h=new Array(v),g=0,d=0;g<v;++g,d+=f)h[g]=u.substr(d,f);o=h.join(s===p.BLOCK_LITERAL?`
`:" ")}return dt({comment:a,type:s,value:o},e,i,t)}};function gn(r,n){for(var e=hn(r,n),i=0;i<e.items.length;++i){var t=e.items[i];if(!(t instanceof E)){if(t instanceof V){if(t.items.length>1){var a="Each pair must have its own sequence indicator";throw new O(n,a)}var s=t.items[0]||new E;t.commentBefore&&(s.commentBefore=s.commentBefore?"".concat(t.commentBefore,`
`).concat(s.commentBefore):t.commentBefore),t.comment&&(s.comment=s.comment?"".concat(t.comment,`
`).concat(s.comment):t.comment),t=s}e.items[i]=t instanceof E?t:new E(t)}}return e}function dn(r,n,e){var i=new X(r);i.tag="tag:yaml.org,2002:pairs";var t=I(n),a;try{for(t.s();!(a=t.n()).done;){var s=a.value,o=void 0,u=void 0;if(Array.isArray(s))if(s.length===2)o=s[0],u=s[1];else throw new TypeError("Expected [key, value] tuple: ".concat(s));else if(s&&s instanceof Object){var l=Object.keys(s);if(l.length===1)o=l[0],u=s[o];else throw new TypeError("Expected { key: value } tuple: ".concat(s))}else o=s;var c=r.createPair(o,u,e);i.items.push(c)}}catch(f){t.e(f)}finally{t.f()}return i}var yn={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:gn,createNode:dn},Ge=function(r){T(e,r);var n=C(e);function e(){var i;return L(this,e),i=n.call(this),$(H(i),"add",V.prototype.add.bind(H(i))),$(H(i),"delete",V.prototype.delete.bind(H(i))),$(H(i),"get",V.prototype.get.bind(H(i))),$(H(i),"has",V.prototype.has.bind(H(i))),$(H(i),"set",V.prototype.set.bind(H(i))),i.tag=e.tag,i}return A(e,[{key:"toJSON",value:function(t,a){var s=new Map;a&&a.onCreate&&a.onCreate(s);var o=I(this.items),u;try{for(o.s();!(u=o.n()).done;){var l=u.value,c=void 0,f=void 0;if(l instanceof E?(c=z(l.key,"",a),f=z(l.value,c,a)):c=z(l,"",a),s.has(c))throw new Error("Ordered maps must not include duplicate keys");s.set(c,f)}}catch(v){o.e(v)}finally{o.f()}return s}}]),e}(X);$(Ge,"tag","tag:yaml.org,2002:omap");function Qr(r,n){var e=gn(r,n),i=[],t=I(e.items),a;try{for(t.s();!(a=t.n()).done;){var s=a.value.key;if(s instanceof N)if(i.includes(s.value)){var o="Ordered maps must not include duplicate keys";throw new O(n,o)}else i.push(s.value)}}catch(u){t.e(u)}finally{t.f()}return Object.assign(new Ge,e)}function Vr(r,n,e){var i=dn(r,n,e),t=new Ge;return t.items=i.items,t}var mn={identify:function(n){return n instanceof Map},nodeClass:Ge,default:!1,tag:"tag:yaml.org,2002:omap",resolve:Qr,createNode:Vr},He=function(r){T(e,r);var n=C(e);function e(){var i;return L(this,e),i=n.call(this),i.tag=e.tag,i}return A(e,[{key:"add",value:function(t){var a=t instanceof E?t:new E(t),s=le(this.items,a.key);s||this.items.push(a)}},{key:"get",value:function(t,a){var s=le(this.items,t);return!a&&s instanceof E?s.key instanceof N?s.key.value:s.key:s}},{key:"set",value:function(t,a){if(typeof a!="boolean")throw new Error("Expected boolean value for set(key, value) in a YAML set, not ".concat(q(a)));var s=le(this.items,t);s&&!a?this.items.splice(this.items.indexOf(s),1):!s&&a&&this.items.push(new E(t))}},{key:"toJSON",value:function(t,a){return J(j(e.prototype),"toJSON",this).call(this,t,a,Set)}},{key:"toString",value:function(t,a,s){if(!t)return JSON.stringify(this);if(this.hasAllNullValues())return J(j(e.prototype),"toString",this).call(this,t,a,s);throw new Error("Set items must all have null values")}}]),e}(V);$(He,"tag","tag:yaml.org,2002:set");function Jr(r,n){var e=vn(r,n);if(!e.hasAllNullValues())throw new O(n,"Set items must all have null values");return Object.assign(new He,e)}function Kr(r,n,e){var i=new He,t=I(n),a;try{for(t.s();!(a=t.n()).done;){var s=a.value;i.items.push(r.createPair(s,null,e))}}catch(o){t.e(o)}finally{t.f()}return i}var wn={identify:function(n){return n instanceof Set},nodeClass:He,default:!1,tag:"tag:yaml.org,2002:set",resolve:Jr,createNode:Kr},yt=function(n,e){var i=e.split(":").reduce(function(t,a){return t*60+Number(a)},0);return n==="-"?-i:i},bn=function(n){var e=n.value;if(isNaN(e)||!isFinite(e))return te(e);var i="";e<0&&(i="-",e=Math.abs(e));var t=[e%60];return e<60?t.unshift(0):(e=Math.round((e-t[0])/60),t.unshift(e%60),e>=60&&(e=Math.round((e-t[0])/60),t.unshift(e))),i+t.map(function(a){return a<10?"0"+String(a):String(a)}).join(":").replace(/000000\d*$/,"")},Sn={identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:function(n,e,i){return yt(e,i.replace(/_/g,""))},stringify:bn},kn={identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:function(n,e,i){return yt(e,i.replace(/_/g,""))},stringify:bn},On={identify:function(n){return n instanceof Date},default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:function(n,e,i,t,a,s,o,u,l){u&&(u=(u+"00").substr(1,3));var c=Date.UTC(e,i-1,t,a||0,s||0,o||0,u||0);if(l&&l!=="Z"){var f=yt(l[0],l.slice(1));Math.abs(f)<30&&(f*=60),c-=6e4*f}return new Date(c)},stringify:function(n){var e=n.value;return e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")}};function En(r){var n=typeof process!="undefined"&&process.env||{};return r?typeof YAML_SILENCE_DEPRECATION_WARNINGS!="undefined"?!YAML_SILENCE_DEPRECATION_WARNINGS:!n.YAML_SILENCE_DEPRECATION_WARNINGS:typeof YAML_SILENCE_WARNINGS!="undefined"?!YAML_SILENCE_WARNINGS:!n.YAML_SILENCE_WARNINGS}function Ln(r,n){if(En(!1)){var e=typeof process!="undefined"&&process.emitWarning;e?e(r,n):console.warn(n?"".concat(n,": ").concat(r):r)}}var Rt={};function qr(r,n){if(!Rt[r]&&En(!0)){Rt[r]=!0;var e="The option '".concat(r,"' will be removed in a future release");e+=n?", use '".concat(n,"' instead."):".",Ln(e,"DeprecationWarning")}}function Gr(r,n,e){var i=new V(r);if(n instanceof Map){var t=I(n),a;try{for(t.s();!(a=t.n()).done;){var s=Te(a.value,2),o=s[0],u=s[1];i.items.push(r.createPair(o,u,e))}}catch(v){t.e(v)}finally{t.f()}}else if(n&&q(n)==="object")for(var l=0,c=Object.keys(n);l<c.length;l++){var f=c[l];i.items.push(r.createPair(f,n[f],e))}return typeof r.sortMapEntries=="function"&&i.items.sort(r.sortMapEntries),i}var Me={createNode:Gr,default:!0,nodeClass:V,tag:"tag:yaml.org,2002:map",resolve:vn};function Hr(r,n,e){var i=new X(r);if(n&&n[Symbol.iterator]){var t=I(n),a;try{for(t.s();!(a=t.n()).done;){var s=a.value,o=r.createNode(s,e.wrapScalars,null,e);i.items.push(o)}}catch(u){t.e(u)}finally{t.f()}}return i}var ze={createNode:Hr,default:!0,nodeClass:X,tag:"tag:yaml.org,2002:seq",resolve:hn},zr={identify:function(n){return typeof n=="string"},default:!0,tag:"tag:yaml.org,2002:str",resolve:Ce,stringify:function(n,e,i,t){return e=Object.assign({actualString:!0},e),dt(n,e,i,t)},options:re},mt=[Me,ze,zr],Ze=function(n){return typeof n=="bigint"||Number.isInteger(n)},wt=function(n,e,i){return oe.asBigInt?BigInt(n):parseInt(e,i)};function Nn(r,n,e){var i=r.value;return Ze(i)&&i>=0?e+i.toString(n):te(r)}var An={identify:function(n){return n==null},createNode:function(n,e,i){return i.wrapScalars?new N(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:de,stringify:function(){return de.nullStr}},Mn={identify:function(n){return typeof n=="boolean"},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:function(n){return n[0]==="t"||n[0]==="T"},options:ee,stringify:function(n){var e=n.value;return e?ee.trueStr:ee.falseStr}},In={identify:function(n){return Ze(n)&&n>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:function(n,e){return wt(n,e,8)},options:oe,stringify:function(n){return Nn(n,8,"0o")}},Tn={identify:Ze,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:function(n){return wt(n,n,10)},options:oe,stringify:te},Cn={identify:function(n){return Ze(n)&&n>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:function(n,e){return wt(n,e,16)},options:oe,stringify:function(n){return Nn(n,16,"0x")}},Pn={identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(n,e){return e?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:te},_n={identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:function(n){return parseFloat(n)},stringify:function(n){var e=n.value;return Number(e).toExponential()}},Rn={identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/,resolve:function(n,e,i){var t=e||i,a=new N(parseFloat(n));return t&&t[t.length-1]==="0"&&(a.minFractionDigits=t.length),a},stringify:te},Zr=mt.concat([An,Mn,In,Tn,Cn,Pn,_n,Rn]),Bt=function(n){return typeof n=="bigint"||Number.isInteger(n)},xe=function(n){var e=n.value;return JSON.stringify(e)},Bn=[Me,ze,{identify:function(n){return typeof n=="string"},default:!0,tag:"tag:yaml.org,2002:str",resolve:Ce,stringify:xe},{identify:function(n){return n==null},createNode:function(n,e,i){return i.wrapScalars?new N(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:function(){return null},stringify:xe},{identify:function(n){return typeof n=="boolean"},default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:function(n){return n==="true"},stringify:xe},{identify:Bt,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:function(n){return oe.asBigInt?BigInt(n):parseInt(n,10)},stringify:function(n){var e=n.value;return Bt(e)?e.toString():JSON.stringify(e)}},{identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:function(n){return parseFloat(n)},stringify:xe}];Bn.scalarFallback=function(r){throw new SyntaxError("Unresolved plain scalar ".concat(JSON.stringify(r)))};var Dt=function(n){var e=n.value;return e?ee.trueStr:ee.falseStr},ke=function(n){return typeof n=="bigint"||Number.isInteger(n)};function Fe(r,n,e){var i=n.replace(/_/g,"");if(oe.asBigInt){switch(e){case 2:i="0b".concat(i);break;case 8:i="0o".concat(i);break;case 16:i="0x".concat(i);break}var t=BigInt(i);return r==="-"?BigInt(-1)*t:t}var a=parseInt(i,e);return r==="-"?-1*a:a}function nt(r,n,e){var i=r.value;if(ke(i)){var t=i.toString(n);return i<0?"-"+e+t.substr(1):e+t}return te(r)}var Xr=mt.concat([{identify:function(n){return n==null},createNode:function(n,e,i){return i.wrapScalars?new N(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:de,stringify:function(){return de.nullStr}},{identify:function(n){return typeof n=="boolean"},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:function(){return!0},options:ee,stringify:Dt},{identify:function(n){return typeof n=="boolean"},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:function(){return!1},options:ee,stringify:Dt},{identify:ke,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^([-+]?)0b([0-1_]+)$/,resolve:function(n,e,i){return Fe(e,i,2)},stringify:function(n){return nt(n,2,"0b")}},{identify:ke,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^([-+]?)0([0-7_]+)$/,resolve:function(n,e,i){return Fe(e,i,8)},stringify:function(n){return nt(n,8,"0")}},{identify:ke,default:!0,tag:"tag:yaml.org,2002:int",test:/^([-+]?)([0-9][0-9_]*)$/,resolve:function(n,e,i){return Fe(e,i,10)},stringify:te},{identify:ke,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^([-+]?)0x([0-9a-fA-F_]+)$/,resolve:function(n,e,i){return Fe(e,i,16)},stringify:function(n){return nt(n,16,"0x")}},{identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(n,e){return e?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:te},{identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:function(n){return parseFloat(n.replace(/_/g,""))},stringify:function(n){var e=n.value;return Number(e).toExponential()}},{identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve:function(n,e){var i=new N(parseFloat(n.replace(/_/g,"")));if(e){var t=e.replace(/_/g,"");t[t.length-1]==="0"&&(i.minFractionDigits=t.length)}return i},stringify:te}],pn,mn,yn,wn,Sn,kn,On),ea={core:Zr,failsafe:mt,json:Bn,yaml11:Xr},ta={binary:pn,bool:Mn,float:Rn,floatExp:_n,floatNaN:Pn,floatTime:kn,int:Tn,intHex:Cn,intOct:In,intTime:Sn,map:Me,null:An,omap:mn,pairs:yn,seq:ze,set:wn,timestamp:On};function na(r,n,e){if(n){var i=e.filter(function(a){return a.tag===n}),t=i.find(function(a){return!a.format})||i[0];if(!t)throw new Error("Tag ".concat(n," not found"));return t}return e.find(function(a){return(a.identify&&a.identify(r)||a.class&&r instanceof a.class)&&!a.format})}function ra(r,n,e){if(r instanceof Q)return r;var i=e.defaultPrefix,t=e.onTagObj,a=e.prevObjects,s=e.schema,o=e.wrapScalars;n&&n.startsWith("!!")&&(n=i+n.slice(2));var u=na(r,n,s.tags);if(!u){if(typeof r.toJSON=="function"&&(r=r.toJSON()),!r||q(r)!=="object")return o?new N(r):r;u=r instanceof Map?Me:r[Symbol.iterator]?ze:Me}t&&(t(u),delete e.onTagObj);var l={value:void 0,node:void 0};if(r&&q(r)==="object"&&a){var c=a.get(r);if(c){var f=new ne(c);return e.aliasNodes.push(f),f}l.value=r,a.set(r,l)}return l.node=u.createNode?u.createNode(e.schema,r,e):o?new N(r):r,n&&l.node instanceof Q&&(l.node.tag=n),l.node}function aa(r,n,e,i){var t=r[i.replace(/\W/g,"")];if(!t){var a=Object.keys(r).map(function(h){return JSON.stringify(h)}).join(", ");throw new Error('Unknown schema "'.concat(i,'"; use one of ').concat(a))}if(Array.isArray(e)){var s=I(e),o;try{for(s.s();!(o=s.n()).done;){var u=o.value;t=t.concat(u)}}catch(h){s.e(h)}finally{s.f()}}else typeof e=="function"&&(t=e(t.slice()));for(var l=0;l<t.length;++l){var c=t[l];if(typeof c=="string"){var f=n[c];if(!f){var v=Object.keys(n).map(function(h){return JSON.stringify(h)}).join(", ");throw new Error('Unknown custom tag "'.concat(c,'"; use one of ').concat(v))}t[l]=f}}return t}var ia=function(n,e){return n.key<e.key?-1:n.key>e.key?1:0},Ie=function(){function r(n){var e=n.customTags,i=n.merge,t=n.schema,a=n.sortMapEntries,s=n.tags;L(this,r),this.merge=!!i,this.name=t,this.sortMapEntries=a===!0?ia:a||null,!e&&s&&qr("tags","customTags"),this.tags=aa(ea,ta,e||s,t)}return A(r,[{key:"createNode",value:function(e,i,t,a){var s={defaultPrefix:r.defaultPrefix,schema:this,wrapScalars:i},o=a?Object.assign(a,s):s;return ra(e,t,o)}},{key:"createPair",value:function(e,i,t){t||(t={wrapScalars:!0});var a=this.createNode(e,t.wrapScalars,null,t),s=this.createNode(i,t.wrapScalars,null,t);return new E(a,s)}}]),r}();$(Ie,"defaultPrefix",Ye);$(Ie,"defaultTags",ie);var Je={anchorPrefix:"a",customTags:null,indent:2,indentSeq:!0,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,simpleKeys:!1,version:"1.2"},sa={get binary(){return Ee},set binary(r){Object.assign(Ee,r)},get bool(){return ee},set bool(r){Object.assign(ee,r)},get int(){return oe},set int(r){Object.assign(oe,r)},get null(){return de},set null(r){Object.assign(de,r)},get str(){return re},set str(r){Object.assign(re,r)}},Dn={"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:Ye},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:Ye}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:Ye}]}};function xt(r,n){if((r.version||r.options.version)==="1.0"){var e=n.match(/^tag:private\.yaml\.org,2002:([^:/]+)$/);if(e)return"!"+e[1];var i=n.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return i?"!".concat(i[1],"/").concat(i[2]):"!".concat(n.replace(/^tag:/,""))}var t=r.tagPrefixes.find(function(o){return n.indexOf(o.prefix)===0});if(!t){var a=r.getDefaults().tagPrefixes;t=a&&a.find(function(o){return n.indexOf(o.prefix)===0})}if(!t)return n[0]==="!"?n:"!<".concat(n,">");var s=n.substr(t.prefix.length).replace(/[!,[\]{}]/g,function(o){return{"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"}[o]});return t.handle+s}function oa(r,n){if(n instanceof ne)return ne;if(n.tag){var e=r.filter(function(o){return o.tag===n.tag});if(e.length>0)return e.find(function(o){return o.format===n.format})||e[0]}var i,t;if(n instanceof N){t=n.value;var a=r.filter(function(o){return o.identify&&o.identify(t)||o.class&&t instanceof o.class});i=a.find(function(o){return o.format===n.format})||a.find(function(o){return!o.format})}else t=n,i=r.find(function(o){return o.nodeClass&&t instanceof o.nodeClass});if(!i){var s=t&&t.constructor?t.constructor.name:q(t);throw new Error("Tag not resolved for ".concat(s," value"))}return i}function ua(r,n,e){var i=e.anchors,t=e.doc,a=[],s=t.anchors.getName(r);return s&&(i[s]=r,a.push("&".concat(s))),r.tag?a.push(xt(t,r.tag)):n.default||a.push(xt(t,n.tag)),a.join(" ")}function We(r,n,e,i){var t=n.doc,a=t.anchors,s=t.schema,o;if(!(r instanceof Q)){var u={aliasNodes:[],onTagObj:function(w){return o=w},prevObjects:new Map};r=s.createNode(r,!0,null,u);var l=I(u.aliasNodes),c;try{for(l.s();!(c=l.n()).done;){var f=c.value;f.source=f.source.node;var v=a.getName(f.source);v||(v=a.newName(),a.map[v]=f.source)}}catch(d){l.e(d)}finally{l.f()}}if(r instanceof E)return r.toString(n,e,i);o||(o=oa(s.tags,r));var h=ua(r,o,n);h.length>0&&(n.indentAtStart=(n.indentAtStart||0)+h.length+1);var g=typeof o.stringify=="function"?o.stringify(r,n,e,i):r instanceof N?dt(r,n,e,i):r.toString(n,e,i);return h?r instanceof N||g[0]==="{"||g[0]==="["?"".concat(h," ").concat(g):"".concat(h,`
`).concat(n.indent).concat(g):g}var la=function(){function r(n){L(this,r),$(this,"map",Object.create(null)),this.prefix=n}return A(r,[{key:"createAlias",value:function(e,i){return this.setAnchor(e,i),new ne(e)}},{key:"createMergePair",value:function(){for(var e=this,i=new an,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return i.value.items=a.map(function(o){if(o instanceof ne){if(o.source instanceof V)return o}else if(o instanceof V)return e.createAlias(o);throw new Error("Merge sources must be Map nodes or their Aliases")}),i}},{key:"getName",value:function(e){var i=this.map;return Object.keys(i).find(function(t){return i[t]===e})}},{key:"getNames",value:function(){return Object.keys(this.map)}},{key:"getNode",value:function(e){return this.map[e]}},{key:"newName",value:function(e){e||(e=this.prefix);for(var i=Object.keys(this.map),t=1;;++t){var a="".concat(e).concat(t);if(!i.includes(a))return a}}},{key:"resolveNodes",value:function(){var e=this.map,i=this._cstAliases;Object.keys(e).forEach(function(t){e[t]=e[t].resolved}),i.forEach(function(t){t.source=t.source.resolved}),delete this._cstAliases}},{key:"setAnchor",value:function(e,i){if(e!=null&&!r.validAnchorNode(e))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(i&&/[\x00-\x19\s,[\]{}]/.test(i))throw new Error("Anchor names must not contain whitespace or control characters");var t=this.map,a=e&&Object.keys(t).find(function(s){return t[s]===e});if(a)if(i)a!==i&&(delete t[a],t[i]=e);else return a;else{if(!i){if(!e)return null;i=this.newName()}t[i]=e}return i}}],[{key:"validAnchorNode",value:function(e){return e instanceof N||e instanceof X||e instanceof V}}]),r}(),fa=function r(n,e){if(n&&q(n)==="object"){var i=n.tag;n instanceof W?(i&&(e[i]=!0),n.items.forEach(function(t){return r(t,e)})):n instanceof E?(r(n.key,e),r(n.value,e)):n instanceof N&&i&&(e[i]=!0)}return e},ca=function(n){return Object.keys(fa(n,{}))};function va(r,n){var e={before:[],after:[]},i=void 0,t=!1,a=I(n),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;if(o.valueRange){if(i!==void 0){var u="Document contains trailing content not separated by a ... or --- line";r.errors.push(new U(o,u));break}var l=se(r,o);t&&(l.spaceBefore=!0,t=!1),i=l}else if(o.comment!==null){var c=i===void 0?e.before:e.after;c.push(o.comment)}else o.type===p.BLANK_LINE&&(t=!0,i===void 0&&e.before.length>0&&!r.commentBefore&&(r.commentBefore=e.before.join(`
`),e.before=[]))}}catch(h){a.e(h)}finally{a.f()}if(r.contents=i||null,!i)r.comment=e.before.concat(e.after).join(`
`)||null;else{var f=e.before.join(`
`);if(f){var v=i instanceof W&&i.items[0]?i.items[0]:i;v.commentBefore=v.commentBefore?"".concat(f,`
`).concat(v.commentBefore):f}r.comment=e.after.join(`
`)||null}}function ha(r,n){var e=r.tagPrefixes,i=Te(n.parameters,2),t=i[0],a=i[1];if(!t||!a){var s="Insufficient parameters given for %TAG directive";throw new O(n,s)}if(e.some(function(u){return u.handle===t})){var o="The %TAG directive must only be given at most once per handle in the same document.";throw new O(n,o)}return{handle:t,prefix:a}}function pa(r,n){var e=Te(n.parameters,1),i=e[0];if(n.name==="YAML:1.0"&&(i="1.0"),!i){var t="Insufficient parameters given for %YAML directive";throw new O(n,t)}if(!Dn[i]){var a=r.version||r.options.version,s="Document will be parsed as YAML ".concat(a," rather than YAML ").concat(i);r.warnings.push(new ye(n,s))}return i}function ga(r,n,e){var i=[],t=!1,a=I(n),s;try{for(a.s();!(s=a.n()).done;){var o=s.value,u=o.comment,l=o.name;switch(l){case"TAG":try{r.tagPrefixes.push(ha(r,o))}catch(h){r.errors.push(h)}t=!0;break;case"YAML":case"YAML:1.0":if(r.version){var c="The %YAML directive must only be given at most once per document.";r.errors.push(new O(o,c))}try{r.version=pa(r,o)}catch(h){r.errors.push(h)}t=!0;break;default:if(l){var f="YAML only supports %TAG and %YAML directives, and not %".concat(l);r.warnings.push(new ye(o,f))}}u&&i.push(u)}}catch(h){a.e(h)}finally{a.f()}if(e&&!t&&(r.version||e.version||r.options.version)==="1.1"){var v=function(g){var d=g.handle,w=g.prefix;return{handle:d,prefix:w}};r.tagPrefixes=e.tagPrefixes.map(v),r.version=e.version}r.commentBefore=i.join(`
`)||null}function ve(r){if(r instanceof W)return!0;throw new Error("Expected a YAML collection as document contents")}var bt=function(){function r(n){L(this,r),this.anchors=new la(n.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=n,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}return A(r,[{key:"add",value:function(e){return ve(this.contents),this.contents.add(e)}},{key:"addIn",value:function(e,i){ve(this.contents),this.contents.addIn(e,i)}},{key:"delete",value:function(e){return ve(this.contents),this.contents.delete(e)}},{key:"deleteIn",value:function(e){return Se(e)?this.contents==null?!1:(this.contents=null,!0):(ve(this.contents),this.contents.deleteIn(e))}},{key:"getDefaults",value:function(){return r.defaults[this.version]||r.defaults[this.options.version]||{}}},{key:"get",value:function(e,i){return this.contents instanceof W?this.contents.get(e,i):void 0}},{key:"getIn",value:function(e,i){return Se(e)?!i&&this.contents instanceof N?this.contents.value:this.contents:this.contents instanceof W?this.contents.getIn(e,i):void 0}},{key:"has",value:function(e){return this.contents instanceof W?this.contents.has(e):!1}},{key:"hasIn",value:function(e){return Se(e)?this.contents!==void 0:this.contents instanceof W?this.contents.hasIn(e):!1}},{key:"set",value:function(e,i){ve(this.contents),this.contents.set(e,i)}},{key:"setIn",value:function(e,i){Se(e)?this.contents=i:(ve(this.contents),this.contents.setIn(e,i))}},{key:"setSchema",value:function(e,i){if(!(!e&&!i&&this.schema)){typeof e=="number"&&(e=e.toFixed(1)),e==="1.0"||e==="1.1"||e==="1.2"?(this.version?this.version=e:this.options.version=e,delete this.options.schema):e&&typeof e=="string"&&(this.options.schema=e),Array.isArray(i)&&(this.options.customTags=i);var t=Object.assign({},this.getDefaults(),this.options);this.schema=new Ie(t)}}},{key:"parse",value:function(e,i){this.options.keepCstNodes&&(this.cstNode=e),this.options.keepNodeTypes&&(this.type="DOCUMENT");var t=e.directives,a=t===void 0?[]:t,s=e.contents,o=s===void 0?[]:s,u=e.directivesEndMarker,l=e.error,c=e.valueRange;if(l&&(l.source||(l.source=this),this.errors.push(l)),ga(this,a,i),u&&(this.directivesEndMarker=!0),this.range=c?[c.start,c.end]:null,this.setSchema(),this.anchors._cstAliases=[],va(this,o),this.anchors.resolveNodes(),this.options.prettyErrors){var f=I(this.errors),v;try{for(f.s();!(v=f.n()).done;){var h=v.value;h instanceof ge&&h.makePretty()}}catch(m){f.e(m)}finally{f.f()}var g=I(this.warnings),d;try{for(g.s();!(d=g.n()).done;){var w=d.value;w instanceof ge&&w.makePretty()}}catch(m){g.e(m)}finally{g.f()}}return this}},{key:"listNonDefaultTags",value:function(){return ca(this.contents).filter(function(e){return e.indexOf(Ie.defaultPrefix)!==0})}},{key:"setTagPrefix",value:function(e,i){if(e[0]!=="!"||e[e.length-1]!=="!")throw new Error("Handle must start and end with !");if(i){var t=this.tagPrefixes.find(function(a){return a.handle===e});t?t.prefix=i:this.tagPrefixes.push({handle:e,prefix:i})}else this.tagPrefixes=this.tagPrefixes.filter(function(a){return a.handle!==e})}},{key:"toJSON",value:function(e,i){var t=this,a=this.options,s=a.keepBlobsInJSON,o=a.mapAsMap,u=a.maxAliasCount,l=s&&(typeof e!="string"||!(this.contents instanceof N)),c={doc:this,indentStep:"  ",keep:l,mapAsMap:l&&!!o,maxAliasCount:u,stringify:We},f=Object.keys(this.anchors.map);f.length>0&&(c.anchors=new Map(f.map(function(b){return[t.anchors.map[b],{alias:[],aliasCount:0,count:1}]})));var v=z(this.contents,e,c);if(typeof i=="function"&&c.anchors){var h=I(c.anchors.values()),g;try{for(h.s();!(g=h.n()).done;){var d=g.value,w=d.count,m=d.res;i(m,w)}}catch(b){h.e(b)}finally{h.f()}}return v}},{key:"toString",value:function(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");var e=this.options.indent;if(!Number.isInteger(e)||e<=0){var i=JSON.stringify(e);throw new Error('"indent" option must be a positive integer, not '.concat(i))}this.setSchema();var t=[],a=!1;if(this.version){var s="%YAML 1.2";this.schema.name==="yaml-1.1"&&(this.version==="1.0"?s="%YAML:1.0":this.version==="1.1"&&(s="%YAML 1.1")),t.push(s),a=!0}var o=this.listNonDefaultTags();this.tagPrefixes.forEach(function(h){var g=h.handle,d=h.prefix;o.some(function(w){return w.indexOf(d)===0})&&(t.push("%TAG ".concat(g," ").concat(d)),a=!0)}),(a||this.directivesEndMarker)&&t.push("---"),this.commentBefore&&((a||!this.directivesEndMarker)&&t.unshift(""),t.unshift(this.commentBefore.replace(/^/gm,"#")));var u={anchors:Object.create(null),doc:this,indent:"",indentStep:" ".repeat(e),stringify:We},l=!1,c=null;if(this.contents){this.contents instanceof Q&&(this.contents.spaceBefore&&(a||this.directivesEndMarker)&&t.push(""),this.contents.commentBefore&&t.push(this.contents.commentBefore.replace(/^/gm,"#")),u.forceBlockIndent=!!this.comment,c=this.contents.comment);var f=c?null:function(){return l=!0},v=We(this.contents,u,function(){return c=null},f);t.push(pe(v,"",c))}else this.contents!==void 0&&t.push(We(this.contents,u));return this.comment&&((!l||c)&&t[t.length-1]!==""&&t.push(""),t.push(this.comment.replace(/^/gm,"#"))),t.join(`
`)+`
`}}]),r}();$(bt,"defaults",Dn);function da(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=arguments.length>2?arguments[2]:void 0;e===void 0&&typeof n=="string"&&(e=n,n=!0);var i=Object.assign({},bt.defaults[Je.version],Je),t=new Ie(i);return t.createNode(r,n,e)}var Xe=function(r){T(e,r);var n=C(e);function e(i){return L(this,e),n.call(this,Object.assign({},Je,i))}return e}(bt);function ya(r,n){var e=[],i,t=I(ht(r)),a;try{for(t.s();!(a=t.n()).done;){var s=a.value,o=new Xe(n);o.parse(s,i),e.push(o),i=o}}catch(u){t.e(u)}finally{t.f()}return e}function xn(r,n){var e=ht(r),i=new Xe(n).parse(e[0]);if(e.length>1){var t="Source contains multiple documents; please use YAML.parseAllDocuments()";i.errors.unshift(new O(e[1],t))}return i}function ma(r,n){var e=xn(r,n);if(e.warnings.forEach(function(i){return Ln(i)}),e.errors.length>0)throw e.errors[0];return e.toJSON()}function wa(r,n){var e=new Xe(n);return e.contents=r,String(e)}var ba={createNode:da,defaultOptions:Je,Document:Xe,parse:ma,parseAllDocuments:ya,parseCST:ht,parseDocument:xn,scalarOptions:sa,stringify:wa},Sa=Object.freeze(Object.defineProperty({__proto__:null,YAML:ba},Symbol.toStringTag,{value:"Module"})),ka=Vn(Sa),Oa=ka.YAML;class Ea{static addMeta(n,e){const i=Oa.stringify(e);return`---
`+i+`---

`+n}static trimTitle(n){return(n.startsWith("#")?n.substr(1).trimLeft():n).replace(new RegExp(`[\r
]`),"")}static trimBodyHeader(n){return n.startsWith("# ")?n.split(`
`).slice(1).join(`
`).trimLeft():n}}const Ft=new ft,La=r=>{const[n,e]=jt(r.onConvertNote);return F.exports.createElement(he,{dataSource:r.url.matchNotes,className:Gt.sub2,loading:n.loading,renderItem:i=>F.exports.createElement(he.Item,{key:i.id},F.exports.createElement(Zn,null,F.exports.createElement($e.Text,null,i.title),F.exports.createElement($t,{onClick:()=>e(i)},je.t("convertExternalLink.action.convert"))))})},Wt=r=>r.urls.length!==0,Fa=()=>{const[r,n]=F.exports.useState([]),[e,i]=jt(async function(s){if(s===""){n([]);return}const o=await Ft.search(s);console.log("onSearch: ",o),n(o.filter(Wt))});async function t(a){console.log("onConvertNote: ",a),await Ft.convert(a.noteId,{[a.url]:{title:Ea.trimTitle(a.linkNoteTitle),url:`:/${a.linkNoteId}`}}),n(Gn(s=>{console.log("remove: ",a.noteIndex,a.urlIndex),s[a.noteIndex].urls.splice(a.urlIndex,1),s.filter(o=>o.urls.length!==0)})),n(s=>s.filter(Wt)),Jn.success(je.t("convertExternalLink.msg.success"))}return F.exports.createElement(Hn,{title:je.t("convertExternalLink.title")},F.exports.createElement(zn.Search,{onSearch:i,allowClear:!0,loading:e.loading}),F.exports.createElement(he,{dataSource:r,itemLayout:"vertical",loading:e.loading,renderItem:(a,s)=>F.exports.createElement(he.Item,{key:a.id,extra:[F.exports.createElement($t,{onClick:()=>qn(a.id)},je.t("common.action.open"))]},F.exports.createElement($e.Title,{level:4},a.title),F.exports.createElement(he,{dataSource:a.urls,className:Gt.sub1,itemLayout:"vertical",renderItem:(o,u)=>F.exports.createElement(he.Item,{key:u},F.exports.createElement($e.Title,{level:5},o.title),F.exports.createElement($e.Link,null,o.url),o.matchNotes&&o.matchNotes.length!==0&&F.exports.createElement(La,{url:o,onConvertNote:l=>t({noteId:a.id,url:o.url,linkNoteId:l.id,linkNoteTitle:l.title,noteIndex:s,urlIndex:u})}))}))}))};export{Fa as default};
