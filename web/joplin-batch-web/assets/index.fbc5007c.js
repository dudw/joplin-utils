var jn=Object.defineProperty,$n=Object.defineProperties;var Un=Object.getOwnPropertyDescriptors;var Et=Object.getOwnPropertySymbols;var Yn=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable;var Lt=(r,n,e)=>n in r?jn(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e,et=(r,n)=>{for(var e in n||(n={}))Yn.call(n,e)&&Lt(r,e,n[e]);if(Et)for(var e of Et(n))Qn.call(n,e)&&Lt(r,e,n[e]);return r},tt=(r,n)=>$n(r,Un(n));import{aA as Vn,r as F,as as jt,z as je,B as Jn}from"./index.efb12cde.js";import{n as Kn,j as he,B as $t}from"./joplinApiGenerator.9092228f.js";import{m as Nt}from"./index.esm.af52872f.js";import{p as qn}from"./immer.esm.d3122d4a.js";import{C as Gn}from"./index.1eb4b65f.js";import{I as Hn}from"./index.ab93ebe2.js";import{L as pe}from"./index.5cb1bda4.js";import{T as $e}from"./index.faf5f02f.js";import{S as zn}from"./index.4a2d7bba.js";import"./TextArea.1da65b23.js";import"./EyeOutlined.7cd61c18.js";function Zn(){return new Worker("./assets/MarkdownLinkUtil.409fecb5.js",{type:"module"})}const Ut=Symbol("Comlink.proxy"),Xn=Symbol("Comlink.endpoint"),er=Symbol("Comlink.releaseProxy"),rt=Symbol("Comlink.thrown"),Yt=r=>typeof r=="object"&&r!==null||typeof r=="function",tr={canHandle:r=>Yt(r)&&r[Ut],serialize(r){const{port1:n,port2:e}=new MessageChannel;return Vt(r,n),[e,[e]]},deserialize(r){return r.start(),Kt(r)}},nr={canHandle:r=>Yt(r)&&rt in r,serialize({value:r}){let n;return r instanceof Error?n={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:n={isError:!1,value:r},[n,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},Qt=new Map([["proxy",tr],["throw",nr]]);function Vt(r,n=self){n.addEventListener("message",function e(a){if(!a||!a.data)return;const{id:t,type:i,path:s}=Object.assign({path:[]},a.data),o=(a.data.argumentList||[]).map(ue);let u;try{const l=s.slice(0,-1).reduce((c,v)=>c[v],r),f=s.reduce((c,v)=>c[v],r);switch(i){case"GET":u=f;break;case"SET":l[s.slice(-1)[0]]=ue(a.data.value),u=!0;break;case"APPLY":u=f.apply(l,o);break;case"CONSTRUCT":{const c=new f(...o);u=sr(c)}break;case"ENDPOINT":{const{port1:c,port2:v}=new MessageChannel;Vt(r,v),u=ir(c,[c])}break;case"RELEASE":u=void 0;break;default:return}}catch(l){u={value:l,[rt]:0}}Promise.resolve(u).catch(l=>({value:l,[rt]:0})).then(l=>{const[f,c]=lt(l);n.postMessage(Object.assign(Object.assign({},f),{id:t}),c),i==="RELEASE"&&(n.removeEventListener("message",e),Jt(n))})}),n.start&&n.start()}function rr(r){return r.constructor.name==="MessagePort"}function Jt(r){rr(r)&&r.close()}function Kt(r,n){return at(r,[],n)}function Be(r){if(r)throw new Error("Proxy has been released and is not useable")}function at(r,n=[],e=function(){}){let a=!1;const t=new Proxy(e,{get(i,s){if(Be(a),s===er)return()=>ce(r,{type:"RELEASE",path:n.map(o=>o.toString())}).then(()=>{Jt(r),a=!0});if(s==="then"){if(n.length===0)return{then:()=>t};const o=ce(r,{type:"GET",path:n.map(u=>u.toString())}).then(ue);return o.then.bind(o)}return at(r,[...n,s])},set(i,s,o){Be(a);const[u,l]=lt(o);return ce(r,{type:"SET",path:[...n,s].map(f=>f.toString()),value:u},l).then(ue)},apply(i,s,o){Be(a);const u=n[n.length-1];if(u===Xn)return ce(r,{type:"ENDPOINT"}).then(ue);if(u==="bind")return at(r,n.slice(0,-1));const[l,f]=At(o);return ce(r,{type:"APPLY",path:n.map(c=>c.toString()),argumentList:l},f).then(ue)},construct(i,s){Be(a);const[o,u]=At(s);return ce(r,{type:"CONSTRUCT",path:n.map(l=>l.toString()),argumentList:o},u).then(ue)}});return t}function ar(r){return Array.prototype.concat.apply([],r)}function At(r){const n=r.map(lt);return[n.map(e=>e[0]),ar(n.map(e=>e[1]))]}const qt=new WeakMap;function ir(r,n){return qt.set(r,n),r}function sr(r){return Object.assign(r,{[Ut]:!0})}function lt(r){for(const[n,e]of Qt)if(e.canHandle(r)){const[a,t]=e.serialize(r);return[{type:"HANDLER",name:n,value:a},t]}return[{type:"RAW",value:r},qt.get(r)||[]]}function ue(r){switch(r.type){case"HANDLER":return Qt.get(r.name).deserialize(r.value);case"RAW":return r.value}}function ce(r,n,e){return new Promise(a=>{const t=or();r.addEventListener("message",function i(s){!s.data||!s.data.id||s.data.id!==t||(r.removeEventListener("message",i),a(s.data))}),r.start&&r.start(),r.postMessage(Object.assign({id:t},n),e)})}function or(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class ft{constructor(){this.markdownLinkUtilWorker=Kt(new Zn)}async search(n){const e=await Kn.pageToAllList(he.searchApi.search.bind(he.searchApi),{query:`body:"${n}"`,fields:["id","title","body","user_updated_time"],order_by:"user_updated_time",order_dir:"DESC"});return await Nt.map(e,async a=>{const t=await this.markdownLinkUtilWorker.parseLink(a.body);return Reflect.deleteProperty(a,"body"),tt(et({},a),{urls:await ft.mapContentLinks(t,n)})})}static mapContentLinks(n,e){return Nt.map(n.filter(a=>a.url.startsWith(e)),async a=>{if(!a.title)return a;const t=(await he.searchApi.search({query:`title:"${a.title}"`,limit:3,fields:["id","title"]})).items;return tt(et({},a),{matchNotes:t})})}async convert(n,e){const a=await he.noteApi.get(n,["id","body"]),t=await this.markdownLinkUtilWorker.convertLink(a.body,e);await he.noteApi.update({id:a.id,body:t,user_updated_time:Date.now()})}}const ur="_sub1_sym9i_9",lr="_sub2_sym9i_15";var Gt={sub1:ur,sub2:lr};function q(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?q=function(n){return typeof n}:q=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},q(r)}function L(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function Mt(r,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function A(r,n,e){return n&&Mt(r.prototype,n),e&&Mt(r,e),r}function $(r,n,e){return n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function T(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),n&&Le(r,n)}function j(r){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(r)}function Le(r,n){return Le=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a},Le(r,n)}function Ht(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ue(r,n,e){return Ht()?Ue=Reflect.construct:Ue=function(t,i,s){var o=[null];o.push.apply(o,i);var u=Function.bind.apply(t,o),l=new u;return s&&Le(l,s.prototype),l},Ue.apply(null,arguments)}function fr(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function it(r){var n=typeof Map=="function"?new Map:void 0;return it=function(a){if(a===null||!fr(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n!="undefined"){if(n.has(a))return n.get(a);n.set(a,t)}function t(){return Ue(a,arguments,j(this).constructor)}return t.prototype=Object.create(a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Le(t,a)},it(r)}function H(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function zt(r,n){return n&&(typeof n=="object"||typeof n=="function")?n:H(r)}function C(r){var n=Ht();return function(){var a=j(r),t;if(n){var i=j(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return zt(this,t)}}function cr(r,n){for(;!Object.prototype.hasOwnProperty.call(r,n)&&(r=j(r),r!==null););return r}function J(r,n,e){return typeof Reflect!="undefined"&&Reflect.get?J=Reflect.get:J=function(t,i,s){var o=cr(t,i);if(!!o){var u=Object.getOwnPropertyDescriptor(o,i);return u.get?u.get.call(s):u.value}},J(r,n,e||r)}function Te(r,n){return Zt(r)||hr(r,n)||ct(r,n)||Xt()}function be(r){return Zt(r)||vr(r)||ct(r)||Xt()}function Zt(r){if(Array.isArray(r))return r}function vr(r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(r))return Array.from(r)}function hr(r,n){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(r)))){var e=[],a=!0,t=!1,i=void 0;try{for(var s=r[Symbol.iterator](),o;!(a=(o=s.next()).done)&&(e.push(o.value),!(n&&e.length===n));a=!0);}catch(u){t=!0,i=u}finally{try{!a&&s.return!=null&&s.return()}finally{if(t)throw i}}return e}}function ct(r,n){if(!!r){if(typeof r=="string")return It(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return It(r,n)}}function It(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,a=new Array(n);e<n;e++)a[e]=r[e];return a}function Xt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(r,n){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=ct(r))||n&&r&&typeof r.length=="number"){e&&(r=e);var a=0,t=function(){};return{s:t,n:function(){return a>=r.length?{done:!0}:{done:!1,value:r[a++]}},e:function(u){throw u},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return i=u.done,u},e:function(u){s=!0,o=u},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(s)throw o}}}}var B={ANCHOR:"&",COMMENT:"#",TAG:"!",DIRECTIVES_END:"-",DOCUMENT_END:"."},p={ALIAS:"ALIAS",BLANK_LINE:"BLANK_LINE",BLOCK_FOLDED:"BLOCK_FOLDED",BLOCK_LITERAL:"BLOCK_LITERAL",COMMENT:"COMMENT",DIRECTIVE:"DIRECTIVE",DOCUMENT:"DOCUMENT",FLOW_MAP:"FLOW_MAP",FLOW_SEQ:"FLOW_SEQ",MAP:"MAP",MAP_KEY:"MAP_KEY",MAP_VALUE:"MAP_VALUE",PLAIN:"PLAIN",QUOTE_DOUBLE:"QUOTE_DOUBLE",QUOTE_SINGLE:"QUOTE_SINGLE",SEQ:"SEQ",SEQ_ITEM:"SEQ_ITEM"},Ye="tag:yaml.org,2002:",ie={MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"};function Tt(r){for(var n=[0],e=r.indexOf(`
`);e!==-1;)e+=1,n.push(e),e=r.indexOf(`
`,e);return n}function en(r){var n,e;return typeof r=="string"?(n=Tt(r),e=r):(Array.isArray(r)&&(r=r[0]),r&&r.context&&(r.lineStarts||(r.lineStarts=Tt(r.context.src)),n=r.lineStarts,e=r.context.src)),{lineStarts:n,src:e}}function st(r,n){if(typeof r!="number"||r<0)return null;var e=en(n),a=e.lineStarts,t=e.src;if(!a||!t||r>t.length)return null;for(var i=0;i<a.length;++i){var s=a[i];if(r<s)return{line:i,col:r-a[i-1]+1};if(r===s)return{line:i+1,col:1}}var o=a.length;return{line:o,col:r-a[o-1]+1}}function pr(r,n){var e=en(n),a=e.lineStarts,t=e.src;if(!a||!(r>=1)||r>a.length)return null;for(var i=a[r-1],s=a[r];s&&s>i&&t[s-1]===`
`;)--s;return t.slice(i,s)}function gr(r,n){var e=r.start,a=r.end,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:80,i=pr(e.line,n);if(!i)return null;var s=e.col;if(i.length>t)if(s<=t-10)i=i.substr(0,t-1)+"\u2026";else{var o=Math.round(t/2);i.length>s+o&&(i=i.substr(0,s+o-1)+"\u2026"),s-=i.length-t,i="\u2026"+i.substr(1-t)}var u=1,l="";a&&(a.line===e.line&&s+(a.col-e.col)<=t+1?u=a.col-e.col:(u=Math.min(i.length+1,t)-s,l="\u2026"));var f=s>1?" ".repeat(s-1):"",c="^".repeat(u);return"".concat(i,`
`).concat(f).concat(c).concat(l)}var _=function(){function r(n,e){L(this,r),this.start=n,this.end=e||n}return A(r,[{key:"isEmpty",value:function(){return typeof this.start!="number"||!this.end||this.end<=this.start}},{key:"setOrigRange",value:function(e,a){var t=this.start,i=this.end;if(e.length===0||i<=e[0])return this.origStart=t,this.origEnd=i,a;for(var s=a;s<e.length&&!(e[s]>t);)++s;this.origStart=t+s;for(var o=s;s<e.length&&!(e[s]>=i);)++s;return this.origEnd=i+s,o}}],[{key:"copy",value:function(e){return new r(e.start,e.end)}}]),r}(),y=function(){function r(n,e,a){L(this,r),Object.defineProperty(this,"context",{value:a||null,writable:!0}),this.error=null,this.range=null,this.valueRange=null,this.props=e||[],this.type=n,this.value=null}return A(r,[{key:"getPropValue",value:function(e,a,t){if(!this.context)return null;var i=this.context.src,s=this.props[e];return s&&i[s.start]===a?i.slice(s.start+(t?1:0),s.end):null}},{key:"anchor",get:function(){for(var e=0;e<this.props.length;++e){var a=this.getPropValue(e,B.ANCHOR,!0);if(a!=null)return a}return null}},{key:"comment",get:function(){for(var e=[],a=0;a<this.props.length;++a){var t=this.getPropValue(a,B.COMMENT,!0);t!=null&&e.push(t)}return e.length>0?e.join(`
`):null}},{key:"commentHasRequiredWhitespace",value:function(e){var a=this.context.src;if(this.header&&e===this.header.end||!this.valueRange)return!1;var t=this.valueRange.end;return e!==t||r.atBlank(a,t-1)}},{key:"hasComment",get:function(){if(this.context){for(var e=this.context.src,a=0;a<this.props.length;++a)if(e[this.props[a].start]===B.COMMENT)return!0}return!1}},{key:"hasProps",get:function(){if(this.context){for(var e=this.context.src,a=0;a<this.props.length;++a)if(e[this.props[a].start]!==B.COMMENT)return!0}return!1}},{key:"includesTrailingLines",get:function(){return!1}},{key:"jsonLike",get:function(){var e=[p.FLOW_MAP,p.FLOW_SEQ,p.QUOTE_DOUBLE,p.QUOTE_SINGLE];return e.indexOf(this.type)!==-1}},{key:"rangeAsLinePos",get:function(){if(!(!this.range||!this.context)){var e=st(this.range.start,this.context.root);if(!!e){var a=st(this.range.end,this.context.root);return{start:e,end:a}}}}},{key:"rawValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,a=e.start,t=e.end;return this.context.src.slice(a,t)}},{key:"tag",get:function(){for(var e=0;e<this.props.length;++e){var a=this.getPropValue(e,B.TAG,!1);if(a!=null){if(a[1]==="<")return{verbatim:a.slice(2,-1)};var t=a.match(/^(.*!)([^!]*)$/),i=Te(t,3);i[0];var s=i[1],o=i[2];return{handle:s,suffix:o}}}return null}},{key:"valueRangeContainsNewline",get:function(){if(!this.valueRange||!this.context)return!1;for(var e=this.valueRange,a=e.start,t=e.end,i=this.context.src,s=a;s<t;++s)if(i[s]===`
`)return!0;return!1}},{key:"parseComment",value:function(e){var a=this.context.src;if(a[e]===B.COMMENT){var t=r.endOfLine(a,e+1),i=new _(e,t);return this.props.push(i),t}return e}},{key:"setOrigRanges",value:function(e,a){return this.range&&(a=this.range.setOrigRange(e,a)),this.valueRange&&this.valueRange.setOrigRange(e,a),this.props.forEach(function(t){return t.setOrigRange(e,a)}),a}},{key:"toString",value:function(){var e=this.context.src,a=this.range,t=this.value;if(t!=null)return t;var i=e.slice(a.start,a.end);return r.addStringTerminator(e,a.end,i)}}],[{key:"addStringTerminator",value:function(e,a,t){if(t[t.length-1]===`
`)return t;var i=r.endOfWhiteSpace(e,a);return i>=e.length||e[i]===`
`?t+`
`:t}},{key:"atDocumentBoundary",value:function(e,a,t){var i=e[a];if(!i)return!0;var s=e[a-1];if(s&&s!==`
`)return!1;if(t){if(i!==t)return!1}else if(i!==B.DIRECTIVES_END&&i!==B.DOCUMENT_END)return!1;var o=e[a+1],u=e[a+2];if(o!==i||u!==i)return!1;var l=e[a+3];return!l||l===`
`||l==="	"||l===" "}},{key:"endOfIdentifier",value:function(e,a){for(var t=e[a],i=t==="<",s=i?[`
`,"	"," ",">"]:[`
`,"	"," ","[","]","{","}",","];t&&s.indexOf(t)===-1;)t=e[a+=1];return i&&t===">"&&(a+=1),a}},{key:"endOfIndent",value:function(e,a){for(var t=e[a];t===" ";)t=e[a+=1];return a}},{key:"endOfLine",value:function(e,a){for(var t=e[a];t&&t!==`
`;)t=e[a+=1];return a}},{key:"endOfWhiteSpace",value:function(e,a){for(var t=e[a];t==="	"||t===" ";)t=e[a+=1];return a}},{key:"startOfLine",value:function(e,a){var t=e[a-1];if(t===`
`)return a;for(;t&&t!==`
`;)t=e[a-=1];return a+1}},{key:"endOfBlockIndent",value:function(e,a,t){var i=r.endOfIndent(e,t);if(i>t+a)return i;var s=r.endOfWhiteSpace(e,i),o=e[s];return!o||o===`
`?s:null}},{key:"atBlank",value:function(e,a,t){var i=e[a];return i===`
`||i==="	"||i===" "||t&&!i}},{key:"nextNodeIsIndented",value:function(e,a,t){return!e||a<0?!1:a>0?!0:t&&e==="-"}},{key:"normalizeOffset",value:function(e,a){var t=e[a];return t?t!==`
`&&e[a-1]===`
`?a-1:r.endOfWhiteSpace(e,a):a}},{key:"foldNewline",value:function(e,a,t){for(var i=0,s=!1,o="",u=e[a+1];u===" "||u==="	"||u===`
`;){switch(u){case`
`:i=0,a+=1,o+=`
`;break;case"	":i<=t&&(s=!0),a=r.endOfWhiteSpace(e,a+2)-1;break;case" ":i+=1,a+=1;break}u=e[a+1]}return o||(o=" "),u&&i<=t&&(s=!0),{fold:o,offset:a,error:s}}}]),r}(),de=function(r){T(e,r);var n=C(e);function e(a,t,i){var s;if(L(this,e),!i||!(t instanceof y))throw new Error("Invalid arguments for new ".concat(a));return s=n.call(this),s.name=a,s.message=i,s.source=t,s}return A(e,[{key:"makePretty",value:function(){if(!!this.source){this.nodeType=this.source.type;var t=this.source.context&&this.source.context.root;if(typeof this.offset=="number"){this.range=new _(this.offset,this.offset+1);var i=t&&st(this.offset,t);if(i){var s={line:i.line,col:i.col+1};this.linePos={start:i,end:s}}delete this.offset}else this.range=this.source.range,this.linePos=this.source.rangeAsLinePos;if(this.linePos){var o=this.linePos.start,u=o.line,l=o.col;this.message+=" at line ".concat(u,", column ").concat(l);var f=t&&gr(this.linePos,t);f&&(this.message+=`:

`.concat(f,`
`))}delete this.source}}}]),e}(it(Error)),Ne=function(r){T(e,r);var n=C(e);function e(a,t){return L(this,e),n.call(this,"YAMLReferenceError",a,t)}return e}(de),O=function(r){T(e,r);var n=C(e);function e(a,t){return L(this,e),n.call(this,"YAMLSemanticError",a,t)}return e}(de),U=function(r){T(e,r);var n=C(e);function e(a,t){return L(this,e),n.call(this,"YAMLSyntaxError",a,t)}return e}(de),me=function(r){T(e,r);var n=C(e);function e(a,t){return L(this,e),n.call(this,"YAMLWarning",a,t)}return e}(de),tn=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;for(var t=this.valueRange,i=t.start,s=t.end,o=this.context.src,u=o[s-1];i<s&&(u===`
`||u==="	"||u===" ");)u=o[--s-1];for(var l="",f=i;f<s;++f){var c=o[f];if(c===`
`){var v=y.foldNewline(o,f,-1),h=v.fold,g=v.offset;l+=h,f=g}else if(c===" "||c==="	"){for(var d=f,w=o[f+1];f<s&&(w===" "||w==="	");)f+=1,w=o[f+1];w!==`
`&&(l+=f>d?o.slice(d,f+1):c)}else l+=c}var m=o[i];switch(m){case"	":{var b="Plain value cannot start with a tab character",S=[new O(this,b)];return{errors:S,str:l}}case"@":case"`":{var P="Plain value cannot start with reserved character ".concat(m),M=[new O(this,P)];return{errors:M,str:l}}default:return l}}},{key:"parseBlockValue",value:function(t){for(var i=this.context,s=i.indent,o=i.inFlow,u=i.src,l=t,f=t,c=u[l];c===`
`&&!y.atDocumentBoundary(u,l+1);c=u[l]){var v=y.endOfBlockIndent(u,s,l+1);if(v===null||u[v]==="#")break;u[v]===`
`?l=v:(f=e.endOfLine(u,v,o),l=f)}return this.valueRange.isEmpty()&&(this.valueRange.start=t),this.valueRange.end=f,f}},{key:"parse",value:function(t,i){this.context=t;var s=t.inFlow,o=t.src,u=i,l=o[u];return l&&l!=="#"&&l!==`
`&&(u=e.endOfLine(o,i,s)),this.valueRange=new _(i,u),u=y.endOfWhiteSpace(o,u),u=this.parseComment(u),(!this.hasComment||this.valueRange.isEmpty())&&(u=this.parseBlockValue(u)),u}}],[{key:"endOfLine",value:function(t,i,s){for(var o=t[i],u=i;o&&o!==`
`&&!(s&&(o==="["||o==="]"||o==="{"||o==="}"||o===","));){var l=t[u+1];if(o===":"&&(!l||l===`
`||l==="	"||l===" "||s&&l===",")||(o===" "||o==="	")&&l==="#")break;u+=1,o=l}return u}}]),e}(y),Ae=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.call(this,p.BLANK_LINE)}return A(e,[{key:"includesTrailingLines",get:function(){return!0}},{key:"parse",value:function(t,i){return this.context=t,this.range=new _(i,i+1),i+1}}]),e}(y),vt=function(r){T(e,r);var n=C(e);function e(a,t){var i;return L(this,e),i=n.call(this,a,t),i.node=null,i}return A(e,[{key:"includesTrailingLines",get:function(){return!!this.node&&this.node.includesTrailingLines}},{key:"parse",value:function(t,i){this.context=t;var s=t.parseNode,o=t.src,u=t.atLineStart,l=t.lineStart;!u&&this.type===p.SEQ_ITEM&&(this.error=new O(this,"Sequence items must not have preceding content on the same line"));for(var f=u?i-l:t.indent,c=y.endOfWhiteSpace(o,i+1),v=o[c],h=v==="#",g=[],d=null;v===`
`||v==="#";){if(v==="#"){var w=y.endOfLine(o,c+1);g.push(new _(c,w)),c=w}else{u=!0,l=c+1;var m=y.endOfWhiteSpace(o,l);o[m]===`
`&&g.length===0&&(d=new Ae,l=d.parse({src:o},l)),c=y.endOfIndent(o,l)}v=o[c]}if(y.nextNodeIsIndented(v,c-(l+f),this.type!==p.SEQ_ITEM)?this.node=s({atLineStart:u,inCollection:!1,indent:f,lineStart:l,parent:this},c):v&&l>i+1&&(c=l-1),this.node){if(d){var b=t.parent.items||t.parent.contents;b&&b.push(d)}g.length&&Array.prototype.push.apply(this.props,g),c=this.node.range.end}else if(h){var S=g[0];this.props.push(S),c=S.end}else c=y.endOfLine(o,i+1);var P=this.node?this.node.valueRange.end:c;return this.valueRange=new _(i,P),c}},{key:"setOrigRanges",value:function(t,i){return i=J(j(e.prototype),"setOrigRanges",this).call(this,t,i),this.node?this.node.setOrigRanges(t,i):i}},{key:"toString",value:function(){var t=this.context.src,i=this.node,s=this.range,o=this.value;if(o!=null)return o;var u=i?t.slice(s.start,i.range.start)+String(i):t.slice(s.start,s.end);return y.addStringTerminator(t,s.end,u)}}]),e}(y),Oe=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.call(this,p.COMMENT)}return A(e,[{key:"parse",value:function(t,i){this.context=t;var s=this.parseComment(i);return this.range=new _(i,s),s}}]),e}(y);function ot(r){for(var n=r;n instanceof vt;)n=n.node;if(!(n instanceof nn))return null;for(var e=n.items.length,a=-1,t=e-1;t>=0;--t){var i=n.items[t];if(i.type===p.COMMENT){var s=i.context,o=s.indent,u=s.lineStart;if(o>0&&i.range.start>=u+o)break;a=t}else if(i.type===p.BLANK_LINE)a=t;else break}if(a===-1)return null;for(var l=n.items.splice(a,e-a),f=l[0].range.start;n.range.end=f,n.valueRange&&n.valueRange.end>f&&(n.valueRange.end=f),n!==r;)n=n.context.parent;return l}var nn=function(r){T(e,r);var n=C(e);function e(a){var t;L(this,e),t=n.call(this,a.type===p.SEQ_ITEM?p.SEQ:p.MAP);for(var i=a.props.length-1;i>=0;--i)if(a.props[i].start<a.context.lineStart){t.props=a.props.slice(0,i+1),a.props=a.props.slice(i+1);var s=a.props[0]||a.valueRange;a.range.start=s.start;break}t.items=[a];var o=ot(a);return o&&Array.prototype.push.apply(t.items,o),t}return A(e,[{key:"includesTrailingLines",get:function(){return this.items.length>0}},{key:"parse",value:function(t,i){this.context=t;var s=t.parseNode,o=t.src,u=y.startOfLine(o,i),l=this.items[0];l.context.parent=this,this.valueRange=_.copy(l.valueRange);var f=l.range.start-l.context.lineStart,c=i;c=y.normalizeOffset(o,c);for(var v=o[c],h=y.endOfWhiteSpace(o,u)===c,g=!1;v;){for(;v===`
`||v==="#";){if(h&&v===`
`&&!g){var d=new Ae;if(c=d.parse({src:o},c),this.valueRange.end=c,c>=o.length){v=null;break}this.items.push(d),c-=1}else if(v==="#"){if(c<u+f&&!e.nextContentHasIndent(o,c,f))return c;var w=new Oe;if(c=w.parse({indent:f,lineStart:u,src:o},c),this.items.push(w),this.valueRange.end=c,c>=o.length){v=null;break}}if(u=c+1,c=y.endOfIndent(o,u),y.atBlank(o,c)){var m=y.endOfWhiteSpace(o,c),b=o[m];(!b||b===`
`||b==="#")&&(c=m)}v=o[c],h=!0}if(!v)break;if(c!==u+f&&(h||v!==":")){if(c<u+f){u>i&&(c=u);break}else if(!this.error){var S="All collection items must start at the same column";this.error=new U(this,S)}}if(l.type===p.SEQ_ITEM){if(v!=="-"){u>i&&(c=u);break}}else if(v==="-"&&!this.error){var P=o[c+1];if(!P||P===`
`||P==="	"||P===" "){var M="A collection cannot be both a mapping and a sequence";this.error=new U(this,M)}}var k=s({atLineStart:h,inCollection:!0,indent:f,lineStart:u,parent:this},c);if(!k)return c;if(this.items.push(k),this.valueRange.end=k.valueRange.end,c=y.normalizeOffset(o,k.range.end),v=o[c],h=!1,g=k.includesTrailingLines,v){for(var R=c-1,x=o[R];x===" "||x==="	";)x=o[--R];x===`
`&&(u=R+1,h=!0)}var K=ot(k);K&&Array.prototype.push.apply(this.items,K)}return c}},{key:"setOrigRanges",value:function(t,i){return i=J(j(e.prototype),"setOrigRanges",this).call(this,t,i),this.items.forEach(function(s){i=s.setOrigRanges(t,i)}),i}},{key:"toString",value:function(){var t=this.context.src,i=this.items,s=this.range,o=this.value;if(o!=null)return o;for(var u=t.slice(s.start,i[0].range.start)+String(i[0]),l=1;l<i.length;++l){var f=i[l],c=f.context,v=c.atLineStart,h=c.indent;if(v)for(var g=0;g<h;++g)u+=" ";u+=String(f)}return y.addStringTerminator(t,s.end,u)}}],[{key:"nextContentHasIndent",value:function(t,i,s){var o=y.endOfLine(t,i)+1;i=y.endOfWhiteSpace(t,o);var u=t[i];return u?i>=o+s?!0:u!=="#"&&u!==`
`?!1:e.nextContentHasIndent(t,i,s):!1}}]),e}(y),dr=function(r){T(e,r);var n=C(e);function e(){var a;return L(this,e),a=n.call(this,p.DIRECTIVE),a.name=null,a}return A(e,[{key:"parameters",get:function(){var t=this.rawValue;return t?t.trim().split(/[ \t]+/):[]}},{key:"parseName",value:function(t){for(var i=this.context.src,s=t,o=i[s];o&&o!==`
`&&o!=="	"&&o!==" ";)o=i[s+=1];return this.name=i.slice(t,s),s}},{key:"parseParameters",value:function(t){for(var i=this.context.src,s=t,o=i[s];o&&o!==`
`&&o!=="#";)o=i[s+=1];return this.valueRange=new _(t,s),s}},{key:"parse",value:function(t,i){this.context=t;var s=this.parseName(i+1);return s=this.parseParameters(s),s=this.parseComment(s),this.range=new _(i,s),s}}]),e}(y),yr=function(r){T(e,r);var n=C(e);function e(){var a;return L(this,e),a=n.call(this,p.DOCUMENT),a.directives=null,a.contents=null,a.directivesEndMarker=null,a.documentEndMarker=null,a}return A(e,[{key:"parseDirectives",value:function(t){var i=this.context.src;this.directives=[];for(var s=!0,o=!1,u=t;!y.atDocumentBoundary(i,u,B.DIRECTIVES_END);)switch(u=e.startCommentOrEndBlankLine(i,u),i[u]){case`
`:if(s){var l=new Ae;u=l.parse({src:i},u),u<i.length&&this.directives.push(l)}else u+=1,s=!0;break;case"#":{var f=new Oe;u=f.parse({src:i},u),this.directives.push(f),s=!1}break;case"%":{var c=new dr;u=c.parse({parent:this,src:i},u),this.directives.push(c),o=!0,s=!1}break;default:return o?this.error=new O(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),u}return i[u]?(this.directivesEndMarker=new _(u,u+3),u+3):(o?this.error=new O(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),u)}},{key:"parseContents",value:function(t){var i=this.context,s=i.parseNode,o=i.src;this.contents||(this.contents=[]);for(var u=t;o[u-1]==="-";)u-=1;var l=y.endOfWhiteSpace(o,t),f=u===t;for(this.valueRange=new _(l);!y.atDocumentBoundary(o,l,B.DOCUMENT_END);){switch(o[l]){case`
`:if(f){var c=new Ae;l=c.parse({src:o},l),l<o.length&&this.contents.push(c)}else l+=1,f=!0;u=l;break;case"#":{var v=new Oe;l=v.parse({src:o},l),this.contents.push(v),f=!1}break;default:{var h=y.endOfIndent(o,l),g={atLineStart:f,indent:-1,inFlow:!1,inCollection:!1,lineStart:u,parent:this},d=s(g,h);if(!d)return this.valueRange.end=h;this.contents.push(d),l=d.range.end,f=!1;var w=ot(d);w&&Array.prototype.push.apply(this.contents,w)}}l=e.startCommentOrEndBlankLine(o,l)}if(this.valueRange.end=l,o[l]&&(this.documentEndMarker=new _(l,l+3),l+=3,o[l])){if(l=y.endOfWhiteSpace(o,l),o[l]==="#"){var m=new Oe;l=m.parse({src:o},l),this.contents.push(m)}switch(o[l]){case`
`:l+=1;break;case void 0:break;default:this.error=new U(this,"Document end marker line cannot have a non-comment suffix")}}return l}},{key:"parse",value:function(t,i){t.root=this,this.context=t;var s=t.src,o=s.charCodeAt(i)===65279?i+1:i;return o=this.parseDirectives(o),o=this.parseContents(o),o}},{key:"setOrigRanges",value:function(t,i){return i=J(j(e.prototype),"setOrigRanges",this).call(this,t,i),this.directives.forEach(function(s){i=s.setOrigRanges(t,i)}),this.directivesEndMarker&&(i=this.directivesEndMarker.setOrigRange(t,i)),this.contents.forEach(function(s){i=s.setOrigRanges(t,i)}),this.documentEndMarker&&(i=this.documentEndMarker.setOrigRange(t,i)),i}},{key:"toString",value:function(){var t=this.contents,i=this.directives,s=this.value;if(s!=null)return s;var o=i.join("");return t.length>0&&((i.length>0||t[0].type===p.COMMENT)&&(o+=`---
`),o+=t.join("")),o[o.length-1]!==`
`&&(o+=`
`),o}}],[{key:"startCommentOrEndBlankLine",value:function(t,i){var s=y.endOfWhiteSpace(t,i),o=t[s];return o==="#"||o===`
`?s:i}}]),e}(y),mr=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"parse",value:function(t,i){this.context=t;var s=t.src,o=y.endOfIdentifier(s,i+1);return this.valueRange=new _(i+1,o),o=y.endOfWhiteSpace(s,o),o=this.parseComment(o),o}}]),e}(y),ae={CLIP:"CLIP",KEEP:"KEEP",STRIP:"STRIP"},wr=function(r){T(e,r);var n=C(e);function e(a,t){var i;return L(this,e),i=n.call(this,a,t),i.blockIndent=null,i.chomping=ae.CLIP,i.header=null,i}return A(e,[{key:"includesTrailingLines",get:function(){return this.chomping===ae.KEEP}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var t=this.valueRange,i=t.start,s=t.end,o=this.context,u=o.indent,l=o.src;if(this.valueRange.isEmpty())return"";for(var f=null,c=l[s-1];c===`
`||c==="	"||c===" ";){if(s-=1,s<=i){if(this.chomping===ae.KEEP)break;return""}c===`
`&&(f=s),c=l[s-1]}var v=s+1;f&&(this.chomping===ae.KEEP?(v=f,s=this.valueRange.end):s=f);for(var h=u+this.blockIndent,g=this.type===p.BLOCK_FOLDED,d=!0,w="",m="",b=!1,S=i;S<s;++S){for(var P=0;P<h&&l[S]===" ";++P)S+=1;var M=l[S];if(M===`
`)m===`
`?w+=`
`:m=`
`;else{var k=y.endOfLine(l,S),R=l.slice(S,k);S=k,g&&(M===" "||M==="	")&&S<v?(m===" "?m=`
`:!b&&!d&&m===`
`&&(m=`

`),w+=m+R,m=k<s&&l[k]||"",b=!0):(w+=m+R,m=g&&S<v?" ":`
`,b=!1),d&&R!==""&&(d=!1)}}return this.chomping===ae.STRIP?w:w+`
`}},{key:"parseBlockHeader",value:function(t){for(var i=this.context.src,s=t+1,o="";;){var u=i[s];switch(u){case"-":this.chomping=ae.STRIP;break;case"+":this.chomping=ae.KEEP;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o+=u;break;default:return this.blockIndent=Number(o)||null,this.header=new _(t,s),s}s+=1}}},{key:"parseBlockValue",value:function(t){for(var i=this.context,s=i.indent,o=i.src,u=!!this.blockIndent,l=t,f=t,c=1,v=o[l];v===`
`&&(l+=1,!y.atDocumentBoundary(o,l));v=o[l]){var h=y.endOfBlockIndent(o,s,l);if(h===null)break;var g=o[h],d=h-(l+s);if(this.blockIndent){if(g&&g!==`
`&&d<this.blockIndent){if(o[h]==="#")break;if(!this.error){var m=u?"explicit indentation indicator":"first line",b="Block scalars must not be less indented than their ".concat(m);this.error=new O(this,b)}}}else if(o[h]!==`
`){if(d<c){var w="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";this.error=new O(this,w)}this.blockIndent=d}else d>c&&(c=d);o[h]===`
`?l=h:l=f=y.endOfLine(o,h)}return this.chomping!==ae.KEEP&&(l=o[f]?f+1:f),this.valueRange=new _(t+1,l),l}},{key:"parse",value:function(t,i){this.context=t;var s=t.src,o=this.parseBlockHeader(i);return o=y.endOfWhiteSpace(s,o),o=this.parseComment(o),o=this.parseBlockValue(o),o}},{key:"setOrigRanges",value:function(t,i){return i=J(j(e.prototype),"setOrigRanges",this).call(this,t,i),this.header?this.header.setOrigRange(t,i):i}}]),e}(y),br=function(r){T(e,r);var n=C(e);function e(a,t){var i;return L(this,e),i=n.call(this,a,t),i.items=null,i}return A(e,[{key:"prevNodeIsJsonLike",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.items.length,i=this.items[t-1];return!!i&&(i.jsonLike||i.type===p.COMMENT&&this.prevNodeIsJsonLike(t-1))}},{key:"parse",value:function(t,i){this.context=t;var s=t.parseNode,o=t.src,u=t.indent,l=t.lineStart,f=o[i];this.items=[{char:f,offset:i}];var c=y.endOfWhiteSpace(o,i+1);for(f=o[c];f&&f!=="]"&&f!=="}";){switch(f){case`
`:{l=c+1;var v=y.endOfWhiteSpace(o,l);if(o[v]===`
`){var h=new Ae;l=h.parse({src:o},l),this.items.push(h)}if(c=y.endOfIndent(o,l),c<=l+u&&(f=o[c],c<l+u||f!=="]"&&f!=="}")){var g="Insufficient indentation in flow collection";this.error=new O(this,g)}}break;case",":this.items.push({char:f,offset:c}),c+=1;break;case"#":{var d=new Oe;c=d.parse({src:o},c),this.items.push(d)}break;case"?":case":":{var w=o[c+1];if(w===`
`||w==="	"||w===" "||w===","||f===":"&&this.prevNodeIsJsonLike()){this.items.push({char:f,offset:c}),c+=1;break}}default:{var m=s({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:l,parent:this},c);if(!m)return this.valueRange=new _(i,c),c;this.items.push(m),c=y.normalizeOffset(o,m.range.end)}}c=y.endOfWhiteSpace(o,c),f=o[c]}return this.valueRange=new _(i,c+1),f&&(this.items.push({char:f,offset:c}),c=y.endOfWhiteSpace(o,c+1),c=this.parseComment(c)),c}},{key:"setOrigRanges",value:function(t,i){return i=J(j(e.prototype),"setOrigRanges",this).call(this,t,i),this.items.forEach(function(s){if(s instanceof y)i=s.setOrigRanges(t,i);else if(t.length===0)s.origOffset=s.offset;else{for(var o=i;o<t.length&&!(t[o]>s.offset);)++o;s.origOffset=s.offset+o,i=o}}),i}},{key:"toString",value:function(){var t=this.context.src,i=this.items,s=this.range,o=this.value;if(o!=null)return o;var u=i.filter(function(c){return c instanceof y}),l="",f=s.start;return u.forEach(function(c){var v=t.slice(f,c.range.start);f=c.range.end,l+=v+String(c),l[l.length-1]===`
`&&t[f-1]!==`
`&&t[f]===`
`&&(f+=1)}),l+=t.slice(f,s.end),y.addStringTerminator(t,s.end,l)}}]),e}(y),Sr=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var t=[],i=this.valueRange,s=i.start,o=i.end,u=this.context,l=u.indent,f=u.src;f[o-1]!=='"'&&t.push(new U(this,'Missing closing "quote'));for(var c="",v=s+1;v<o-1;++v){var h=f[v];if(h===`
`){y.atDocumentBoundary(f,v+1)&&t.push(new O(this,"Document boundary indicators are not allowed within string values"));var g=y.foldNewline(f,v,l),d=g.fold,w=g.offset,m=g.error;c+=d,v=w,m&&t.push(new O(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if(h==="\\")switch(v+=1,f[v]){case"0":c+="\0";break;case"a":c+="\x07";break;case"b":c+="\b";break;case"e":c+="\x1B";break;case"f":c+="\f";break;case"n":c+=`
`;break;case"r":c+="\r";break;case"t":c+="	";break;case"v":c+="\v";break;case"N":c+="\x85";break;case"_":c+="\xA0";break;case"L":c+="\u2028";break;case"P":c+="\u2029";break;case" ":c+=" ";break;case'"':c+='"';break;case"/":c+="/";break;case"\\":c+="\\";break;case"	":c+="	";break;case"x":c+=this.parseCharCode(v+1,2,t),v+=2;break;case"u":c+=this.parseCharCode(v+1,4,t),v+=4;break;case"U":c+=this.parseCharCode(v+1,8,t),v+=8;break;case`
`:for(;f[v+1]===" "||f[v+1]==="	";)v+=1;break;default:t.push(new U(this,"Invalid escape sequence ".concat(f.substr(v-1,2)))),c+="\\"+f[v]}else if(h===" "||h==="	"){for(var b=v,S=f[v+1];S===" "||S==="	";)v+=1,S=f[v+1];S!==`
`&&(c+=v>b?f.slice(b,v+1):h)}else c+=h}return t.length>0?{errors:t,str:c}:c}},{key:"parseCharCode",value:function(t,i,s){var o=this.context.src,u=o.substr(t,i),l=u.length===i&&/^[0-9a-fA-F]+$/.test(u),f=l?parseInt(u,16):NaN;return isNaN(f)?(s.push(new U(this,"Invalid escape sequence ".concat(o.substr(t-2,i+2)))),o.substr(t-2,i+2)):String.fromCodePoint(f)}},{key:"parse",value:function(t,i){this.context=t;var s=t.src,o=e.endOfQuote(s,i+1);return this.valueRange=new _(i,o),o=y.endOfWhiteSpace(s,o),o=this.parseComment(o),o}}],[{key:"endOfQuote",value:function(t,i){for(var s=t[i];s&&s!=='"';)i+=s==="\\"?2:1,s=t[i];return i+1}}]),e}(y),kr=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var t=[],i=this.valueRange,s=i.start,o=i.end,u=this.context,l=u.indent,f=u.src;f[o-1]!=="'"&&t.push(new U(this,"Missing closing 'quote"));for(var c="",v=s+1;v<o-1;++v){var h=f[v];if(h===`
`){y.atDocumentBoundary(f,v+1)&&t.push(new O(this,"Document boundary indicators are not allowed within string values"));var g=y.foldNewline(f,v,l),d=g.fold,w=g.offset,m=g.error;c+=d,v=w,m&&t.push(new O(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if(h==="'")c+=h,v+=1,f[v]!=="'"&&t.push(new U(this,"Unescaped single quote? This should not happen."));else if(h===" "||h==="	"){for(var b=v,S=f[v+1];S===" "||S==="	";)v+=1,S=f[v+1];S!==`
`&&(c+=v>b?f.slice(b,v+1):h)}else c+=h}return t.length>0?{errors:t,str:c}:c}},{key:"parse",value:function(t,i){this.context=t;var s=t.src,o=e.endOfQuote(s,i+1);return this.valueRange=new _(i,o),o=y.endOfWhiteSpace(s,o),o=this.parseComment(o),o}}],[{key:"endOfQuote",value:function(t,i){for(var s=t[i];s;)if(s==="'"){if(t[i+1]!=="'")break;s=t[i+=2]}else s=t[i+=1];return i+1}}]),e}(y);function Or(r,n){switch(r){case p.ALIAS:return new mr(r,n);case p.BLOCK_FOLDED:case p.BLOCK_LITERAL:return new wr(r,n);case p.FLOW_MAP:case p.FLOW_SEQ:return new br(r,n);case p.MAP_KEY:case p.MAP_VALUE:case p.SEQ_ITEM:return new vt(r,n);case p.COMMENT:case p.PLAIN:return new tn(r,n);case p.QUOTE_DOUBLE:return new Sr(r,n);case p.QUOTE_SINGLE:return new kr(r,n);default:return null}}var Er=function(){function r(){var n=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=a.atLineStart,i=a.inCollection,s=a.inFlow,o=a.indent,u=a.lineStart,l=a.parent;L(this,r),$(this,"parseNode",function(f,c){if(y.atDocumentBoundary(n.src,c))return null;var v=new r(n,f),h=v.parseProps(c),g=h.props,d=h.type,w=h.valueStart,m=Or(d,g),b=m.parse(v,w);if(m.range=new _(c,b),b<=c&&(m.error=new Error("Node#parse consumed no characters"),m.error.parseEnd=b,m.error.source=m,m.range.end=c+1),v.nodeStartsCollection(m)){!m.error&&!v.atLineStart&&v.parent.type===p.DOCUMENT&&(m.error=new U(m,"Block collection must not have preceding content here (e.g. directives-end indicator)"));var S=new nn(m);return b=S.parse(new r(v),b),S.range=new _(c,b),S}return m}),this.atLineStart=t!=null?t:e.atLineStart||!1,this.inCollection=i!=null?i:e.inCollection||!1,this.inFlow=s!=null?s:e.inFlow||!1,this.indent=o!=null?o:e.indent,this.lineStart=u!=null?u:e.lineStart,this.parent=l!=null?l:e.parent||{},this.root=e.root,this.src=e.src}return A(r,[{key:"nodeStartsCollection",value:function(e){var a=this.inCollection,t=this.inFlow,i=this.src;if(a||t)return!1;if(e instanceof vt)return!0;var s=e.range.end;return i[s]===`
`||i[s-1]===`
`?!1:(s=y.endOfWhiteSpace(i,s),i[s]===":")}},{key:"parseProps",value:function(e){var a=this.inFlow,t=this.parent,i=this.src,s=[],o=!1;e=this.atLineStart?y.endOfIndent(i,e):y.endOfWhiteSpace(i,e);for(var u=i[e];u===B.ANCHOR||u===B.COMMENT||u===B.TAG||u===`
`;){if(u===`
`){var l=e,f=void 0;do f=l+1,l=y.endOfIndent(i,f);while(i[l]===`
`);var c=l-(f+this.indent),v=t.type===p.SEQ_ITEM&&t.context.atLineStart;if(i[l]!=="#"&&!y.nextNodeIsIndented(i[l],c,!v))break;this.atLineStart=!0,this.lineStart=f,o=!1,e=l}else if(u===B.COMMENT){var h=y.endOfLine(i,e+1);s.push(new _(e,h)),e=h}else{var g=y.endOfIdentifier(i,e+1);u===B.TAG&&i[g]===","&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(i.slice(e+1,g+13))&&(g=y.endOfIdentifier(i,g+5)),s.push(new _(e,g)),o=!0,e=y.endOfWhiteSpace(i,g)}u=i[e]}o&&u===":"&&y.atBlank(i,e+1,!0)&&(e-=1);var d=r.parseType(i,e,a);return{props:s,type:d,valueStart:e}}}],[{key:"parseType",value:function(e,a,t){switch(e[a]){case"*":return p.ALIAS;case">":return p.BLOCK_FOLDED;case"|":return p.BLOCK_LITERAL;case"{":return p.FLOW_MAP;case"[":return p.FLOW_SEQ;case"?":return!t&&y.atBlank(e,a+1,!0)?p.MAP_KEY:p.PLAIN;case":":return!t&&y.atBlank(e,a+1,!0)?p.MAP_VALUE:p.PLAIN;case"-":return!t&&y.atBlank(e,a+1,!0)?p.SEQ_ITEM:p.PLAIN;case'"':return p.QUOTE_DOUBLE;case"'":return p.QUOTE_SINGLE;default:return p.PLAIN}}}]),r}();function ht(r){var n=[];r.indexOf("\r")!==-1&&(r=r.replace(/\r\n?/g,function(s,o){return s.length>1&&n.push(o),`
`}));var e=[],a=0;do{var t=new yr,i=new Er({src:r});a=t.parse(i,a),e.push(t)}while(a<r.length);return e.setOrigRanges=function(){if(n.length===0)return!1;for(var s=1;s<n.length;++s)n[s]-=s;for(var o=0,u=0;u<e.length;++u)o=e[u].setOrigRanges(n,o);return n.splice(0,n.length),!0},e.toString=function(){return e.join(`...
`)},e}function Lr(r,n,e){if(!e)return r;var a=e.replace(/[\s\S]^/gm,"$&".concat(n,"#"));return"#".concat(a,`
`).concat(n).concat(r)}function ge(r,n,e){return e?e.indexOf(`
`)===-1?"".concat(r," #").concat(e):"".concat(r,`
`)+e.replace(/^/gm,"".concat(n||"","#")):r}var Q=function r(){L(this,r)};function z(r,n,e){if(Array.isArray(r))return r.map(function(i,s){return z(i,String(s),e)});if(r&&typeof r.toJSON=="function"){var a=e&&e.anchors&&e.anchors.get(r);a&&(e.onCreate=function(i){a.res=i,delete e.onCreate});var t=r.toJSON(n,e);return a&&e.onCreate&&e.onCreate(t),t}return(!e||!e.keep)&&typeof r=="bigint"?Number(r):r}var N=function(r){T(e,r);var n=C(e);function e(a){var t;return L(this,e),t=n.call(this),t.value=a,t}return A(e,[{key:"toJSON",value:function(t,i){return i&&i.keep?this.value:z(this.value,t,i)}},{key:"toString",value:function(){return String(this.value)}}]),e}(Q);function Ct(r,n,e){for(var a=e,t=n.length-1;t>=0;--t){var i=n[t];if(Number.isInteger(i)&&i>=0){var s=[];s[i]=a,a=s}else{var o={};Object.defineProperty(o,i,{value:a,writable:!0,enumerable:!0,configurable:!0}),a=o}}return r.createNode(a,!1)}var Se=function(n){return n==null||q(n)==="object"&&n[Symbol.iterator]().next().done},W=function(r){T(e,r);var n=C(e);function e(a){var t;return L(this,e),t=n.call(this),$(H(t),"items",[]),t.schema=a,t}return A(e,[{key:"addIn",value:function(t,i){if(Se(t))this.add(i);else{var s=be(t),o=s[0],u=s.slice(1),l=this.get(o,!0);if(l instanceof e)l.addIn(u,i);else if(l===void 0&&this.schema)this.set(o,Ct(this.schema,u,i));else throw new Error("Expected YAML collection at ".concat(o,". Remaining path: ").concat(u))}}},{key:"deleteIn",value:function(t){var i=be(t),s=i[0],o=i.slice(1);if(o.length===0)return this.delete(s);var u=this.get(s,!0);if(u instanceof e)return u.deleteIn(o);throw new Error("Expected YAML collection at ".concat(s,". Remaining path: ").concat(o))}},{key:"getIn",value:function(t,i){var s=be(t),o=s[0],u=s.slice(1),l=this.get(o,!0);return u.length===0?!i&&l instanceof N?l.value:l:l instanceof e?l.getIn(u,i):void 0}},{key:"hasAllNullValues",value:function(){return this.items.every(function(t){if(!t||t.type!=="PAIR")return!1;var i=t.value;return i==null||i instanceof N&&i.value==null&&!i.commentBefore&&!i.comment&&!i.tag})}},{key:"hasIn",value:function(t){var i=be(t),s=i[0],o=i.slice(1);if(o.length===0)return this.has(s);var u=this.get(s,!0);return u instanceof e?u.hasIn(o):!1}},{key:"setIn",value:function(t,i){var s=be(t),o=s[0],u=s.slice(1);if(u.length===0)this.set(o,i);else{var l=this.get(o,!0);if(l instanceof e)l.setIn(u,i);else if(l===void 0&&this.schema)this.set(o,Ct(this.schema,u,i));else throw new Error("Expected YAML collection at ".concat(o,". Remaining path: ").concat(u))}}},{key:"toJSON",value:function(){return null}},{key:"toString",value:function(t,i,s,o){var u=this,l=i.blockItem,f=i.flowChars,c=i.isMap,v=i.itemIndent,h=t,g=h.indent,d=h.indentStep,w=h.stringify,m=this.type===p.FLOW_MAP||this.type===p.FLOW_SEQ||t.inFlow;m&&(v+=d);var b=c&&this.hasAllNullValues();t=Object.assign({},t,{allNullValues:b,indent:v,inFlow:m,type:null});var S=!1,P=!1,M=this.items.reduce(function(G,D,Fn){var Re;D&&(!S&&D.spaceBefore&&G.push({type:"comment",str:""}),D.commentBefore&&D.commentBefore.match(/^.*$/gm).forEach(function(Wn){G.push({type:"comment",str:"#".concat(Wn)})}),D.comment&&(Re=D.comment),m&&(!S&&D.spaceBefore||D.commentBefore||D.comment||D.key&&(D.key.commentBefore||D.key.comment)||D.value&&(D.value.commentBefore||D.value.comment))&&(P=!0)),S=!1;var we=w(D,t,function(){return Re=null},function(){return S=!0});return m&&!P&&we.includes(`
`)&&(P=!0),m&&Fn<u.items.length-1&&(we+=","),we=ge(we,v,Re),S&&(Re||m)&&(S=!1),G.push({type:"item",str:we}),G},[]),k;if(M.length===0)k=f.start+f.end;else if(m){var R=f.start,x=f.end,K=M.map(function(G){return G.str});if(P||K.reduce(function(G,D){return G+D.length+2},2)>e.maxFlowStringSingleLineLength){k=R;var Y=I(K),Z;try{for(Y.s();!(Z=Y.n()).done;){var Pe=Z.value;k+=Pe?`
`.concat(d).concat(g).concat(Pe):`
`}}catch(G){Y.e(G)}finally{Y.f()}k+=`
`.concat(g).concat(x)}else k="".concat(R," ").concat(K.join(" ")," ").concat(x)}else{var St=M.map(l);k=St.shift();var _e=I(St),kt;try{for(_e.s();!(kt=_e.n()).done;){var Ot=kt.value;k+=Ot?`
`.concat(g).concat(Ot):`
`}}catch(G){_e.e(G)}finally{_e.f()}}return this.comment?(k+=`
`+this.comment.replace(/^/gm,"".concat(g,"#")),s&&s()):S&&o&&o(),k}}]),e}(Q);$(W,"maxFlowStringSingleLineLength",60);function De(r){var n=r instanceof N?r.value:r;return n&&typeof n=="string"&&(n=Number(n)),Number.isInteger(n)&&n>=0?n:null}var X=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"add",value:function(t){this.items.push(t)}},{key:"delete",value:function(t){var i=De(t);if(typeof i!="number")return!1;var s=this.items.splice(i,1);return s.length>0}},{key:"get",value:function(t,i){var s=De(t);if(typeof s=="number"){var o=this.items[s];return!i&&o instanceof N?o.value:o}}},{key:"has",value:function(t){var i=De(t);return typeof i=="number"&&i<this.items.length}},{key:"set",value:function(t,i){var s=De(t);if(typeof s!="number")throw new Error("Expected a valid index, not ".concat(t,"."));this.items[s]=i}},{key:"toJSON",value:function(t,i){var s=[];i&&i.onCreate&&i.onCreate(s);var o=0,u=I(this.items),l;try{for(u.s();!(l=u.n()).done;){var f=l.value;s.push(z(f,String(o++),i))}}catch(c){u.e(c)}finally{u.f()}return s}},{key:"toString",value:function(t,i,s){return t?J(j(e.prototype),"toString",this).call(this,t,{blockItem:function(u){return u.type==="comment"?u.str:"- ".concat(u.str)},flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(t.indent||"")+"  "},i,s):JSON.stringify(this)}}]),e}(W),Nr=function(n,e,a){return e===null?"":q(e)!=="object"?String(e):n instanceof Q&&a&&a.doc?n.toString({anchors:Object.create(null),doc:a.doc,indent:"",indentStep:a.indentStep,inFlow:!0,inStringifyKey:!0,stringify:a.stringify}):JSON.stringify(e)},E=function(r){T(e,r);var n=C(e);function e(a){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return L(this,e),t=n.call(this),t.key=a,t.value=i,t.type=e.Type.PAIR,t}return A(e,[{key:"commentBefore",get:function(){return this.key instanceof Q?this.key.commentBefore:void 0},set:function(t){if(this.key==null&&(this.key=new N(null)),this.key instanceof Q)this.key.commentBefore=t;else{var i="Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.";throw new Error(i)}}},{key:"addToJSMap",value:function(t,i){var s=z(this.key,"",t);if(i instanceof Map){var o=z(this.value,s,t);i.set(s,o)}else if(i instanceof Set)i.add(s);else{var u=Nr(this.key,s,t),l=z(this.value,u,t);u in i?Object.defineProperty(i,u,{value:l,writable:!0,enumerable:!0,configurable:!0}):i[u]=l}return i}},{key:"toJSON",value:function(t,i){var s=i&&i.mapAsMap?new Map:{};return this.addToJSMap(i,s)}},{key:"toString",value:function(t,i,s){if(!t||!t.doc)return JSON.stringify(this);var o=t.doc.options,u=o.indent,l=o.indentSeq,f=o.simpleKeys,c=this.key,v=this.value,h=c instanceof Q&&c.comment;if(f){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(c instanceof W){var g="With simple keys, collection cannot be used as a key value";throw new Error(g)}}var d=!f&&(!c||h||(c instanceof Q?c instanceof W||c.type===p.BLOCK_FOLDED||c.type===p.BLOCK_LITERAL:q(c)==="object")),w=t,m=w.doc,b=w.indent,S=w.indentStep,P=w.stringify;t=Object.assign({},t,{implicitKey:!d,indent:b+S});var M=!1,k=P(c,t,function(){return h=null},function(){return M=!0});if(k=ge(k,t.indent,h),!d&&k.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(t.allNullValues&&!f)return this.comment?(k=ge(k,t.indent,this.comment),i&&i()):M&&!h&&s&&s(),t.inFlow&&!d?k:"? ".concat(k);k=d?"? ".concat(k,`
`).concat(b,":"):"".concat(k,":"),this.comment&&(k=ge(k,t.indent,this.comment),i&&i());var R="",x=null;if(v instanceof Q){if(v.spaceBefore&&(R=`
`),v.commentBefore){var K=v.commentBefore.replace(/^/gm,"".concat(t.indent,"#"));R+=`
`.concat(K)}x=v.comment}else v&&q(v)==="object"&&(v=m.schema.createNode(v,!0));t.implicitKey=!1,!d&&!this.comment&&v instanceof N&&(t.indentAtStart=k.length+1),M=!1,!l&&u>=2&&!t.inFlow&&!d&&v instanceof X&&v.type!==p.FLOW_SEQ&&!v.tag&&!m.anchors.getName(v)&&(t.indent=t.indent.substr(2));var Y=P(v,t,function(){return x=null},function(){return M=!0}),Z=" ";if(R||this.comment)Z="".concat(R,`
`).concat(t.indent);else if(!d&&v instanceof W){var Pe=Y[0]==="["||Y[0]==="{";(!Pe||Y.includes(`
`))&&(Z=`
`.concat(t.indent))}else Y[0]===`
`&&(Z="");return M&&!x&&s&&s(),ge(k+Z+Y,t.indent,x)}}]),e}(Q);$(E,"Type",{PAIR:"PAIR",MERGE_PAIR:"MERGE_PAIR"});var Ar=function r(n,e){if(n instanceof ne){var a=e.get(n.source);return a.count*a.aliasCount}else if(n instanceof W){var t=0,i=I(n.items),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,u=r(o,e);u>t&&(t=u)}}catch(c){i.e(c)}finally{i.f()}return t}else if(n instanceof E){var l=r(n.key,e),f=r(n.value,e);return Math.max(l,f)}return 1},ne=function(r){T(e,r);var n=C(e);function e(a){var t;return L(this,e),t=n.call(this),t.source=a,t.type=p.ALIAS,t}return A(e,[{key:"tag",set:function(t){throw new Error("Alias nodes cannot have tags")}},{key:"toJSON",value:function(t,i){if(!i)return z(this.source,t,i);var s=i.anchors,o=i.maxAliasCount,u=s.get(this.source);if(!u||u.res===void 0){var l="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new Ne(this.cstNode,l):new ReferenceError(l)}if(o>=0&&(u.count+=1,u.aliasCount===0&&(u.aliasCount=Ar(this.source,s)),u.count*u.aliasCount>o)){var f="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new Ne(this.cstNode,f):new ReferenceError(f)}return u.res}},{key:"toString",value:function(t){return e.stringify(this,t)}}],[{key:"stringify",value:function(t,i){var s=t.range,o=t.source,u=i.anchors,l=i.doc,f=i.implicitKey,c=i.inStringifyKey,v=Object.keys(u).find(function(g){return u[g]===o});if(!v&&c&&(v=l.anchors.getName(o)||l.anchors.newName()),v)return"*".concat(v).concat(f?" ":"");var h=l.anchors.getName(o)?"Alias node must be after source node":"Source node not found for alias node";throw new Error("".concat(h," [").concat(s,"]"))}}]),e}(Q);$(ne,"default",!0);function le(r,n){var e=n instanceof N?n.value:n,a=I(r),t;try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i instanceof E&&(i.key===n||i.key===e||i.key&&i.key.value===e))return i}}catch(s){a.e(s)}finally{a.f()}}var V=function(r){T(e,r);var n=C(e);function e(){return L(this,e),n.apply(this,arguments)}return A(e,[{key:"add",value:function(t,i){t?t instanceof E||(t=new E(t.key||t,t.value)):t=new E(t);var s=le(this.items,t.key),o=this.schema&&this.schema.sortMapEntries;if(s)if(i)s.value=t.value;else throw new Error("Key ".concat(t.key," already set"));else if(o){var u=this.items.findIndex(function(l){return o(t,l)<0});u===-1?this.items.push(t):this.items.splice(u,0,t)}else this.items.push(t)}},{key:"delete",value:function(t){var i=le(this.items,t);if(!i)return!1;var s=this.items.splice(this.items.indexOf(i),1);return s.length>0}},{key:"get",value:function(t,i){var s=le(this.items,t),o=s&&s.value;return!i&&o instanceof N?o.value:o}},{key:"has",value:function(t){return!!le(this.items,t)}},{key:"set",value:function(t,i){this.add(new E(t,i),!0)}},{key:"toJSON",value:function(t,i,s){var o=s?new s:i&&i.mapAsMap?new Map:{};i&&i.onCreate&&i.onCreate(o);var u=I(this.items),l;try{for(u.s();!(l=u.n()).done;){var f=l.value;f.addToJSMap(i,o)}}catch(c){u.e(c)}finally{u.f()}return o}},{key:"toString",value:function(t,i,s){if(!t)return JSON.stringify(this);var o=I(this.items),u;try{for(o.s();!(u=o.n()).done;){var l=u.value;if(!(l instanceof E))throw new Error("Map items must all be pairs; found ".concat(JSON.stringify(l)," instead"))}}catch(f){o.e(f)}finally{o.f()}return J(j(e.prototype),"toString",this).call(this,t,{blockItem:function(c){return c.str},flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:t.indent||""},i,s)}}]),e}(W),rn="<<",an=function(r){T(e,r);var n=C(e);function e(a){var t;if(L(this,e),a instanceof E){var i=a.value;i instanceof X||(i=new X,i.items.push(a.value),i.range=a.value.range),t=n.call(this,a.key,i),t.range=a.range}else t=n.call(this,new N(rn),new X);return t.type=E.Type.MERGE_PAIR,zt(t)}return A(e,[{key:"addToJSMap",value:function(t,i){var s=I(this.value.items),o;try{for(s.s();!(o=s.n()).done;){var u=o.value.source;if(!(u instanceof V))throw new Error("Merge sources must be maps");var l=u.toJSON(null,t,Map),f=I(l),c;try{for(f.s();!(c=f.n()).done;){var v=Te(c.value,2),h=v[0],g=v[1];i instanceof Map?i.has(h)||i.set(h,g):i instanceof Set?i.add(h):Object.prototype.hasOwnProperty.call(i,h)||Object.defineProperty(i,h,{value:g,writable:!0,enumerable:!0,configurable:!0})}}catch(d){f.e(d)}finally{f.f()}}}catch(d){s.e(d)}finally{s.f()}return i}},{key:"toString",value:function(t,i){var s=this.value;if(s.items.length>1)return J(j(e.prototype),"toString",this).call(this,t,i);this.value=s.items[0];var o=J(j(e.prototype),"toString",this).call(this,t,i);return this.value=s,o}}]),e}(E),Ee={defaultType:p.BLOCK_LITERAL,lineWidth:76},ee={trueStr:"true",falseStr:"false"},oe={asBigInt:!1},ye={nullStr:"null"},re={defaultType:p.PLAIN,doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};function pt(r,n,e){var a=I(n),t;try{for(a.s();!(t=a.n()).done;){var i=t.value,s=i.format,o=i.test,u=i.resolve;if(o){var l=r.match(o);if(l){var f=u.apply(null,l);return f instanceof N||(f=new N(f)),s&&(f.format=s),f}}}}catch(c){a.e(c)}finally{a.f()}return e&&(r=e(r)),new N(r)}var sn="flow",ut="block",Qe="quoted",Pt=function(n,e){for(var a=n[e+1];a===" "||a==="	";){do a=n[e+=1];while(a&&a!==`
`);a=n[e+1]}return e};function Ke(r,n,e,a){var t=a.indentAtStart,i=a.lineWidth,s=i===void 0?80:i,o=a.minContentWidth,u=o===void 0?20:o,l=a.onFold,f=a.onOverflow;if(!s||s<0)return r;var c=Math.max(1+u,1+s-n.length);if(r.length<=c)return r;var v=[],h={},g=s-n.length;typeof t=="number"&&(t>s-Math.max(2,u)?v.push(0):g=s-t);var d=void 0,w=void 0,m=!1,b=-1,S=-1,P=-1;e===ut&&(b=Pt(r,b),b!==-1&&(g=b+c));for(var M;M=r[b+=1];){if(e===Qe&&M==="\\"){switch(S=b,r[b+1]){case"x":b+=3;break;case"u":b+=5;break;case"U":b+=9;break;default:b+=1}P=b}if(M===`
`)e===ut&&(b=Pt(r,b)),g=b+c,d=void 0;else{if(M===" "&&w&&w!==" "&&w!==`
`&&w!=="	"){var k=r[b+1];k&&k!==" "&&k!==`
`&&k!=="	"&&(d=b)}if(b>=g)if(d)v.push(d),g=d+c,d=void 0;else if(e===Qe){for(;w===" "||w==="	";)w=M,M=r[b+=1],m=!0;var R=b>P+1?b-2:S-1;if(h[R])return r;v.push(R),h[R]=!0,g=R+c,d=void 0}else m=!0}w=M}if(m&&f&&f(),v.length===0)return r;l&&l();for(var x=r.slice(0,v[0]),K=0;K<v.length;++K){var Y=v[K],Z=v[K+1]||r.length;Y===0?x=`
`.concat(n).concat(r.slice(0,Z)):(e===Qe&&h[Y]&&(x+="".concat(r[Y],"\\")),x+=`
`.concat(n).concat(r.slice(Y+1,Z)))}return x}var gt=function(n){var e=n.indentAtStart;return e?Object.assign({indentAtStart:e},re.fold):re.fold},qe=function(n){return/^(%|---|\.\.\.)/m.test(n)};function Mr(r,n,e){if(!n||n<0)return!1;var a=n-e,t=r.length;if(t<=a)return!1;for(var i=0,s=0;i<t;++i)if(r[i]===`
`){if(i-s>a)return!0;if(s=i+1,t-s<=a)return!1}return!0}function fe(r,n){var e=n.implicitKey,a=re.doubleQuoted,t=a.jsonEncoding,i=a.minMultiLineLength,s=JSON.stringify(r);if(t)return s;for(var o=n.indent||(qe(r)?"  ":""),u="",l=0,f=0,c=s[f];c;c=s[++f])if(c===" "&&s[f+1]==="\\"&&s[f+2]==="n"&&(u+=s.slice(l,f)+"\\ ",f+=1,l=f,c="\\"),c==="\\")switch(s[f+1]){case"u":{u+=s.slice(l,f);var v=s.substr(f+2,4);switch(v){case"0000":u+="\\0";break;case"0007":u+="\\a";break;case"000b":u+="\\v";break;case"001b":u+="\\e";break;case"0085":u+="\\N";break;case"00a0":u+="\\_";break;case"2028":u+="\\L";break;case"2029":u+="\\P";break;default:v.substr(0,2)==="00"?u+="\\x"+v.substr(2):u+=s.substr(f,6)}f+=5,l=f+1}break;case"n":if(e||s[f+2]==='"'||s.length<i)f+=1;else{for(u+=s.slice(l,f)+`

`;s[f+2]==="\\"&&s[f+3]==="n"&&s[f+4]!=='"';)u+=`
`,f+=2;u+=o,s[f+2]===" "&&(u+="\\"),f+=1,l=f+1}break;default:f+=1}return u=l?u+s.slice(l):s,e?u:Ke(u,o,Qe,gt(n))}function on(r,n){if(n.implicitKey){if(/\n/.test(r))return fe(r,n)}else if(/[ \t]\n|\n[ \t]/.test(r))return fe(r,n);var e=n.indent||(qe(r)?"  ":""),a="'"+r.replace(/'/g,"''").replace(/\n+/g,`$&
`.concat(e))+"'";return n.implicitKey?a:Ke(a,e,sn,gt(n))}function Ve(r,n,e,a){var t=r.comment,i=r.type,s=r.value;if(/\n[\t ]+$/.test(s)||/^\s*$/.test(s))return fe(s,n);var o=n.indent||(n.forceBlockIndent||qe(s)?"  ":""),u=o?"2":"1",l=i===p.BLOCK_FOLDED?!1:i===p.BLOCK_LITERAL?!0:!Mr(s,re.fold.lineWidth,o.length),f=l?"|":">";if(!s)return f+`
`;var c="",v="";if(s=s.replace(/[\n\t ]*$/,function(g){var d=g.indexOf(`
`);return d===-1?f+="-":(s===g||d!==g.length-1)&&(f+="+",a&&a()),v=g.replace(/\n$/,""),""}).replace(/^[\n ]*/,function(g){g.indexOf(" ")!==-1&&(f+=u);var d=g.match(/ +$/);return d?(c=g.slice(0,-d[0].length),d[0]):(c=g,"")}),v&&(v=v.replace(/\n+(?!\n|$)/g,"$&".concat(o))),c&&(c=c.replace(/\n+/g,"$&".concat(o))),t&&(f+=" #"+t.replace(/ ?[\r\n]+/g," "),e&&e()),!s)return"".concat(f).concat(u,`
`).concat(o).concat(v);if(l)return s=s.replace(/\n+/g,"$&".concat(o)),"".concat(f,`
`).concat(o).concat(c).concat(s).concat(v);s=s.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,"$&".concat(o));var h=Ke("".concat(c).concat(s).concat(v),o,ut,re.fold);return"".concat(f,`
`).concat(o).concat(h)}function Ir(r,n,e,a){var t=r.comment,i=r.type,s=r.value,o=n.actualString,u=n.implicitKey,l=n.indent,f=n.inFlow;if(u&&/[\n[\]{},]/.test(s)||f&&/[[\]{},]/.test(s))return fe(s,n);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return u||f||s.indexOf(`
`)===-1?s.indexOf('"')!==-1&&s.indexOf("'")===-1?on(s,n):fe(s,n):Ve(r,n,e,a);if(!u&&!f&&i!==p.PLAIN&&s.indexOf(`
`)!==-1)return Ve(r,n,e,a);if(l===""&&qe(s))return n.forceBlockIndent=!0,Ve(r,n,e,a);var c=s.replace(/\n+/g,`$&
`.concat(l));if(o){var v=n.doc.schema.tags,h=pt(c,v,v.scalarFallback).value;if(typeof h!="string")return fe(s,n)}var g=u?c:Ke(c,l,sn,gt(n));return t&&!f&&(g.indexOf(`
`)!==-1||t.indexOf(`
`)!==-1)?(e&&e(),Lr(g,l,t)):g}function dt(r,n,e,a){var t=re.defaultType,i=n.implicitKey,s=n.inFlow,o=r,u=o.type,l=o.value;typeof l!="string"&&(l=String(l),r=Object.assign({},r,{value:l}));var f=function(h){switch(h){case p.BLOCK_FOLDED:case p.BLOCK_LITERAL:return Ve(r,n,e,a);case p.QUOTE_DOUBLE:return fe(l,n);case p.QUOTE_SINGLE:return on(l,n);case p.PLAIN:return Ir(r,n,e,a);default:return null}};(u!==p.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(l)||(i||s)&&(u===p.BLOCK_FOLDED||u===p.BLOCK_LITERAL))&&(u=p.QUOTE_DOUBLE);var c=f(u);if(c===null&&(c=f(t),c===null))throw new Error("Unsupported default string type ".concat(t));return c}function te(r){var n=r.format,e=r.minFractionDigits,a=r.tag,t=r.value;if(typeof t=="bigint")return String(t);if(!isFinite(t))return isNaN(t)?".nan":t<0?"-.inf":".inf";var i=JSON.stringify(t);if(!n&&e&&(!a||a==="tag:yaml.org,2002:float")&&/^\d/.test(i)){var s=i.indexOf(".");s<0&&(s=i.length,i+=".");for(var o=e-(i.length-s-1);o-- >0;)i+="0"}return i}function un(r,n){var e,a;switch(n.type){case p.FLOW_MAP:e="}",a="flow map";break;case p.FLOW_SEQ:e="]",a="flow sequence";break;default:r.push(new O(n,"Not a flow collection!?"));return}for(var t,i=n.items.length-1;i>=0;--i){var s=n.items[i];if(!s||s.type!==p.COMMENT){t=s;break}}if(t&&t.char!==e){var o="Expected ".concat(a," to end with ").concat(e),u;typeof t.offset=="number"?(u=new O(n,o),u.offset=t.offset+1):(u=new O(t,o),t.range&&t.range.end&&(u.offset=t.range.end-t.range.start)),r.push(u)}}function ln(r,n){var e=n.context.src[n.range.start-1];if(e!==`
`&&e!=="	"&&e!==" "){var a="Comments must be separated from other tokens by white space characters";r.push(new O(n,a))}}function fn(r,n){var e=String(n),a=e.substr(0,8)+"..."+e.substr(-8);return new O(r,'The "'.concat(a,'" key is too long'))}function cn(r,n){var e=I(n),a;try{for(e.s();!(a=e.n()).done;){var t=a.value,i=t.afterKey,s=t.before,o=t.comment,u=r.items[s];u?(i&&u.value&&(u=u.value),o===void 0?(i||!u.commentBefore)&&(u.spaceBefore=!0):u.commentBefore?u.commentBefore+=`
`+o:u.commentBefore=o):o!==void 0&&(r.comment?r.comment+=`
`+o:r.comment=o)}}catch(l){e.e(l)}finally{e.f()}}function Ce(r,n){var e=n.strValue;return e?typeof e=="string"?e:(e.errors.forEach(function(a){a.source||(a.source=n),r.errors.push(a)}),e.str):""}function Tr(r,n){var e=n.tag,a=e.handle,t=e.suffix,i=r.tagPrefixes.find(function(u){return u.handle===a});if(!i){var s=r.getDefaults().tagPrefixes;if(s&&(i=s.find(function(u){return u.handle===a})),!i)throw new O(n,"The ".concat(a," tag handle is non-default and was not declared."))}if(!t)throw new O(n,"The ".concat(a," tag has no suffix."));if(a==="!"&&(r.version||r.options.version)==="1.0"){if(t[0]==="^")return r.warnings.push(new me(n,"YAML 1.0 ^ tag expansion is not supported")),t;if(/[:/]/.test(t)){var o=t.match(/^([a-z0-9-]+)\/(.*)/i);return o?"tag:".concat(o[1],".yaml.org,2002:").concat(o[2]):"tag:".concat(t)}}return i.prefix+decodeURIComponent(t)}function Cr(r,n){var e=n.tag,a=n.type,t=!1;if(e){var i=e.handle,s=e.suffix,o=e.verbatim;if(o){if(o!=="!"&&o!=="!!")return o;var u="Verbatim tags aren't resolved, so ".concat(o," is invalid.");r.errors.push(new O(n,u))}else if(i==="!"&&!s)t=!0;else try{return Tr(r,n)}catch(l){r.errors.push(l)}}switch(a){case p.BLOCK_FOLDED:case p.BLOCK_LITERAL:case p.QUOTE_DOUBLE:case p.QUOTE_SINGLE:return ie.STR;case p.FLOW_MAP:case p.MAP:return ie.MAP;case p.FLOW_SEQ:case p.SEQ:return ie.SEQ;case p.PLAIN:return t?ie.STR:null;default:return null}}function _t(r,n,e){var a=r.schema.tags,t=[],i=I(a),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;if(o.tag===e)if(o.test)t.push(o);else{var u=o.resolve(r,n);return u instanceof W?u:new N(u)}}}catch(f){i.e(f)}finally{i.f()}var l=Ce(r,n);return typeof l=="string"&&t.length>0?pt(l,t,a.scalarFallback):null}function Pr(r){var n=r.type;switch(n){case p.FLOW_MAP:case p.MAP:return ie.MAP;case p.FLOW_SEQ:case p.SEQ:return ie.SEQ;default:return ie.STR}}function _r(r,n,e){try{var a=_t(r,n,e);if(a)return e&&n.tag&&(a.tag=e),a}catch(u){return u.source||(u.source=n),r.errors.push(u),null}try{var t=Pr(n);if(!t)throw new Error("The tag ".concat(e," is unavailable"));var i="The tag ".concat(e," is unavailable, falling back to ").concat(t);r.warnings.push(new me(n,i));var s=_t(r,n,t);return s.tag=e,s}catch(u){var o=new Ne(n,u.message);return o.stack=u.stack,r.errors.push(o),null}}var Rr=function(n){if(!n)return!1;var e=n.type;return e===p.MAP_KEY||e===p.MAP_VALUE||e===p.SEQ_ITEM};function Br(r,n){var e={before:[],after:[]},a=!1,t=!1,i=Rr(n.context.parent)?n.context.parent.props.concat(n.props):n.props,s=I(i),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,l=u.start,f=u.end;switch(n.context.src[l]){case B.COMMENT:{if(!n.commentHasRequiredWhitespace(l)){var c="Comments must be separated from other tokens by white space characters";r.push(new O(n,c))}var v=n.header,h=n.valueRange,g=h&&(l>h.start||v&&l>v.start)?e.after:e.before;g.push(n.context.src.slice(l+1,f));break}case B.ANCHOR:if(a){var d="A node can have at most one anchor";r.push(new O(n,d))}a=!0;break;case B.TAG:if(t){var w="A node can have at most one tag";r.push(new O(n,w))}t=!0;break}}}catch(m){s.e(m)}finally{s.f()}return{comments:e,hasAnchor:a,hasTag:t}}function Dr(r,n){var e=r.anchors,a=r.errors,t=r.schema;if(n.type===p.ALIAS){var i=n.rawValue,s=e.getNode(i);if(!s){var o="Aliased anchor not found: ".concat(i);return a.push(new Ne(n,o)),null}var u=new ne(s);return e._cstAliases.push(u),u}var l=Cr(r,n);if(l)return _r(r,n,l);if(n.type!==p.PLAIN){var f="Failed to resolve ".concat(n.type," node here");return a.push(new U(n,f)),null}try{var c=Ce(r,n);return pt(c,t.tags,t.tags.scalarFallback)}catch(v){return v.source||(v.source=n),a.push(v),null}}function se(r,n){if(!n)return null;n.error&&r.errors.push(n.error);var e=Br(r.errors,n),a=e.comments,t=e.hasAnchor,i=e.hasTag;if(t){var s=r.anchors,o=n.anchor,u=s.getNode(o);u&&(s.map[s.newName(o)]=u),s.map[o]=n}if(n.type===p.ALIAS&&(t||i)){var l="An alias node must not specify any properties";r.errors.push(new O(n,l))}var f=Dr(r,n);if(f){f.range=[n.range.start,n.range.end],r.options.keepCstNodes&&(f.cstNode=n),r.options.keepNodeTypes&&(f.type=n.type);var c=a.before.join(`
`);c&&(f.commentBefore=f.commentBefore?"".concat(f.commentBefore,`
`).concat(c):c);var v=a.after.join(`
`);v&&(f.comment=f.comment?"".concat(f.comment,`
`).concat(v):v)}return n.resolved=f}function vn(r,n){if(n.type!==p.MAP&&n.type!==p.FLOW_MAP){var e="A ".concat(n.type," node cannot be resolved as a mapping");return r.errors.push(new U(n,e)),null}var a=n.type===p.FLOW_MAP?jr(r,n):Wr(r,n),t=a.comments,i=a.items,s=new V;s.items=i,cn(s,t);for(var o=!1,u=0;u<i.length;++u){var l=i[u].key;if(l instanceof W&&(o=!0),r.schema.merge&&l&&l.value===rn){i[u]=new an(i[u]);var f=i[u].value.items,c=null;f.some(function(w){if(w instanceof ne){var m=w.source.type;return m===p.MAP||m===p.FLOW_MAP?!1:c="Merge nodes aliases can only point to maps"}return c="Merge nodes can only have Alias nodes as values"}),c&&r.errors.push(new O(n,c))}else for(var v=u+1;v<i.length;++v){var h=i[v].key;if(l===h||l&&h&&Object.prototype.hasOwnProperty.call(l,"value")&&l.value===h.value){var g='Map keys must be unique; "'.concat(l,'" is repeated');r.errors.push(new O(n,g));break}}}if(o&&!r.options.mapAsMap){var d="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";r.warnings.push(new me(n,d))}return n.resolved=s,s}var xr=function(n){var e=n.context,a=e.lineStart,t=e.node,i=e.src,s=n.props;if(s.length===0)return!1;var o=s[0].start;if(t&&o>t.valueRange.start||i[o]!==B.COMMENT)return!1;for(var u=a;u<o;++u)if(i[u]===`
`)return!1;return!0};function Fr(r,n){if(!!xr(r)){var e=r.getPropValue(0,B.COMMENT,!0),a=!1,t=n.value.commentBefore;if(t&&t.startsWith(e))n.value.commentBefore=t.substr(e.length+1),a=!0;else{var i=n.value.comment;!r.node&&i&&i.startsWith(e)&&(n.value.comment=i.substr(e.length+1),a=!0)}a&&(n.comment=e)}}function Wr(r,n){for(var e=[],a=[],t=void 0,i=null,s=0;s<n.items.length;++s){var o=n.items[s];switch(o.type){case p.BLANK_LINE:e.push({afterKey:!!t,before:a.length});break;case p.COMMENT:e.push({afterKey:!!t,before:a.length,comment:o.comment});break;case p.MAP_KEY:t!==void 0&&a.push(new E(t)),o.error&&r.errors.push(o.error),t=se(r,o.node),i=null;break;case p.MAP_VALUE:{if(t===void 0&&(t=null),o.error&&r.errors.push(o.error),!o.context.atLineStart&&o.node&&o.node.type===p.MAP&&!o.node.context.atLineStart){var u="Nested mappings are not allowed in compact mappings";r.errors.push(new O(o.node,u))}var l=o.node;if(!l&&o.props.length>0){l=new tn(p.PLAIN,[]),l.context={parent:o,src:o.context.src};var f=o.range.start+1;if(l.range={start:f,end:f},l.valueRange={start:f,end:f},typeof o.range.origStart=="number"){var c=o.range.origStart+1;l.range.origStart=l.range.origEnd=c,l.valueRange.origStart=l.valueRange.origEnd=c}}var v=new E(t,se(r,l));Fr(o,v),a.push(v),t&&typeof i=="number"&&o.range.start>i+1024&&r.errors.push(fn(n,t)),t=void 0,i=null}break;default:t!==void 0&&a.push(new E(t)),t=se(r,o),i=o.range.start,o.error&&r.errors.push(o.error);e:for(var h=s+1;;++h){var g=n.items[h];switch(g&&g.type){case p.BLANK_LINE:case p.COMMENT:continue e;case p.MAP_VALUE:break e;default:{var d="Implicit map keys need to be followed by map values";r.errors.push(new O(o,d));break e}}}if(o.valueRangeContainsNewline){var w="Implicit map keys need to be on a single line";r.errors.push(new O(o,w))}}}return t!==void 0&&a.push(new E(t)),{comments:e,items:a}}function jr(r,n){for(var e=[],a=[],t=void 0,i=!1,s="{",o=0;o<n.items.length;++o){var u=n.items[o];if(typeof u.char=="string"){var l=u.char,f=u.offset;if(l==="?"&&t===void 0&&!i){i=!0,s=":";continue}if(l===":"){if(t===void 0&&(t=null),s===":"){s=",";continue}}else if(i&&(t===void 0&&l!==","&&(t=null),i=!1),t!==void 0&&(a.push(new E(t)),t=void 0,l===",")){s=":";continue}if(l==="}"){if(o===n.items.length-1)continue}else if(l===s){s=":";continue}var c="Flow map contains an unexpected ".concat(l),v=new U(n,c);v.offset=f,r.errors.push(v)}else u.type===p.BLANK_LINE?e.push({afterKey:!!t,before:a.length}):u.type===p.COMMENT?(ln(r.errors,u),e.push({afterKey:!!t,before:a.length,comment:u.comment})):t===void 0?(s===","&&r.errors.push(new O(u,"Separator , missing in flow map")),t=se(r,u)):(s!==","&&r.errors.push(new O(u,"Indicator : missing in flow map entry")),a.push(new E(t,se(r,u))),t=void 0,i=!1)}return un(r.errors,n),t!==void 0&&a.push(new E(t)),{comments:e,items:a}}function hn(r,n){if(n.type!==p.SEQ&&n.type!==p.FLOW_SEQ){var e="A ".concat(n.type," node cannot be resolved as a sequence");return r.errors.push(new U(n,e)),null}var a=n.type===p.FLOW_SEQ?Ur(r,n):$r(r,n),t=a.comments,i=a.items,s=new X;if(s.items=i,cn(s,t),!r.options.mapAsMap&&i.some(function(u){return u instanceof E&&u.key instanceof W})){var o="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";r.warnings.push(new me(n,o))}return n.resolved=s,s}function $r(r,n){for(var e=[],a=[],t=0;t<n.items.length;++t){var i=n.items[t];switch(i.type){case p.BLANK_LINE:e.push({before:a.length});break;case p.COMMENT:e.push({comment:i.comment,before:a.length});break;case p.SEQ_ITEM:if(i.error&&r.errors.push(i.error),a.push(se(r,i.node)),i.hasProps){var s="Sequence items cannot have tags or anchors before the - indicator";r.errors.push(new O(i,s))}break;default:i.error&&r.errors.push(i.error),r.errors.push(new U(i,"Unexpected ".concat(i.type," node in sequence")))}}return{comments:e,items:a}}function Ur(r,n){for(var e=[],a=[],t=!1,i=void 0,s=null,o="[",u=null,l=0;l<n.items.length;++l){var f=n.items[l];if(typeof f.char=="string"){var c=f.char,v=f.offset;if(c!==":"&&(t||i!==void 0)&&(t&&i===void 0&&(i=o?a.pop():null),a.push(new E(i)),t=!1,i=void 0,s=null),c===o)o=null;else if(!o&&c==="?")t=!0;else if(o!=="["&&c===":"&&i===void 0){if(o===","){if(i=a.pop(),i instanceof E){var h="Chaining flow sequence pairs is invalid",g=new O(n,h);g.offset=v,r.errors.push(g)}if(!t&&typeof s=="number"){var d=f.range?f.range.start:f.offset;d>s+1024&&r.errors.push(fn(n,i));for(var w=u.context.src,m=s;m<d;++m)if(w[m]===`
`){var b="Implicit keys of flow sequence pairs need to be on a single line";r.errors.push(new O(u,b));break}}}else i=null;s=null,t=!1,o=null}else if(o==="["||c!=="]"||l<n.items.length-1){var S="Flow sequence contains an unexpected ".concat(c),P=new U(n,S);P.offset=v,r.errors.push(P)}}else if(f.type===p.BLANK_LINE)e.push({before:a.length});else if(f.type===p.COMMENT)ln(r.errors,f),e.push({comment:f.comment,before:a.length});else{if(o){var M="Expected a ".concat(o," in flow sequence");r.errors.push(new O(f,M))}var k=se(r,f);i===void 0?(a.push(k),u=f):(a.push(new E(i,k)),i=void 0),s=f.range.start,o=","}}return un(r.errors,n),i!==void 0&&a.push(new E(i)),{comments:e,items:a}}var pn={identify:function(n){return n instanceof Uint8Array},default:!1,tag:"tag:yaml.org,2002:binary",resolve:function(n,e){var a=Ce(n,e);if(typeof Buffer=="function")return Buffer.from(a,"base64");if(typeof atob=="function"){for(var t=atob(a.replace(/[\n\r]/g,"")),i=new Uint8Array(t.length),s=0;s<t.length;++s)i[s]=t.charCodeAt(s);return i}else{var o="This environment does not support reading binary tags; either Buffer or atob is required";return n.errors.push(new Ne(e,o)),null}},options:Ee,stringify:function(n,e,a,t){var i=n.comment,s=n.type,o=n.value,u;if(typeof Buffer=="function")u=o instanceof Buffer?o.toString("base64"):Buffer.from(o.buffer).toString("base64");else if(typeof btoa=="function"){for(var l="",f=0;f<o.length;++f)l+=String.fromCharCode(o[f]);u=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(s||(s=Ee.defaultType),s===p.QUOTE_DOUBLE)o=u;else{for(var c=Ee.lineWidth,v=Math.ceil(u.length/c),h=new Array(v),g=0,d=0;g<v;++g,d+=c)h[g]=u.substr(d,c);o=h.join(s===p.BLOCK_LITERAL?`
`:" ")}return dt({comment:i,type:s,value:o},e,a,t)}};function gn(r,n){for(var e=hn(r,n),a=0;a<e.items.length;++a){var t=e.items[a];if(!(t instanceof E)){if(t instanceof V){if(t.items.length>1){var i="Each pair must have its own sequence indicator";throw new O(n,i)}var s=t.items[0]||new E;t.commentBefore&&(s.commentBefore=s.commentBefore?"".concat(t.commentBefore,`
`).concat(s.commentBefore):t.commentBefore),t.comment&&(s.comment=s.comment?"".concat(t.comment,`
`).concat(s.comment):t.comment),t=s}e.items[a]=t instanceof E?t:new E(t)}}return e}function dn(r,n,e){var a=new X(r);a.tag="tag:yaml.org,2002:pairs";var t=I(n),i;try{for(t.s();!(i=t.n()).done;){var s=i.value,o=void 0,u=void 0;if(Array.isArray(s))if(s.length===2)o=s[0],u=s[1];else throw new TypeError("Expected [key, value] tuple: ".concat(s));else if(s&&s instanceof Object){var l=Object.keys(s);if(l.length===1)o=l[0],u=s[o];else throw new TypeError("Expected { key: value } tuple: ".concat(s))}else o=s;var f=r.createPair(o,u,e);a.items.push(f)}}catch(c){t.e(c)}finally{t.f()}return a}var yn={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:gn,createNode:dn},Ge=function(r){T(e,r);var n=C(e);function e(){var a;return L(this,e),a=n.call(this),$(H(a),"add",V.prototype.add.bind(H(a))),$(H(a),"delete",V.prototype.delete.bind(H(a))),$(H(a),"get",V.prototype.get.bind(H(a))),$(H(a),"has",V.prototype.has.bind(H(a))),$(H(a),"set",V.prototype.set.bind(H(a))),a.tag=e.tag,a}return A(e,[{key:"toJSON",value:function(t,i){var s=new Map;i&&i.onCreate&&i.onCreate(s);var o=I(this.items),u;try{for(o.s();!(u=o.n()).done;){var l=u.value,f=void 0,c=void 0;if(l instanceof E?(f=z(l.key,"",i),c=z(l.value,f,i)):f=z(l,"",i),s.has(f))throw new Error("Ordered maps must not include duplicate keys");s.set(f,c)}}catch(v){o.e(v)}finally{o.f()}return s}}]),e}(X);$(Ge,"tag","tag:yaml.org,2002:omap");function Yr(r,n){var e=gn(r,n),a=[],t=I(e.items),i;try{for(t.s();!(i=t.n()).done;){var s=i.value.key;if(s instanceof N)if(a.includes(s.value)){var o="Ordered maps must not include duplicate keys";throw new O(n,o)}else a.push(s.value)}}catch(u){t.e(u)}finally{t.f()}return Object.assign(new Ge,e)}function Qr(r,n,e){var a=dn(r,n,e),t=new Ge;return t.items=a.items,t}var mn={identify:function(n){return n instanceof Map},nodeClass:Ge,default:!1,tag:"tag:yaml.org,2002:omap",resolve:Yr,createNode:Qr},He=function(r){T(e,r);var n=C(e);function e(){var a;return L(this,e),a=n.call(this),a.tag=e.tag,a}return A(e,[{key:"add",value:function(t){var i=t instanceof E?t:new E(t),s=le(this.items,i.key);s||this.items.push(i)}},{key:"get",value:function(t,i){var s=le(this.items,t);return!i&&s instanceof E?s.key instanceof N?s.key.value:s.key:s}},{key:"set",value:function(t,i){if(typeof i!="boolean")throw new Error("Expected boolean value for set(key, value) in a YAML set, not ".concat(q(i)));var s=le(this.items,t);s&&!i?this.items.splice(this.items.indexOf(s),1):!s&&i&&this.items.push(new E(t))}},{key:"toJSON",value:function(t,i){return J(j(e.prototype),"toJSON",this).call(this,t,i,Set)}},{key:"toString",value:function(t,i,s){if(!t)return JSON.stringify(this);if(this.hasAllNullValues())return J(j(e.prototype),"toString",this).call(this,t,i,s);throw new Error("Set items must all have null values")}}]),e}(V);$(He,"tag","tag:yaml.org,2002:set");function Vr(r,n){var e=vn(r,n);if(!e.hasAllNullValues())throw new O(n,"Set items must all have null values");return Object.assign(new He,e)}function Jr(r,n,e){var a=new He,t=I(n),i;try{for(t.s();!(i=t.n()).done;){var s=i.value;a.items.push(r.createPair(s,null,e))}}catch(o){t.e(o)}finally{t.f()}return a}var wn={identify:function(n){return n instanceof Set},nodeClass:He,default:!1,tag:"tag:yaml.org,2002:set",resolve:Vr,createNode:Jr},yt=function(n,e){var a=e.split(":").reduce(function(t,i){return t*60+Number(i)},0);return n==="-"?-a:a},bn=function(n){var e=n.value;if(isNaN(e)||!isFinite(e))return te(e);var a="";e<0&&(a="-",e=Math.abs(e));var t=[e%60];return e<60?t.unshift(0):(e=Math.round((e-t[0])/60),t.unshift(e%60),e>=60&&(e=Math.round((e-t[0])/60),t.unshift(e))),a+t.map(function(i){return i<10?"0"+String(i):String(i)}).join(":").replace(/000000\d*$/,"")},Sn={identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:function(n,e,a){return yt(e,a.replace(/_/g,""))},stringify:bn},kn={identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:function(n,e,a){return yt(e,a.replace(/_/g,""))},stringify:bn},On={identify:function(n){return n instanceof Date},default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:function(n,e,a,t,i,s,o,u,l){u&&(u=(u+"00").substr(1,3));var f=Date.UTC(e,a-1,t,i||0,s||0,o||0,u||0);if(l&&l!=="Z"){var c=yt(l[0],l.slice(1));Math.abs(c)<30&&(c*=60),f-=6e4*c}return new Date(f)},stringify:function(n){var e=n.value;return e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")}};function En(r){var n=typeof process!="undefined"&&process.env||{};return r?typeof YAML_SILENCE_DEPRECATION_WARNINGS!="undefined"?!YAML_SILENCE_DEPRECATION_WARNINGS:!n.YAML_SILENCE_DEPRECATION_WARNINGS:typeof YAML_SILENCE_WARNINGS!="undefined"?!YAML_SILENCE_WARNINGS:!n.YAML_SILENCE_WARNINGS}function Ln(r,n){if(En(!1)){var e=typeof process!="undefined"&&process.emitWarning;e?e(r,n):console.warn(n?"".concat(n,": ").concat(r):r)}}var Rt={};function Kr(r,n){if(!Rt[r]&&En(!0)){Rt[r]=!0;var e="The option '".concat(r,"' will be removed in a future release");e+=n?", use '".concat(n,"' instead."):".",Ln(e,"DeprecationWarning")}}function qr(r,n,e){var a=new V(r);if(n instanceof Map){var t=I(n),i;try{for(t.s();!(i=t.n()).done;){var s=Te(i.value,2),o=s[0],u=s[1];a.items.push(r.createPair(o,u,e))}}catch(v){t.e(v)}finally{t.f()}}else if(n&&q(n)==="object")for(var l=0,f=Object.keys(n);l<f.length;l++){var c=f[l];a.items.push(r.createPair(c,n[c],e))}return typeof r.sortMapEntries=="function"&&a.items.sort(r.sortMapEntries),a}var Me={createNode:qr,default:!0,nodeClass:V,tag:"tag:yaml.org,2002:map",resolve:vn};function Gr(r,n,e){var a=new X(r);if(n&&n[Symbol.iterator]){var t=I(n),i;try{for(t.s();!(i=t.n()).done;){var s=i.value,o=r.createNode(s,e.wrapScalars,null,e);a.items.push(o)}}catch(u){t.e(u)}finally{t.f()}}return a}var ze={createNode:Gr,default:!0,nodeClass:X,tag:"tag:yaml.org,2002:seq",resolve:hn},Hr={identify:function(n){return typeof n=="string"},default:!0,tag:"tag:yaml.org,2002:str",resolve:Ce,stringify:function(n,e,a,t){return e=Object.assign({actualString:!0},e),dt(n,e,a,t)},options:re},mt=[Me,ze,Hr],Ze=function(n){return typeof n=="bigint"||Number.isInteger(n)},wt=function(n,e,a){return oe.asBigInt?BigInt(n):parseInt(e,a)};function Nn(r,n,e){var a=r.value;return Ze(a)&&a>=0?e+a.toString(n):te(r)}var An={identify:function(n){return n==null},createNode:function(n,e,a){return a.wrapScalars?new N(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:ye,stringify:function(){return ye.nullStr}},Mn={identify:function(n){return typeof n=="boolean"},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:function(n){return n[0]==="t"||n[0]==="T"},options:ee,stringify:function(n){var e=n.value;return e?ee.trueStr:ee.falseStr}},In={identify:function(n){return Ze(n)&&n>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:function(n,e){return wt(n,e,8)},options:oe,stringify:function(n){return Nn(n,8,"0o")}},Tn={identify:Ze,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:function(n){return wt(n,n,10)},options:oe,stringify:te},Cn={identify:function(n){return Ze(n)&&n>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:function(n,e){return wt(n,e,16)},options:oe,stringify:function(n){return Nn(n,16,"0x")}},Pn={identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(n,e){return e?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:te},_n={identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:function(n){return parseFloat(n)},stringify:function(n){var e=n.value;return Number(e).toExponential()}},Rn={identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/,resolve:function(n,e,a){var t=e||a,i=new N(parseFloat(n));return t&&t[t.length-1]==="0"&&(i.minFractionDigits=t.length),i},stringify:te},zr=mt.concat([An,Mn,In,Tn,Cn,Pn,_n,Rn]),Bt=function(n){return typeof n=="bigint"||Number.isInteger(n)},xe=function(n){var e=n.value;return JSON.stringify(e)},Bn=[Me,ze,{identify:function(n){return typeof n=="string"},default:!0,tag:"tag:yaml.org,2002:str",resolve:Ce,stringify:xe},{identify:function(n){return n==null},createNode:function(n,e,a){return a.wrapScalars?new N(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:function(){return null},stringify:xe},{identify:function(n){return typeof n=="boolean"},default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:function(n){return n==="true"},stringify:xe},{identify:Bt,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:function(n){return oe.asBigInt?BigInt(n):parseInt(n,10)},stringify:function(n){var e=n.value;return Bt(e)?e.toString():JSON.stringify(e)}},{identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:function(n){return parseFloat(n)},stringify:xe}];Bn.scalarFallback=function(r){throw new SyntaxError("Unresolved plain scalar ".concat(JSON.stringify(r)))};var Dt=function(n){var e=n.value;return e?ee.trueStr:ee.falseStr},ke=function(n){return typeof n=="bigint"||Number.isInteger(n)};function Fe(r,n,e){var a=n.replace(/_/g,"");if(oe.asBigInt){switch(e){case 2:a="0b".concat(a);break;case 8:a="0o".concat(a);break;case 16:a="0x".concat(a);break}var t=BigInt(a);return r==="-"?BigInt(-1)*t:t}var i=parseInt(a,e);return r==="-"?-1*i:i}function nt(r,n,e){var a=r.value;if(ke(a)){var t=a.toString(n);return a<0?"-"+e+t.substr(1):e+t}return te(r)}var Zr=mt.concat([{identify:function(n){return n==null},createNode:function(n,e,a){return a.wrapScalars?new N(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:ye,stringify:function(){return ye.nullStr}},{identify:function(n){return typeof n=="boolean"},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:function(){return!0},options:ee,stringify:Dt},{identify:function(n){return typeof n=="boolean"},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:function(){return!1},options:ee,stringify:Dt},{identify:ke,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^([-+]?)0b([0-1_]+)$/,resolve:function(n,e,a){return Fe(e,a,2)},stringify:function(n){return nt(n,2,"0b")}},{identify:ke,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^([-+]?)0([0-7_]+)$/,resolve:function(n,e,a){return Fe(e,a,8)},stringify:function(n){return nt(n,8,"0")}},{identify:ke,default:!0,tag:"tag:yaml.org,2002:int",test:/^([-+]?)([0-9][0-9_]*)$/,resolve:function(n,e,a){return Fe(e,a,10)},stringify:te},{identify:ke,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^([-+]?)0x([0-9a-fA-F_]+)$/,resolve:function(n,e,a){return Fe(e,a,16)},stringify:function(n){return nt(n,16,"0x")}},{identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(n,e){return e?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:te},{identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:function(n){return parseFloat(n.replace(/_/g,""))},stringify:function(n){var e=n.value;return Number(e).toExponential()}},{identify:function(n){return typeof n=="number"},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve:function(n,e){var a=new N(parseFloat(n.replace(/_/g,"")));if(e){var t=e.replace(/_/g,"");t[t.length-1]==="0"&&(a.minFractionDigits=t.length)}return a},stringify:te}],pn,mn,yn,wn,Sn,kn,On),Xr={core:zr,failsafe:mt,json:Bn,yaml11:Zr},ea={binary:pn,bool:Mn,float:Rn,floatExp:_n,floatNaN:Pn,floatTime:kn,int:Tn,intHex:Cn,intOct:In,intTime:Sn,map:Me,null:An,omap:mn,pairs:yn,seq:ze,set:wn,timestamp:On};function ta(r,n,e){if(n){var a=e.filter(function(i){return i.tag===n}),t=a.find(function(i){return!i.format})||a[0];if(!t)throw new Error("Tag ".concat(n," not found"));return t}return e.find(function(i){return(i.identify&&i.identify(r)||i.class&&r instanceof i.class)&&!i.format})}function na(r,n,e){if(r instanceof Q)return r;var a=e.defaultPrefix,t=e.onTagObj,i=e.prevObjects,s=e.schema,o=e.wrapScalars;n&&n.startsWith("!!")&&(n=a+n.slice(2));var u=ta(r,n,s.tags);if(!u){if(typeof r.toJSON=="function"&&(r=r.toJSON()),!r||q(r)!=="object")return o?new N(r):r;u=r instanceof Map?Me:r[Symbol.iterator]?ze:Me}t&&(t(u),delete e.onTagObj);var l={value:void 0,node:void 0};if(r&&q(r)==="object"&&i){var f=i.get(r);if(f){var c=new ne(f);return e.aliasNodes.push(c),c}l.value=r,i.set(r,l)}return l.node=u.createNode?u.createNode(e.schema,r,e):o?new N(r):r,n&&l.node instanceof Q&&(l.node.tag=n),l.node}function ra(r,n,e,a){var t=r[a.replace(/\W/g,"")];if(!t){var i=Object.keys(r).map(function(h){return JSON.stringify(h)}).join(", ");throw new Error('Unknown schema "'.concat(a,'"; use one of ').concat(i))}if(Array.isArray(e)){var s=I(e),o;try{for(s.s();!(o=s.n()).done;){var u=o.value;t=t.concat(u)}}catch(h){s.e(h)}finally{s.f()}}else typeof e=="function"&&(t=e(t.slice()));for(var l=0;l<t.length;++l){var f=t[l];if(typeof f=="string"){var c=n[f];if(!c){var v=Object.keys(n).map(function(h){return JSON.stringify(h)}).join(", ");throw new Error('Unknown custom tag "'.concat(f,'"; use one of ').concat(v))}t[l]=c}}return t}var aa=function(n,e){return n.key<e.key?-1:n.key>e.key?1:0},Ie=function(){function r(n){var e=n.customTags,a=n.merge,t=n.schema,i=n.sortMapEntries,s=n.tags;L(this,r),this.merge=!!a,this.name=t,this.sortMapEntries=i===!0?aa:i||null,!e&&s&&Kr("tags","customTags"),this.tags=ra(Xr,ea,e||s,t)}return A(r,[{key:"createNode",value:function(e,a,t,i){var s={defaultPrefix:r.defaultPrefix,schema:this,wrapScalars:a},o=i?Object.assign(i,s):s;return na(e,t,o)}},{key:"createPair",value:function(e,a,t){t||(t={wrapScalars:!0});var i=this.createNode(e,t.wrapScalars,null,t),s=this.createNode(a,t.wrapScalars,null,t);return new E(i,s)}}]),r}();$(Ie,"defaultPrefix",Ye);$(Ie,"defaultTags",ie);var Je={anchorPrefix:"a",customTags:null,indent:2,indentSeq:!0,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,simpleKeys:!1,version:"1.2"},ia={get binary(){return Ee},set binary(r){Object.assign(Ee,r)},get bool(){return ee},set bool(r){Object.assign(ee,r)},get int(){return oe},set int(r){Object.assign(oe,r)},get null(){return ye},set null(r){Object.assign(ye,r)},get str(){return re},set str(r){Object.assign(re,r)}},Dn={"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:Ye},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:Ye}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:Ye}]}};function xt(r,n){if((r.version||r.options.version)==="1.0"){var e=n.match(/^tag:private\.yaml\.org,2002:([^:/]+)$/);if(e)return"!"+e[1];var a=n.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return a?"!".concat(a[1],"/").concat(a[2]):"!".concat(n.replace(/^tag:/,""))}var t=r.tagPrefixes.find(function(o){return n.indexOf(o.prefix)===0});if(!t){var i=r.getDefaults().tagPrefixes;t=i&&i.find(function(o){return n.indexOf(o.prefix)===0})}if(!t)return n[0]==="!"?n:"!<".concat(n,">");var s=n.substr(t.prefix.length).replace(/[!,[\]{}]/g,function(o){return{"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"}[o]});return t.handle+s}function sa(r,n){if(n instanceof ne)return ne;if(n.tag){var e=r.filter(function(o){return o.tag===n.tag});if(e.length>0)return e.find(function(o){return o.format===n.format})||e[0]}var a,t;if(n instanceof N){t=n.value;var i=r.filter(function(o){return o.identify&&o.identify(t)||o.class&&t instanceof o.class});a=i.find(function(o){return o.format===n.format})||i.find(function(o){return!o.format})}else t=n,a=r.find(function(o){return o.nodeClass&&t instanceof o.nodeClass});if(!a){var s=t&&t.constructor?t.constructor.name:q(t);throw new Error("Tag not resolved for ".concat(s," value"))}return a}function oa(r,n,e){var a=e.anchors,t=e.doc,i=[],s=t.anchors.getName(r);return s&&(a[s]=r,i.push("&".concat(s))),r.tag?i.push(xt(t,r.tag)):n.default||i.push(xt(t,n.tag)),i.join(" ")}function We(r,n,e,a){var t=n.doc,i=t.anchors,s=t.schema,o;if(!(r instanceof Q)){var u={aliasNodes:[],onTagObj:function(w){return o=w},prevObjects:new Map};r=s.createNode(r,!0,null,u);var l=I(u.aliasNodes),f;try{for(l.s();!(f=l.n()).done;){var c=f.value;c.source=c.source.node;var v=i.getName(c.source);v||(v=i.newName(),i.map[v]=c.source)}}catch(d){l.e(d)}finally{l.f()}}if(r instanceof E)return r.toString(n,e,a);o||(o=sa(s.tags,r));var h=oa(r,o,n);h.length>0&&(n.indentAtStart=(n.indentAtStart||0)+h.length+1);var g=typeof o.stringify=="function"?o.stringify(r,n,e,a):r instanceof N?dt(r,n,e,a):r.toString(n,e,a);return h?r instanceof N||g[0]==="{"||g[0]==="["?"".concat(h," ").concat(g):"".concat(h,`
`).concat(n.indent).concat(g):g}var ua=function(){function r(n){L(this,r),$(this,"map",Object.create(null)),this.prefix=n}return A(r,[{key:"createAlias",value:function(e,a){return this.setAnchor(e,a),new ne(e)}},{key:"createMergePair",value:function(){for(var e=this,a=new an,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return a.value.items=i.map(function(o){if(o instanceof ne){if(o.source instanceof V)return o}else if(o instanceof V)return e.createAlias(o);throw new Error("Merge sources must be Map nodes or their Aliases")}),a}},{key:"getName",value:function(e){var a=this.map;return Object.keys(a).find(function(t){return a[t]===e})}},{key:"getNames",value:function(){return Object.keys(this.map)}},{key:"getNode",value:function(e){return this.map[e]}},{key:"newName",value:function(e){e||(e=this.prefix);for(var a=Object.keys(this.map),t=1;;++t){var i="".concat(e).concat(t);if(!a.includes(i))return i}}},{key:"resolveNodes",value:function(){var e=this.map,a=this._cstAliases;Object.keys(e).forEach(function(t){e[t]=e[t].resolved}),a.forEach(function(t){t.source=t.source.resolved}),delete this._cstAliases}},{key:"setAnchor",value:function(e,a){if(e!=null&&!r.validAnchorNode(e))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(a&&/[\x00-\x19\s,[\]{}]/.test(a))throw new Error("Anchor names must not contain whitespace or control characters");var t=this.map,i=e&&Object.keys(t).find(function(s){return t[s]===e});if(i)if(a)i!==a&&(delete t[i],t[a]=e);else return i;else{if(!a){if(!e)return null;a=this.newName()}t[a]=e}return a}}],[{key:"validAnchorNode",value:function(e){return e instanceof N||e instanceof X||e instanceof V}}]),r}(),la=function r(n,e){if(n&&q(n)==="object"){var a=n.tag;n instanceof W?(a&&(e[a]=!0),n.items.forEach(function(t){return r(t,e)})):n instanceof E?(r(n.key,e),r(n.value,e)):n instanceof N&&a&&(e[a]=!0)}return e},fa=function(n){return Object.keys(la(n,{}))};function ca(r,n){var e={before:[],after:[]},a=void 0,t=!1,i=I(n),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;if(o.valueRange){if(a!==void 0){var u="Document contains trailing content not separated by a ... or --- line";r.errors.push(new U(o,u));break}var l=se(r,o);t&&(l.spaceBefore=!0,t=!1),a=l}else if(o.comment!==null){var f=a===void 0?e.before:e.after;f.push(o.comment)}else o.type===p.BLANK_LINE&&(t=!0,a===void 0&&e.before.length>0&&!r.commentBefore&&(r.commentBefore=e.before.join(`
`),e.before=[]))}}catch(h){i.e(h)}finally{i.f()}if(r.contents=a||null,!a)r.comment=e.before.concat(e.after).join(`
`)||null;else{var c=e.before.join(`
`);if(c){var v=a instanceof W&&a.items[0]?a.items[0]:a;v.commentBefore=v.commentBefore?"".concat(c,`
`).concat(v.commentBefore):c}r.comment=e.after.join(`
`)||null}}function va(r,n){var e=r.tagPrefixes,a=Te(n.parameters,2),t=a[0],i=a[1];if(!t||!i){var s="Insufficient parameters given for %TAG directive";throw new O(n,s)}if(e.some(function(u){return u.handle===t})){var o="The %TAG directive must only be given at most once per handle in the same document.";throw new O(n,o)}return{handle:t,prefix:i}}function ha(r,n){var e=Te(n.parameters,1),a=e[0];if(n.name==="YAML:1.0"&&(a="1.0"),!a){var t="Insufficient parameters given for %YAML directive";throw new O(n,t)}if(!Dn[a]){var i=r.version||r.options.version,s="Document will be parsed as YAML ".concat(i," rather than YAML ").concat(a);r.warnings.push(new me(n,s))}return a}function pa(r,n,e){var a=[],t=!1,i=I(n),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,u=o.comment,l=o.name;switch(l){case"TAG":try{r.tagPrefixes.push(va(r,o))}catch(h){r.errors.push(h)}t=!0;break;case"YAML":case"YAML:1.0":if(r.version){var f="The %YAML directive must only be given at most once per document.";r.errors.push(new O(o,f))}try{r.version=ha(r,o)}catch(h){r.errors.push(h)}t=!0;break;default:if(l){var c="YAML only supports %TAG and %YAML directives, and not %".concat(l);r.warnings.push(new me(o,c))}}u&&a.push(u)}}catch(h){i.e(h)}finally{i.f()}if(e&&!t&&(r.version||e.version||r.options.version)==="1.1"){var v=function(g){var d=g.handle,w=g.prefix;return{handle:d,prefix:w}};r.tagPrefixes=e.tagPrefixes.map(v),r.version=e.version}r.commentBefore=a.join(`
`)||null}function ve(r){if(r instanceof W)return!0;throw new Error("Expected a YAML collection as document contents")}var bt=function(){function r(n){L(this,r),this.anchors=new ua(n.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=n,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}return A(r,[{key:"add",value:function(e){return ve(this.contents),this.contents.add(e)}},{key:"addIn",value:function(e,a){ve(this.contents),this.contents.addIn(e,a)}},{key:"delete",value:function(e){return ve(this.contents),this.contents.delete(e)}},{key:"deleteIn",value:function(e){return Se(e)?this.contents==null?!1:(this.contents=null,!0):(ve(this.contents),this.contents.deleteIn(e))}},{key:"getDefaults",value:function(){return r.defaults[this.version]||r.defaults[this.options.version]||{}}},{key:"get",value:function(e,a){return this.contents instanceof W?this.contents.get(e,a):void 0}},{key:"getIn",value:function(e,a){return Se(e)?!a&&this.contents instanceof N?this.contents.value:this.contents:this.contents instanceof W?this.contents.getIn(e,a):void 0}},{key:"has",value:function(e){return this.contents instanceof W?this.contents.has(e):!1}},{key:"hasIn",value:function(e){return Se(e)?this.contents!==void 0:this.contents instanceof W?this.contents.hasIn(e):!1}},{key:"set",value:function(e,a){ve(this.contents),this.contents.set(e,a)}},{key:"setIn",value:function(e,a){Se(e)?this.contents=a:(ve(this.contents),this.contents.setIn(e,a))}},{key:"setSchema",value:function(e,a){if(!(!e&&!a&&this.schema)){typeof e=="number"&&(e=e.toFixed(1)),e==="1.0"||e==="1.1"||e==="1.2"?(this.version?this.version=e:this.options.version=e,delete this.options.schema):e&&typeof e=="string"&&(this.options.schema=e),Array.isArray(a)&&(this.options.customTags=a);var t=Object.assign({},this.getDefaults(),this.options);this.schema=new Ie(t)}}},{key:"parse",value:function(e,a){this.options.keepCstNodes&&(this.cstNode=e),this.options.keepNodeTypes&&(this.type="DOCUMENT");var t=e.directives,i=t===void 0?[]:t,s=e.contents,o=s===void 0?[]:s,u=e.directivesEndMarker,l=e.error,f=e.valueRange;if(l&&(l.source||(l.source=this),this.errors.push(l)),pa(this,i,a),u&&(this.directivesEndMarker=!0),this.range=f?[f.start,f.end]:null,this.setSchema(),this.anchors._cstAliases=[],ca(this,o),this.anchors.resolveNodes(),this.options.prettyErrors){var c=I(this.errors),v;try{for(c.s();!(v=c.n()).done;){var h=v.value;h instanceof de&&h.makePretty()}}catch(m){c.e(m)}finally{c.f()}var g=I(this.warnings),d;try{for(g.s();!(d=g.n()).done;){var w=d.value;w instanceof de&&w.makePretty()}}catch(m){g.e(m)}finally{g.f()}}return this}},{key:"listNonDefaultTags",value:function(){return fa(this.contents).filter(function(e){return e.indexOf(Ie.defaultPrefix)!==0})}},{key:"setTagPrefix",value:function(e,a){if(e[0]!=="!"||e[e.length-1]!=="!")throw new Error("Handle must start and end with !");if(a){var t=this.tagPrefixes.find(function(i){return i.handle===e});t?t.prefix=a:this.tagPrefixes.push({handle:e,prefix:a})}else this.tagPrefixes=this.tagPrefixes.filter(function(i){return i.handle!==e})}},{key:"toJSON",value:function(e,a){var t=this,i=this.options,s=i.keepBlobsInJSON,o=i.mapAsMap,u=i.maxAliasCount,l=s&&(typeof e!="string"||!(this.contents instanceof N)),f={doc:this,indentStep:"  ",keep:l,mapAsMap:l&&!!o,maxAliasCount:u,stringify:We},c=Object.keys(this.anchors.map);c.length>0&&(f.anchors=new Map(c.map(function(b){return[t.anchors.map[b],{alias:[],aliasCount:0,count:1}]})));var v=z(this.contents,e,f);if(typeof a=="function"&&f.anchors){var h=I(f.anchors.values()),g;try{for(h.s();!(g=h.n()).done;){var d=g.value,w=d.count,m=d.res;a(m,w)}}catch(b){h.e(b)}finally{h.f()}}return v}},{key:"toString",value:function(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");var e=this.options.indent;if(!Number.isInteger(e)||e<=0){var a=JSON.stringify(e);throw new Error('"indent" option must be a positive integer, not '.concat(a))}this.setSchema();var t=[],i=!1;if(this.version){var s="%YAML 1.2";this.schema.name==="yaml-1.1"&&(this.version==="1.0"?s="%YAML:1.0":this.version==="1.1"&&(s="%YAML 1.1")),t.push(s),i=!0}var o=this.listNonDefaultTags();this.tagPrefixes.forEach(function(h){var g=h.handle,d=h.prefix;o.some(function(w){return w.indexOf(d)===0})&&(t.push("%TAG ".concat(g," ").concat(d)),i=!0)}),(i||this.directivesEndMarker)&&t.push("---"),this.commentBefore&&((i||!this.directivesEndMarker)&&t.unshift(""),t.unshift(this.commentBefore.replace(/^/gm,"#")));var u={anchors:Object.create(null),doc:this,indent:"",indentStep:" ".repeat(e),stringify:We},l=!1,f=null;if(this.contents){this.contents instanceof Q&&(this.contents.spaceBefore&&(i||this.directivesEndMarker)&&t.push(""),this.contents.commentBefore&&t.push(this.contents.commentBefore.replace(/^/gm,"#")),u.forceBlockIndent=!!this.comment,f=this.contents.comment);var c=f?null:function(){return l=!0},v=We(this.contents,u,function(){return f=null},c);t.push(ge(v,"",f))}else this.contents!==void 0&&t.push(We(this.contents,u));return this.comment&&((!l||f)&&t[t.length-1]!==""&&t.push(""),t.push(this.comment.replace(/^/gm,"#"))),t.join(`
`)+`
`}}]),r}();$(bt,"defaults",Dn);function ga(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=arguments.length>2?arguments[2]:void 0;e===void 0&&typeof n=="string"&&(e=n,n=!0);var a=Object.assign({},bt.defaults[Je.version],Je),t=new Ie(a);return t.createNode(r,n,e)}var Xe=function(r){T(e,r);var n=C(e);function e(a){return L(this,e),n.call(this,Object.assign({},Je,a))}return e}(bt);function da(r,n){var e=[],a,t=I(ht(r)),i;try{for(t.s();!(i=t.n()).done;){var s=i.value,o=new Xe(n);o.parse(s,a),e.push(o),a=o}}catch(u){t.e(u)}finally{t.f()}return e}function xn(r,n){var e=ht(r),a=new Xe(n).parse(e[0]);if(e.length>1){var t="Source contains multiple documents; please use YAML.parseAllDocuments()";a.errors.unshift(new O(e[1],t))}return a}function ya(r,n){var e=xn(r,n);if(e.warnings.forEach(function(a){return Ln(a)}),e.errors.length>0)throw e.errors[0];return e.toJSON()}function ma(r,n){var e=new Xe(n);return e.contents=r,String(e)}var wa={createNode:ga,defaultOptions:Je,Document:Xe,parse:ya,parseAllDocuments:da,parseCST:ht,parseDocument:xn,scalarOptions:ia,stringify:ma},ba=Object.freeze(Object.defineProperty({__proto__:null,YAML:wa},Symbol.toStringTag,{value:"Module"})),Sa=Vn(ba),ka=Sa.YAML;class Oa{static addMeta(n,e){const a=ka.stringify(e);return`---
`+a+`---

`+n}static trimTitle(n){return(n.startsWith("#")?n.substr(1).trimLeft():n).replace(new RegExp(`[\r
]`),"")}static trimBodyHeader(n){return n.startsWith("# ")?n.split(`
`).slice(1).join(`
`).trimLeft():n}}const Ft=new ft,Ea=r=>{const[n,e]=jt(r.onConvertNote);return F.exports.createElement(pe,{dataSource:r.url.matchNotes,className:Gt.sub2,loading:n.loading,renderItem:a=>F.exports.createElement(pe.Item,{key:a.id},F.exports.createElement(zn,null,F.exports.createElement($e.Text,null,a.title),F.exports.createElement($t,{onClick:()=>e(a)},je.t("convertExternalLink.action.convert"))))})},Wt=r=>r.urls.length!==0,xa=()=>{const[r,n]=F.exports.useState([]),[e,a]=jt(async function(o){if(o===""){n([]);return}const u=await Ft.search(o);console.log("onSearch: ",u),n(u.filter(Wt))});async function t(s){console.log("onConvertNote: ",s),await Ft.convert(s.noteId,{[s.url]:{title:Oa.trimTitle(s.linkNoteTitle),url:`:/${s.linkNoteId}`}}),n(qn(o=>{console.log("remove: ",s.noteIndex,s.urlIndex),o[s.noteIndex].urls.splice(s.urlIndex,1),o.filter(u=>u.urls.length!==0)})),n(o=>o.filter(Wt)),Jn.success(je.t("convertExternalLink.msg.success"))}async function i(s){await he.noteActionApi.openAndWatch(s)}return F.exports.createElement(Gn,{title:je.t("convertExternalLink.title")},F.exports.createElement(Hn.Search,{onSearch:a,allowClear:!0,loading:e.loading}),F.exports.createElement(pe,{dataSource:r,itemLayout:"vertical",loading:e.loading,renderItem:(s,o)=>F.exports.createElement(pe.Item,{key:s.id,extra:[F.exports.createElement($t,{onClick:()=>i(s.id)},je.t("common.action.open"))]},F.exports.createElement($e.Title,{level:4},s.title),F.exports.createElement(pe,{dataSource:s.urls,className:Gt.sub1,itemLayout:"vertical",renderItem:(u,l)=>F.exports.createElement(pe.Item,{key:l},F.exports.createElement($e.Title,{level:5},u.title),F.exports.createElement($e.Link,null,u.url),u.matchNotes&&u.matchNotes.length!==0&&F.exports.createElement(Ea,{url:u,onConvertNote:f=>t({noteId:s.id,url:u.url,linkNoteId:f.id,linkNoteTitle:f.title,noteIndex:o,urlIndex:l})}))}))}))};export{xa as default};
