var ut=Object.defineProperty,ft=Object.defineProperties;var dt=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var Z=(e,t,a)=>t in e?ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,A=(e,t)=>{for(var a in t||(t={}))Ee.call(t,a)&&Z(e,a,t[a]);if(M)for(var a of M(t))Te.call(t,a)&&Z(e,a,t[a]);return e},O=(e,t)=>ft(e,dt(t));var F=(e,t)=>{var a={};for(var r in e)Ee.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&M)for(var r of M(e))t.indexOf(r)<0&&Te.call(e,r)&&(a[r]=e[r]);return a};var x=(e,t,a)=>(Z(e,typeof t!="symbol"?t+"":t,a),a);import{r as m,n as ue,o as ne,f as ze,a as E,_ as se,w as ie,D as ht,F as pt,G as gt,H as mt,I as yt,s as vt,h as xt,J as Me,L as bt,C as wt,R as L,N as Fe,O as Ct,x as fe,S as At,c as Ie,k as qe,y as jt,P as Nt}from"./index.edaecf24.js";var St=globalThis&&globalThis.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},Je=m.exports.createContext(void 0),Et=function(t){var a,r=m.exports.useContext(ue),n=r.getPrefixCls,c=r.direction,f=t.prefixCls,h=t.size,p=t.className,g=St(t,["prefixCls","size","className"]),v=n("btn-group",f),C="";switch(h){case"large":C="lg";break;case"small":C="sm";break;case"middle":case void 0:break;default:ne(!h,"Button.Group","Invalid prop `size`.")}var I=ze(v,(a={},E(a,"".concat(v,"-").concat(C),C),E(a,"".concat(v,"-rtl"),c==="rtl"),a),p);return m.exports.createElement(Je.Provider,{value:h},m.exports.createElement("div",se({},g,{className:I})))},Tt=Et,Ft=0,P={};function J(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,a=Ft++,r=t;function n(){r-=1,r<=0?(e(),delete P[a]):P[a]=ie(n)}return P[a]=ie(n),a}J.cancel=function(t){t!==void 0&&(ie.cancel(P[t]),delete P[t])};J.ids=P;var Y;function Oe(e){return!e||e.offsetParent===null||e.hidden}function It(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}var Ge=function(e){ht(a,e);var t=pt(a);function a(){var r;return gt(this,a),r=t.apply(this,arguments),r.containerRef=m.exports.createRef(),r.animationStart=!1,r.destroyed=!1,r.onClick=function(n,c){var f,h,p=r.props,g=p.insertExtraNode,v=p.disabled;if(!(v||!n||Oe(n)||n.className.indexOf("-leave")>=0)){r.extraNode=document.createElement("div");var C=mt(r),I=C.extraNode,_=r.context.getPrefixCls;I.className="".concat(_(""),"-click-animating-node");var T=r.getAttributeName();if(n.setAttribute(T,"true"),c&&c!=="#ffffff"&&c!=="rgb(255, 255, 255)"&&It(c)&&!/rgba\((?:\d*, ){3}0\)/.test(c)&&c!=="transparent"){I.style.borderColor=c;var w=((f=n.getRootNode)===null||f===void 0?void 0:f.call(n))||n.ownerDocument,$=w instanceof Document?w.body:(h=w.firstChild)!==null&&h!==void 0?h:w;Y=yt(`
      [`.concat(_(""),"-click-animating-without-extra-node='true']::after, .").concat(_(""),`-click-animating-node {
        --antd-wave-shadow-color: `).concat(c,`;
      }`),"antd-wave",{csp:r.csp,attachTo:$})}g&&n.appendChild(I),["transition","animation"].forEach(function(s){n.addEventListener("".concat(s,"start"),r.onTransitionStart),n.addEventListener("".concat(s,"end"),r.onTransitionEnd)})}},r.onTransitionStart=function(n){if(!r.destroyed){var c=r.containerRef.current;!n||n.target!==c||r.animationStart||r.resetEffect(c)}},r.onTransitionEnd=function(n){!n||n.animationName!=="fadeEffect"||r.resetEffect(n.target)},r.bindAnimationEvent=function(n){if(!(!n||!n.getAttribute||n.getAttribute("disabled")||n.className.indexOf("disabled")>=0)){var c=function(h){if(!(h.target.tagName==="INPUT"||Oe(h.target))){r.resetEffect(n);var p=getComputedStyle(n).getPropertyValue("border-top-color")||getComputedStyle(n).getPropertyValue("border-color")||getComputedStyle(n).getPropertyValue("background-color");r.clickWaveTimeoutId=window.setTimeout(function(){return r.onClick(n,p)},0),J.cancel(r.animationStartId),r.animationStart=!0,r.animationStartId=J(function(){r.animationStart=!1},10)}};return n.addEventListener("click",c,!0),{cancel:function(){n.removeEventListener("click",c,!0)}}}},r.renderWave=function(n){var c=n.csp,f=r.props.children;if(r.csp=c,!m.exports.isValidElement(f))return f;var h=r.containerRef;return vt(f)&&(h=xt(f.ref,r.containerRef)),Me(f,{ref:h})},r}return bt(a,[{key:"componentDidMount",value:function(){var n=this.containerRef.current;!n||n.nodeType!==1||(this.instance=this.bindAnimationEvent(n))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var n=this.context.getPrefixCls,c=this.props.insertExtraNode;return c?"".concat(n(""),"-click-animating"):"".concat(n(""),"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(n){var c=this;if(!(!n||n===this.extraNode||!(n instanceof Element))){var f=this.props.insertExtraNode,h=this.getAttributeName();n.setAttribute(h,"false"),Y&&(Y.innerHTML=""),f&&this.extraNode&&n.contains(this.extraNode)&&n.removeChild(this.extraNode),["transition","animation"].forEach(function(p){n.removeEventListener("".concat(p,"start"),c.onTransitionStart),n.removeEventListener("".concat(p,"end"),c.onTransitionEnd)})}}},{key:"render",value:function(){return m.exports.createElement(wt,null,this.renderWave)}}]),a}(m.exports.Component);Ge.contextType=ue;var ee=function(){return{width:0,opacity:0,transform:"scale(0)"}},te=function(t){return{width:t.scrollWidth,opacity:1,transform:"scale(1)"}},Ot=function(t){var a=t.prefixCls,r=t.loading,n=t.existIcon,c=!!r;return n?L.createElement("span",{className:"".concat(a,"-loading-icon")},L.createElement(Fe,null)):L.createElement(Ct,{visible:c,motionName:"".concat(a,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:ee,onAppearActive:te,onEnterStart:ee,onEnterActive:te,onLeaveStart:te,onLeaveActive:ee},function(f,h){var p=f.className,g=f.style;return L.createElement("span",{className:"".concat(a,"-loading-icon"),style:g,ref:h},L.createElement(Fe,{className:p}))})},kt=Ot,_t=globalThis&&globalThis.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},ke=/^[\u4e00-\u9fa5]{2}$/,oe=ke.test.bind(ke);function $t(e){return typeof e=="string"}function q(e){return e==="text"||e==="link"}function Rt(e){return m.exports.isValidElement(e)&&e.type===m.exports.Fragment}function Wt(e,t){if(e!=null){var a=t?" ":"";return typeof e!="string"&&typeof e!="number"&&$t(e.type)&&oe(e.props.children)?Me(e,{children:e.props.children.split("").join(a)}):typeof e=="string"?oe(e)?m.exports.createElement("span",null,e.split("").join(a)):m.exports.createElement("span",null,e):Rt(e)?m.exports.createElement("span",null,e):e}}function Bt(e,t){var a=!1,r=[];return m.exports.Children.forEach(e,function(n){var c=qe(n),f=c==="string"||c==="number";if(a&&f){var h=r.length-1,p=r[h];r[h]="".concat(p).concat(n)}else r.push(n);a=f}),m.exports.Children.map(r,function(n){return Wt(n,t)})}fe("default","primary","ghost","dashed","link","text");fe("default","circle","round");fe("submit","button","reset");var Pt=function(t,a){var r,n=t.loading,c=n===void 0?!1:n,f=t.prefixCls,h=t.type,p=h===void 0?"default":h,g=t.danger,v=t.shape,C=v===void 0?"default":v,I=t.size,_=t.className,T=t.children,w=t.icon,$=t.ghost,s=$===void 0?!1:$,i=t.block,l=i===void 0?!1:i,o=t.htmlType,u=o===void 0?"button":o,y=_t(t,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),d=m.exports.useContext(At),N=m.exports.useContext(Je),H=m.exports.useState(!!c),de=Ie(H,2),R=de[0],he=de[1],at=m.exports.useState(!1),pe=Ie(at,2),K=pe[0],ge=pe[1],Q=m.exports.useContext(ue),nt=Q.getPrefixCls,me=Q.autoInsertSpaceInButton,st=Q.direction,W=a||m.exports.createRef(),ye=function(){return m.exports.Children.count(T)===1&&!w&&!q(p)},it=function(){if(!(!W||!W.current||me===!1)){var z=W.current.textContent;ye()&&oe(z)?K||ge(!0):K&&ge(!1)}},U=qe(c)==="object"&&c.delay?c.delay||!0:!!c;m.exports.useEffect(function(){var k=null;return typeof U=="number"?k=window.setTimeout(function(){k=null,he(U)},U):he(U),function(){k&&(window.clearTimeout(k),k=null)}},[U]),m.exports.useEffect(it,[W]);var ve=function(z){var X=t.onClick,lt=t.disabled;if(R||lt){z.preventDefault();return}X==null||X(z)};ne(!(typeof w=="string"&&w.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(w,"` at https://ant.design/components/icon")),ne(!(s&&q(p)),"Button","`link` or `text` button can't be a `ghost` button.");var S=nt("btn",f),xe=me!==!1,ot={large:"lg",small:"sm",middle:void 0},be=N||I||d,we=be&&ot[be]||"",ct=R?"loading":w,Ce=ze(S,(r={},E(r,"".concat(S,"-").concat(C),C!=="default"&&C),E(r,"".concat(S,"-").concat(p),p),E(r,"".concat(S,"-").concat(we),we),E(r,"".concat(S,"-icon-only"),!T&&T!==0&&!!ct),E(r,"".concat(S,"-background-ghost"),s&&!q(p)),E(r,"".concat(S,"-loading"),R),E(r,"".concat(S,"-two-chinese-chars"),K&&xe),E(r,"".concat(S,"-block"),l),E(r,"".concat(S,"-dangerous"),!!g),E(r,"".concat(S,"-rtl"),st==="rtl"),r),_),Ae=w&&!R?w:m.exports.createElement(kt,{existIcon:!!w,prefixCls:S,loading:!!R}),je=T||T===0?Bt(T,ye()&&xe):null,Ne=jt(y,["navigate"]);if(Ne.href!==void 0)return m.exports.createElement("a",se({},Ne,{className:Ce,onClick:ve,ref:W}),Ae,je);var Se=m.exports.createElement("button",se({},y,{type:u,className:Ce,onClick:ve,ref:W}),Ae,je);return q(p)?Se:m.exports.createElement(Ge,{disabled:!!R},Se)},V=m.exports.forwardRef(Pt);V.displayName="Button";V.Group=Tt;V.__ANT_BUTTON=!0;var lr=V,Ve={},Ut=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),He="%[a-f0-9]{2}",_e=new RegExp(He,"gi"),$e=new RegExp("("+He+")+","gi");function ce(e,t){try{return decodeURIComponent(e.join(""))}catch{}if(e.length===1)return e;t=t||1;var a=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],ce(a),ce(r))}function Lt(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(_e),a=1;a<t.length;a++)e=ce(t,a).join(""),t=e.match(_e);return e}}function Dt(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},a=$e.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch{var r=Lt(a[0]);r!==a[0]&&(t[a[0]]=r)}a=$e.exec(e)}t["%C2"]="\uFFFD";for(var n=Object.keys(t),c=0;c<n.length;c++){var f=n[c];e=e.replace(new RegExp(f,"g"),t[f])}return e}var zt=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Dt(e)}},Mt=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const a=e.indexOf(t);return a===-1?[e]:[e.slice(0,a),e.slice(a+t.length)]},qt=function(e,t){for(var a={},r=Object.keys(e),n=Array.isArray(t),c=0;c<r.length;c++){var f=r[c],h=e[f];(n?t.indexOf(f)!==-1:t(f,h,e))&&(a[f]=h)}return a};(function(e){const t=Ut,a=zt,r=Mt,n=qt,c=s=>s==null;function f(s){switch(s.arrayFormat){case"index":return i=>(l,o)=>{const u=l.length;return o===void 0||s.skipNull&&o===null||s.skipEmptyString&&o===""?l:o===null?[...l,[g(i,s),"[",u,"]"].join("")]:[...l,[g(i,s),"[",g(u,s),"]=",g(o,s)].join("")]};case"bracket":return i=>(l,o)=>o===void 0||s.skipNull&&o===null||s.skipEmptyString&&o===""?l:o===null?[...l,[g(i,s),"[]"].join("")]:[...l,[g(i,s),"[]=",g(o,s)].join("")];case"comma":case"separator":return i=>(l,o)=>o==null||o.length===0?l:l.length===0?[[g(i,s),"=",g(o,s)].join("")]:[[l,g(o,s)].join(s.arrayFormatSeparator)];default:return i=>(l,o)=>o===void 0||s.skipNull&&o===null||s.skipEmptyString&&o===""?l:o===null?[...l,g(i,s)]:[...l,[g(i,s),"=",g(o,s)].join("")]}}function h(s){let i;switch(s.arrayFormat){case"index":return(l,o,u)=>{if(i=/\[(\d*)\]$/.exec(l),l=l.replace(/\[\d*\]$/,""),!i){u[l]=o;return}u[l]===void 0&&(u[l]={}),u[l][i[1]]=o};case"bracket":return(l,o,u)=>{if(i=/(\[\])$/.exec(l),l=l.replace(/\[\]$/,""),!i){u[l]=o;return}if(u[l]===void 0){u[l]=[o];return}u[l]=[].concat(u[l],o)};case"comma":case"separator":return(l,o,u)=>{const y=typeof o=="string"&&o.includes(s.arrayFormatSeparator),d=typeof o=="string"&&!y&&v(o,s).includes(s.arrayFormatSeparator);o=d?v(o,s):o;const N=y||d?o.split(s.arrayFormatSeparator).map(H=>v(H,s)):o===null?o:v(o,s);u[l]=N};default:return(l,o,u)=>{if(u[l]===void 0){u[l]=o;return}u[l]=[].concat(u[l],o)}}}function p(s){if(typeof s!="string"||s.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function g(s,i){return i.encode?i.strict?t(s):encodeURIComponent(s):s}function v(s,i){return i.decode?a(s):s}function C(s){return Array.isArray(s)?s.sort():typeof s=="object"?C(Object.keys(s)).sort((i,l)=>Number(i)-Number(l)).map(i=>s[i]):s}function I(s){const i=s.indexOf("#");return i!==-1&&(s=s.slice(0,i)),s}function _(s){let i="";const l=s.indexOf("#");return l!==-1&&(i=s.slice(l)),i}function T(s){s=I(s);const i=s.indexOf("?");return i===-1?"":s.slice(i+1)}function w(s,i){return i.parseNumbers&&!Number.isNaN(Number(s))&&typeof s=="string"&&s.trim()!==""?s=Number(s):i.parseBooleans&&s!==null&&(s.toLowerCase()==="true"||s.toLowerCase()==="false")&&(s=s.toLowerCase()==="true"),s}function $(s,i){i=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},i),p(i.arrayFormatSeparator);const l=h(i),o=Object.create(null);if(typeof s!="string"||(s=s.trim().replace(/^[?#&]/,""),!s))return o;for(const u of s.split("&")){if(u==="")continue;let[y,d]=r(i.decode?u.replace(/\+/g," "):u,"=");d=d===void 0?null:["comma","separator"].includes(i.arrayFormat)?d:v(d,i),l(v(y,i),d,o)}for(const u of Object.keys(o)){const y=o[u];if(typeof y=="object"&&y!==null)for(const d of Object.keys(y))y[d]=w(y[d],i);else o[u]=w(y,i)}return i.sort===!1?o:(i.sort===!0?Object.keys(o).sort():Object.keys(o).sort(i.sort)).reduce((u,y)=>{const d=o[y];return Boolean(d)&&typeof d=="object"&&!Array.isArray(d)?u[y]=C(d):u[y]=d,u},Object.create(null))}e.extract=T,e.parse=$,e.stringify=(s,i)=>{if(!s)return"";i=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},i),p(i.arrayFormatSeparator);const l=d=>i.skipNull&&c(s[d])||i.skipEmptyString&&s[d]==="",o=f(i),u={};for(const d of Object.keys(s))l(d)||(u[d]=s[d]);const y=Object.keys(u);return i.sort!==!1&&y.sort(i.sort),y.map(d=>{const N=s[d];return N===void 0?"":N===null?g(d,i):Array.isArray(N)?N.reduce(o(d),[]).join("&"):g(d,i)+"="+g(N,i)}).filter(d=>d.length>0).join("&")},e.parseUrl=(s,i)=>{i=Object.assign({decode:!0},i);const[l,o]=r(s,"#");return Object.assign({url:l.split("?")[0]||"",query:$(T(s),i)},i&&i.parseFragmentIdentifier&&o?{fragmentIdentifier:v(o,i)}:{})},e.stringifyUrl=(s,i)=>{i=Object.assign({encode:!0,strict:!0},i);const l=I(s.url).split("?")[0]||"",o=e.extract(s.url),u=e.parse(o,{sort:!1}),y=Object.assign(u,s.query);let d=e.stringify(y,i);d&&(d=`?${d}`);let N=_(s.url);return s.fragmentIdentifier&&(N=`#${g(s.fragmentIdentifier,i)}`),`${l}${d}${N}`},e.pick=(s,i,l)=>{l=Object.assign({parseFragmentIdentifier:!0},l);const{url:o,query:u,fragmentIdentifier:y}=e.parseUrl(s,l);return e.stringifyUrl({url:o,query:n(u,i),fragmentIdentifier:y},l)},e.exclude=(s,i,l)=>{const o=Array.isArray(i)?u=>!i.includes(u):(u,y)=>!i(u,y);return e.pick(s,o,l)}})(Ve);var Jt=class{static scan(e){let t=new Set(["constructor"]);return Reflect.ownKeys(Reflect.getPrototypeOf(e)).filter(a=>!t.has(a)&&e[a]instanceof Function)}static bindMethodThis(e){return this.scan(e).forEach(t=>{let a=t;Reflect.set(e,a,e[a].bind(e))}),e}},Gt=Object.defineProperty,Vt=(e,t,a)=>t in e?Gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Re=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,a)=>(typeof require!="undefined"?require:t)[a]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),Ke=(e,t,a)=>(Vt(e,typeof t!="symbol"?t+"":t,a),a),G=class{static async pageToAllList(e,t){let a=[];for(let r=1,n=!0;n;r++){let c=await e(O(A({},t),{page:r,limit:this.MaxLimit}));n=c.has_more,a.push(...c.items)}return a}};Ke(G,"MaxLimit",100);var Qe=class{constructor(e){this.ajax=e}async list(e){return this.ajax.get("/notes",e)}async get(e,t){return this.ajax.get(`/notes/${e}`,{fields:t})}async create(e){return this.ajax.post("/notes",e)}async update(e){let r=e,{id:t}=r,a=F(r,["id"]);return await this.ajax.put(`/notes/${t}`,a)}async remove(e){return this.ajax.delete(`/notes/${e}`)}tagsById(e){return G.pageToAllList(r=>{var n=r,{id:t}=n,a=F(n,["id"]);return this.ajax.get(`/notes/${t}/tags`,A({},a))},{id:e})}async resourcesById(e,t=["id","title"]){return G.pageToAllList(n=>{var c=n,{id:a}=c,r=F(c,["id"]);return this.ajax.get(`/notes/${a}/resources`,A({fields:t},r))},{id:e})}},Ht=class{constructor(e){this.ajax=e}async list(e){return await this.ajax.get("/tags",e)}async get(e){return await this.ajax.get(`/tags/${e}`)}async create(e){return await this.ajax.post("/tags",e)}async update(e){let r=e,{id:t}=r,a=F(r,["id"]);return await this.ajax.post(`/tags/${t}`,a)}async remove(e){return await this.ajax.delete(`/tags/${e}`)}async notesByTagId(a){var r=a,{id:e}=r,t=F(r,["id"]);return await this.ajax.get(`/tags/${e}/notes`,t)}async addTagByNoteId(e,t){return await this.ajax.post(`/tags/${e}/notes/`,{id:t})}async removeTagByNoteId(e,t){return await this.ajax.delete(`/tags/${e}/notes/${t}`)}},b;(function(e){e[e.Note=1]="Note",e[e.Folder=2]="Folder",e[e.Setting=3]="Setting",e[e.Resource=4]="Resource",e[e.Tag=5]="Tag",e[e.NoteTag=6]="NoteTag",e[e.Search=7]="Search",e[e.Alarm=8]="Alarm",e[e.MasterKey=9]="MasterKey",e[e.ItemChange=10]="ItemChange",e[e.NoteResource=11]="NoteResource",e[e.ResourceLocalState=12]="ResourceLocalState",e[e.Revision=13]="Revision",e[e.Migration=14]="Migration",e[e.SmartFilter=15]="SmartFilter"})(b||(b={}));var le=class{constructor(e){this.ajax=e}async search(e){le.TypeEnumMap["8"]="";let r=e,{type:t}=r,a=F(r,["type"]);return this.ajax.get("/search",O(A({},a),{type:le.TypeEnumMap[t]}))}},Xe=le;Ke(Xe,"TypeEnumMap",{[b.Note]:"note",[b.Folder]:"folder",[b.Setting]:"setting",[b.Resource]:"resource",[b.Tag]:"tag",[b.NoteTag]:"note_tag",[b.Search]:"search",[b.Alarm]:"alarm",[b.MasterKey]:"master_key",[b.ItemChange]:"item_change",[b.NoteResource]:"note_resource",[b.ResourceLocalState]:"resource_local_state",[b.Revision]:"revision",[b.Migration]:"migration",[b.SmartFilter]:"smart_filter"});var Kt=class{constructor(e){this.ajax=e}async ping(){return await this.ajax.get("/ping",{},{responseType:"text"})==="JoplinClipperServer"}},Ze=class{constructor(e){this.ajax=e}async list(e){return this.ajax.get("/folders",e)}async listAll(){return this.ajax.get("/folders",{as_tree:1})}async get(e){return this.ajax.get(`/folders/${e}`)}async create(e){return this.ajax.post("/folders",e)}async update(e){let r=e,{id:t}=r,a=F(r,["id"]);return this.ajax.put(`/folders/${t}`,a)}async remove(e){return this.ajax.delete(`/folders/${e}`)}async notesByFolderId(e,t){return await G.pageToAllList(n=>{var c=n,{id:a}=c,r=F(c,["id"]);return this.ajax.get(`/folders/${a}/notes`,r)},{id:e,fields:t})}},Qt=class{constructor(e){this.ajax=e}async list(e){return await this.ajax.get("/resources",e)}async get(e,t){return await this.ajax.get(`/resources/${e}`,{fields:t})}async create(e){let r=e,{data:t}=r,a=F(r,["data"]);return await this.ajax.postFormData("/resources","post",{props:JSON.stringify(a),data:e.data})}async update(e){let n=e,{id:t,data:a}=n,r=F(n,["id","data"]);return await this.ajax.postFormData(`/resources/${t}`,"put",{props:JSON.stringify(r),data:a})}async remove(e){return await this.ajax.delete(`/resources/${e}`)}async fileByResourceId(e){let t=await this.ajax.get(`/resources/${e}/file`,{},{responseType:"arraybuffer"});return Buffer.from(t,"binary")}},D;(function(e){e.OpenAndWatch="openAndWatch",e.StopWatching="stopWatching",e.NoteIsWatched="noteIsWatched"})(D||(D={}));var Xt=class{constructor(e){this.ajax=e}openAndWatch(e){return this.baseAction(D.OpenAndWatch,e)}stopWatching(e){return this.baseAction(D.StopWatching,e)}async noteIsWatched(e){return this.isWatch(e)}async isWatch(e){return this.baseAction(D.NoteIsWatched,e)}async baseAction(e,t){return this.ajax.post("/services/externalEditWatcher",{action:e,noteId:t})}},B;(function(e){e.OpenAndWatch="openAndWatch",e.Watch="watch",e.StopWatching="stopWatching",e.NoteIsWatched="isWatched"})(B||(B={}));var Zt=class{constructor(e){this.ajax=e}openAndWatch(e){return this.baseAction(B.OpenAndWatch,e)}watch(e){return this.baseAction(B.Watch,e)}stopWatching(e){return this.baseAction(B.StopWatching,e)}async noteIsWatched(e){return this.baseAction(B.NoteIsWatched,e)}async baseAction(e,t){return this.ajax.post("/services/resourceEditWatcher",{action:e,resourceId:t})}},Yt=class{constructor(e){x(this,"noteApi");this.noteApi=new Qe(e)}rename(e,t){return this.noteApi.update({id:e,title:t})}move(e,t){return this.noteApi.update({id:e,parent_id:t})}async toggleTodo(e,t){let a=await this.noteApi.get(e,["id","is_todo","todo_completed"]);!a.is_todo||await this.noteApi.update({id:a.id,todo_completed:t||(a.todo_completed===0?1:0)})}},er=class{constructor(e){x(this,"folderApi");this.folderApi=new Ze(e)}rename(e,t){return this.folderApi.update({id:e,title:t})}async path(e){if(!e)return[];let t=await this.folderApi.get(e);return t.parent_id?(await this.path(t.parent_id)).concat([t]):[t]}async move(e,t){if(e!==t){if((await this.path(t)).some(a=>e===a.id))throw new Error("Cannot move directory to subdirectory");await this.folderApi.update({id:e,parent_id:t})}}},tr=class{constructor(){x(this,"baseUrl","http://localhost:41184");x(this,"token","")}},re=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof global!="undefined"&&global||{},rr=Object.freeze({method:"get",data:void 0,headers:{},responseType:"json"}),ar=class{constructor(e){this.config=e}async request(e){typeof fetch=="undefined"&&Reflect.set(re,"fetch",Re("node-fetch")),typeof FormData=="undefined"&&Reflect.set(re,"FormData",Re("form-data"));let t=A(A({},rr),e),a=await fetch(t.url,O(A({},t),{method:t.method,body:t.data instanceof FormData?t.data:JSON.stringify(t.data)}));if(!a.ok)throw new Error((await a.json()).error);switch(t.responseType){case"json":return await a.json();case"arraybuffer":return await a.arrayBuffer();case"blob":return await a.blob();case"text":return await a.text();default:throw new Error(`Unsupported responseType: ${t.responseType}`)}}baseUrl(e,t){let a=Ve.stringify(O(A({},t),{token:this.config.token}),{arrayFormat:"comma"});return`${this.config.baseUrl.endsWith("/")?this.config.baseUrl.slice(0,this.config.baseUrl.length-1):this.config.baseUrl}${e}?${a}`}get(e,t,a){return this.request(O(A({url:this.baseUrl(e,t)},a),{method:"get"}))}post(e,t,a){return this.request(O(A({url:this.baseUrl(e),data:t},a),{method:"post"}))}put(e,t,a){return this.request(O(A({url:this.baseUrl(e),data:t},a),{method:"put"}))}delete(e,t,a){return this.request(O(A({url:this.baseUrl(e),data:t},a),{method:"delete",responseType:"text"}))}async postFormData(e,t,a){typeof FormData=="undefined"&&Reflect.set(re,"FormData",(await Nt(()=>import("./browser.90f36da1.js").then(function(n){return n.b}),[])).default);let r=new FormData;return Object.entries(a).forEach(([n,c])=>{n&&c&&r.append(n,c)}),await this.request({url:this.baseUrl(e),method:t,data:r})}},nr=class{constructor(e){this.ajax=e}async list(e){return await this.ajax.get("/events",e)}async get(e,t){return await this.ajax.get(`/events/${e}`,{fields:t})}},Ye=class{constructor(){x(this,"config",new tr);x(this,"ajax",new ar(this.config));x(this,"folderApi",new Ze(this.ajax));x(this,"folderExtApi",new er(this.ajax));x(this,"joplinApi",new Kt(this.ajax));x(this,"noteActionApi",new Xt(this.ajax));x(this,"noteApi",new Qe(this.ajax));x(this,"noteExtApi",new Yt(this.ajax));x(this,"resourceActionApi",new Zt(this.ajax));x(this,"resourceApi",new Qt(this.ajax));x(this,"searchApi",new Xe(this.ajax));x(this,"tagApi",new Ht(this.ajax));x(this,"eventApi",new nr(this.ajax))}set baseUrl(e){this.config.baseUrl=e}get baseUrl(){return this.config.baseUrl}set token(e){this.config.token=e}get token(){return this.config.token}},We=new Ye;Object.entries(We).forEach(([e,t])=>{Reflect.set(We,e,Jt.bindMethodThis(t))});var et=(e,t,a)=>new Promise((r,n)=>{var c=p=>{try{h(a.next(p))}catch(g){n(g)}},f=p=>{try{h(a.throw(p))}catch(g){n(g)}},h=p=>p.done?r(p.value):Promise.resolve(p.value).then(c,f);h((a=a.apply(e,t)).next())}),Be;(function(e){e.Xlsx="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",e.Zip="application/zip",e.Pdf="application/pdf"})(Be||(Be={}));var j=class{static dataURItoBlob(e){let t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),n=new Uint8Array(r);for(let c=0;c<t.length;c++)n[c]=t.charCodeAt(c);return new Blob([r],{type:a})}static blobToFile(e,t){let a=e;return a.lastModifiedDate=new Date,a.name=t,e}static arrayBufferToBlob(e,t){return new Blob([new Uint8Array(e).buffer],t)}static initLookup(){let e=new Uint8Array(256);for(let t=0;t<j.chars.length;t++)e[j.chars.charCodeAt(t)]=t;return e}static arrayBufferToBase64(e){let t=new Uint8Array(e),a,r=t.length,n="";for(a=0;a<r;a+=3)n+=j.chars[t[a]>>2],n+=j.chars[(t[a]&3)<<4|t[a+1]>>4],n+=j.chars[(t[a+1]&15)<<2|t[a+2]>>6],n+=j.chars[t[a+2]&63];return r%3==2?n=n.substring(0,n.length-1)+"=":r%3==1&&(n=n.substring(0,n.length-2)+"=="),n}static base64ToArrayBuffer(e){let t=e.length*.75,a=e.length,r,n=0,c,f,h,p;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);let g=new ArrayBuffer(t),v=new Uint8Array(g);for(r=0;r<a;r+=4)c=j.lookup[e.charCodeAt(r)],f=j.lookup[e.charCodeAt(r+1)],h=j.lookup[e.charCodeAt(r+2)],p=j.lookup[e.charCodeAt(r+3)],v[n++]=c<<2|f>>4,v[n++]=(f&15)<<4|h>>2,v[n++]=(h&3)<<6|p&63;return g}static arrayBufferToString(e){return new Promise((t,a)=>{let r=new Blob([e]),n=new FileReader;n.addEventListener("load",()=>t(n.result)),n.addEventListener("error",a),n.readAsText(r,"utf-8")})}static arrayBufferToJson(e){return et(this,null,function*(){return JSON.parse(yield this.arrayBufferToString(e))})}},ae=j;ae.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ae.lookup=j.initLookup(),ae.ArrayBufferToJson=j.arrayBufferToJson;var sr=class{constructor(e){this.storage=e,this.clear=()=>{this.storage.clear()},this.getItem=t=>this.storage.getItem(t),this.key=t=>this.storage.key(t),this.removeItem=t=>{this.storage.removeItem(t)},this.setItem=(t,a)=>{this.storage.setItem(t,a)}}get length(){return this.storage.length}};function ir(e){let t=new Set(["storage","length","clear","getItem","setItem","removeItem","key"]);return new Proxy(new sr(e),{get(a,r,n){if(t.has(r))return Reflect.get(a,r,n);try{return JSON.parse(a.getItem(r.toString()))}catch{return null}},set(a,r,n,c){return t.has(r)?Reflect.set(a,r,c):(a.setItem(r.toString(),n!=null?JSON.stringify(n):n),!0)}})}function ur(e){return et(this,arguments,function*(t,a=t.substr(t.lastIndexOf("/")+1)){let r=document.createElement("a");r.download=a,r.style.display="none",r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)})}const tt=new Ye,rt=ir(localStorage);var Pe,Ue;tt.token=(Ue=(Pe=rt.settings)==null?void 0:Pe.token)!=null?Ue:"";var Le,De;tt.baseUrl=(De=(Le=rt.settings)==null?void 0:Le.baseUrl)!=null?De:"http://localhost:41184";function fr(e){const t=`joplin://x-callback-url/openNote?id=${e}`;window.open(t)}export{ur as A,lr as B,b as i,tt as j,ir as k,G as n,fr as o};
